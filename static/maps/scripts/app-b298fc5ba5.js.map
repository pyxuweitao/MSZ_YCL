{"version":3,"sources":["scripts/app-b298fc5ba5.js"],"names":["angular","module","directive","restrict","template","transclude","link","scope","element","after","next","css","prop","parent","scrollTop","on","$rootScope","AccountSvc","LoginSvc","cmLoginSvc","cmLoadingSvc","templateUrl","uiIsPanelShow","currentUser","getCurrentUser","funcSwitchUser","show","funcLogout","setContent","logout","then","hide","$on","cmNavBarService","$state","controller","menuItems","getMenu","goAndClose","state","params","go","close","e","v","isUndefined","$scope","cmBackSvc","canGoBack","$watch","goBack","title","loadMenuItem","menuItem","getMatchedMenuItem","current","name","toggleMenu","$broadcast","toggle","event","toState","toParams","factory","setTitle","label","icon","match","s","Class","ProcessTypeId","Rev","ProcessNodeTypeId","p","undefined","matchedItems","forEach","this","goBackList","push","removeLastVisit","cur","pop","length","isShow","isLoggedIn","funcTryToClose","$timeout","delay","uiIsHover","uiCurrentHoverIndex","uiIsLoggingIn","uiIsInputError","defaultAvatar","emptyUser","Id","Password","Avatar","AutoUpdateSavedUser","selectedUser","copy","savedUsers","getSavedUsers","uiWhichPanel","funcDisplayUserLogin","user","funcRemoveUser","index","splice","setSavedUsers","funcDisplayUserSwitch","funcDisplayNewUserLogin","funcUserIdChanged","funcCancelInputErrorMark","funcLogin","funcAddOrUpdateUser","userExistIndex","savedUser","login","User","reload","content","status","showingloadingList","tempContent","$filter","FormSvc","ProcessSvc","stateParams","uiIsSideMenuListLoaded","fetchProcessTypesByClass","processTypes","sideMenuList","error","console","log","funcCreateForm","requestCreate","form","ArrivalSerialNumber","FormId","Mode","funcGoDetail","funcGoDetailInfo","funcGoFormEdit","Process","ProcessNode","ProcessNodeForm","equals","funcEditForm","funcShortcutCreateFormAndRequestEditFormAndEditForm","Form","TypeId","$window","ngTableParams","tableData","uiIsFilterByCurrentUser","tableDataOption","Status","tableParams","page","count","sorting","total","counts","filterDelay","getData","$defer","orderedData","orderBy","filter","resolve","slice","fetchForms","forms","funcSubmitForm","r","confirm","requestSubmitAndAddToArrivalAndAddToProcess","$q","IsComplete","StartTime","EndTime","funcChangeOption","option","value","tableParamsInProcessView","fetchProcessesByProcessTypeIdAndRev","Processes","Parameter","fromJson","tableDataInProcessView","funcResetDefaultProcessType","defaultProcessType","getUserSetting","Enable","setting","setUserSetting","ControlDesignSvc","uiIsReferenceShow","uiShowProcessNodeDetail","uiProcessNodeViewSwitch","nodes","references","process","fetchProcess","node","Order","parseInt","alert","funcGetCurrentStageTabCode","Available","FormStatus","CheckStatus","toString","funcShowProcessNodeDetail","currentReference","uiCurrentActiveReferenceIndex","funcSwitchReference","funcHideReference","funcViewSourceForm","SourceFormId","funcViewForm","funcRequestEditForm","requestEdit","funcConfirmForm","requestConfirm","funcCancelEditForm","requestCancelEdit","requestSubmit","funcShortcutRequestEditFormAndEditForm","funcShortcutConfirmFormAndSubmitForm","window","createFormTimer","cancel","editFormTimer","confirmFormTimer","cancelEditFormTimer","submitFormTimer","funcMarkProcessComplete","completePromise","updateProcessIsComplete","promise","all","funcMarkProcessWaiting","funcRedoComplete","funcUpdateProcessNodeAvailableFlag","AvailableFlag","updateProcessNodeAvailableFlag","funcCheckPass","updateProcessNodeCheckStatus","funcCheckDeny","funcRedoFormAndCheck","redoCheckStatusPromise","redoFormEditStatusPromise","funcRedoForm","funcRedoCheck","funcUpdateProcessNodeConclusion","Conclusion","toJson","updateProcessNodeConclusion","$interval","uiIsEditTags","uiIsDataLoaded","uiIsAutoSaveFormData","uiIsReferencePanelShow","uiIsFormStatusEditable","isEditable","table","isSortable","formInfo","formData","formConfig","formInfoPromise","fetchForm","formDataPromise","fetchFormData","formConfigPromise","fetchFormConfig","Data","JSON","stringify","referencesProvider","funcSwitchReferencePanel","funcSideSaveForm","funcSaveToServer","funcSideEditForm","funcSideViewForm","saveFormDataToServer","funcGoBackToList","TypeClass","autoSaveTimer","interval","uiIsProcessTypesShow","funcGoList","funcSetDefaultProcessType","vm","options","fields","wrapper","fieldGroup","templateOptions","className","type","$http","VERSION","version","currentTime","Date","quickGoProcessASN","currentTimeUpdateTimer","funcAddArrivalForm","funcQuickGoProcess","arrivalSerialNumber","funcCheckFormat","pattern","test","uiIsInDesignCacheEdit","Name","Description","fetchProcessTypes","ProcessTypes","funcEditProcess","processTypePromise","fetchProcessType","processNodeTypesPromise","fetchProcessNodeTypes","ProcessTypeAndProcessNodeTypes","ProcessType","ProcessNodeTypes","ProcessNodeType","FormConfig","saveCacheConfig","isEditCache","loadItemType","uiIsTable","uiIsMap","uiIsTableTemplateBaseShow","uiIsMapTemplateBaseShow","uiIsAddPanelShow","uiIsEditCache","presetConfig","getPresetConfig","configString","pageType","generalConfig","general","itemConfig","item","itemConfigs","localConfigs","description","getTime","whetherToLoad","cacheConfig","getCacheConfig","extend","items","getCacheItemConfigByChildConfig","funcSaveConfigsCacheAndBack","updateProcessTypePromise","updateProcessType","updateProcessNodeTypesPromise","updateProcessNodeTypes","currentEditItemConfigIndex","funcLoadItemConfigToAddPanel","funcGoDesignEdit","goPageType","map","funcGoEditItemConfig","order","saveItemCacheConfig","saveCacheConfigByFatherConfig","itemConfigType","Type","funcGoCreateItemConfig","funcPackFormConfigString","formConfigPack","funcLoadConfig","config","k","funcAddUpConfigs","funcReorderConfigs","funcDeleteFromConfigs","funcAddProcessTypeIdToConfigs","funcAddDatabaseTableNameToFormConfigs","databaseTableNameStr","databaseTableNameStr2","replace","va","DatabaseTableName","toUpperCase","funcCreateProcessTypeAndProcessNodeTypes","processType","processNodeTypes","createProcessTypePromise","createProcessType","createProcessNodeTypesPromise","createProcessNodeTypes","SQLQuerySvc","OptionalProcessTypes","subclasses","subclass","Subclass","funcSubmitSubclass","createSubclass","funcRemoveSubclass","SubclassId","deleteSubclass","fetchSubclasses","Subclasses","Value","configs","funcReadSources","readSourcesFromKVStore","Sources","funcCreateSource","createSourceToKVStore","funcDeleteSource","sourceName","deleteSourceFromKVStore","ControlFeedbackSvc","feedback","Subject","Content","SubmitTime","SubmitUserId","SubmitUserName","funcSubmitNewFeedback","localStorage","setItem","createFeedback","ControlUserSvc","$uibModal","users","fetchUsers","Users","funcOpenUserModifyModal","modalInstance","open","data","result","modifiedUser","onSubmit","model","initialFieldsModel","key","required","placeholder","group","buttons","submit","ControlOperationSvc","operations","funcGo","userId","funcGetDescription","method","GET","POST","PUT","fetchOperations","top","Operations","operation","formlyWrapperConfig","formlyConfigProvider","setWrapper","$inject","formlyThirdPartyInputConfig","camelize","string","chr","toLowerCase","setType","subTitleTemplate","basicSelectTemplate","groupedSelectTemplate","attributes","bindings","ngModelAttrs","attr","attribute","binding","bound","$event","preventDefault","stopPropagation","opened","defaultOptions","addonLeft","class","onClick","isOpen","onFocus","$viewValue","$modelValue","to","datepickerOptions","formlyCollectionConfig","unique","el","funcSetTableHeader","setTimeout","rowModifyClassWidth","$","find","outerWidth","firstFormly","formlyFields","tableHeadCells","width","get","cell","relation","$digest","bind","ready","setInterval","uiIsLoading","rows","rowIndex","nextFormLyField","unbind","funcGoToNextRowBegin","rowsLength","first","focus","funcPushWithBringDown","$apply","newRows","ctrlKey","keyCode","nextInput","uiIsEmptyTableInitial","funcPush","funcPop","uiIsInitial","copyFields","addRandomIds","field","id","getRandomInt","min","max","Math","floor","random","formOptions","formState","funcRemoveWithConfirm","funcRemove","lastRow","newRow","bringDown","bringDownOption","funcCopyFields","runBlock","$log","debug","run","routerConfig","$stateProvider","$urlRouterProvider","url","views","","main@home","controllerAs","abstract","otherwise","constant","malarkey","moment","cfpLoadingBarProvider","includeSpinner","includeBar","nyaBsConfigProvider","setLocalizedText","defaultNoneSelection","noSearchResult","numberItemSelected","useLocale","UtilSvc","$templateCache","put","remove","require","terminal","attrs","ngModel","opts","opt","o","html","html2","rerender","stripBr","noLineBreaks","$setViewValue","$render","blur","oldRender","el2","range","sel","moveCaretToEndOnChange","document","createRange","getSelection","childNodes","setStartAfter","collapse","removeAllRanges","addRange","selectNonEditable","target","toElement","setStartBefore","setEndAfter","height","quite","format","displayValue","font","textAlign","fontSize","backgroundColor","lineColor","newValue","JsBarcode","liveSearch","funcUpdateModel","isArray","funcFindOptionIndex","array","i","isNumber","radix","digit","isUpperCase","isFillZero","round","pow","Array","join","SERVER_URL","SERVER_KVSTORE_URL","create","deferred","defer","post","success","reject","read","update","delete","query","sql","ResultSet","stateParamsToFormTypeId","daohuo","shouhuobaogao","zhuliao","waiguan","lihua","shimoya","yanseshougan","zhuliaoruku","fuliao","shangbiao","bugantie","zhika","huabian","goupan","tiaojiekou","jiandai","songjindai","Forms","isString","FormData","isAutoSave","autoSave","requestAddToArrival","addToArrival","requestAddToArrivalAndAddToProcess","addToArrivalAndAddToProcess","requestSubmitAndAddToArrival","_this","updateFormTags","tags","funcProcessDataTagsPatch","Tags","_DEPRECATED_fetchArrivals","arrivals","_DEPRECATED_fetchProcessesByClass","processes","_DEPRECATED_requestAddToProcess","addToProcess","_DEPRECATED_requestAddAllToProcess","cache","optionalOption","fetchProcessReference","updateProcessCheckStatus","warn","str","lowercase","KVStoreSvc","KVStoreSourceKey","CompleteCondition","Reference","OptionalTags","Style","Show","QuickInitial","AvailableCondition","Config","LeftDescription","RightDescription","AttributeName","Row","Group","Width","Options","ngMinlength","ngMaxlength","ngPattern","ngTrim","disabled","ngRequired","ngDisabled","ngChange","cachedConfig","active","Components","fatherConfigObj","configParser","fatherConfigObjCopy","processConfigItem","processConfigItemFormConfig","processConfig","processTypeObj","processTypeId","createProcessNodeType","processNodeTypeObj","processNodeTypeObjArr","processNodeTypeId","subclassId","info","source","concat","newSources","funcCheckAndShowLoginPanel","password","setCurrentUser","getItem","outerSavedUsers","defaultUser","Username","Department","Job","funcFetchUserPermissions","funcCheckPagePermission","curState","matcherRules","home.control.designProcess","home.control.designEditProcess","home.control.designEditForm","home.control.designEditTable","home.control.designEditMap","home.control.designSource","userPermissions","isBelongTo","set","entity","isPageAccessPermitted","requiredPermission","userSettings","UserSetting.UI.Process.List.DefaultProcessType","收货","主料","辅料","settingName"],"mappings":"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","file":"scripts/app-b298fc5ba5.js","sourcesContent":["/**\n * Created by centi on 2015/6/9.\n */\n'use strict';\n\nangular.module('DEVBYCM.cmSideMenuBox', [])\n  .directive('cmSideMenuBox', function () {\n    return {\n      restrict: 'E',\n      template: '<div ng-transclude></div>',\n      transclude: true,\n      link: function () {\n      }\n    };\n  })\n  .directive('cmSideMenu', function () {\n    return {\n      restrict: 'E',\n      template: '<ng-include src=\"\\'app/components/ui/cmNavBar/template.html\\'\"></ng-include>\\n<div ng-transclude style=\"position: absolute;top: 45px;right: 0;bottom: 0;left: 0;overflow-y: auto\"></div>',\n      transclude: true\n    };\n  })\n  .directive('cmSideMenuContent', function () {\n    return {\n      restrict: 'E'\n    };\n  })\n  .directive('cmSideMenuContentHeader', function () {\n    return {\n      restrict: 'EA',\n      scope:false,\n      template: '<div ng-transclude></div>',\n      transclude: true,\n      link: function (scope, element) {\n        /*\n         //通过调整父元素margin来实现，在被wrap的页面会失效\n         element.parent().css('padding-top',parseInt($window.getComputedStyle(element[0].parentElement, null).paddingTop.slice(0,-2)) + element.prop('offsetHeight')+'px');\n         */\n        //添加一个替代元素来虚拟一个初始高度\n        element.after('<div></div>');\n        element.next().css('height',element.prop('offsetHeight')+'px');\n        element.css('top', element.parent()[0].scrollTop+'px');\n        element.parent().on('scroll', function () {\n          element.css('top', element.parent()[0].scrollTop+'px');\n        });\n      }\n    };\n  })\n;\n\n/**\n * Created by Centimitr on 2015/9/8.\n */\n\n'use strict';\nangular.module('DEVBYCM.cmNotificationAreaModule', [])\n  .directive('cmPerson',function($rootScope,AccountSvc,LoginSvc,cmLoginSvc,cmLoadingSvc){\n    return {\n      restrict: 'E',\n      templateUrl: 'app/components/ui/cmNotificationArea/template.html',\n      scope: {},\n      link: function (scope) {\n        scope.uiIsPanelShow = false;\n        scope.currentUser = AccountSvc.getCurrentUser();\n        scope.funcSwitchUser = function(){\n          scope.uiIsPanelShow = false;\n          cmLoginSvc.show();\n        };\n        scope.funcLogout = function(){\n          scope.uiIsPanelShow = false;\n          cmLoadingSvc.setContent('正在登出...','inProgress');\n          cmLoadingSvc.show();\n          LoginSvc.logout().then(function(){\n            cmLoadingSvc.setContent('您已注销','success');\n          },function(){\n            cmLoadingSvc.setContent('登出失败','error');\n          }).finally(function(){\n            cmLoadingSvc.hide();\n          })\n        };\n        $rootScope.$on('cmLogin',function(){\n          scope.currentUser = AccountSvc.getCurrentUser();\n        })\n      }\n    };\n  })\n;\n\n/**\n * Created by Centimitr on 2015/7/13.\n */\n'use strict';\n\nangular.module('DEVBYCM.cmNavMenu', [])\n  .directive('cmNavMenu', function (cmNavBarService,$rootScope,$state) {\n    return {\n      restrict: 'E',\n      templateUrl: 'app/components/ui/cmNavMenu/template.html',\n      transclude: true,\n      controller: function(){\n      },\n      link: function(scope) {\n        scope.menuItems=cmNavBarService.getMenu();\n        scope.show=false;\n        scope.goAndClose = function(state,params){\n          $state.go(state,params);\n          scope.show=false;\n        };\n        scope.close = function(){\n          scope.show=false;\n        };\n        $rootScope.$on('cmNavMenu',function(e,v){\n          v && !angular.isUndefined(v['toggle']) && (scope.show=!scope.show);\n        });\n      }\n    };\n  })\n;\n\n'use strict';\nangular.module('DEVBYCM.cmNavBarModule', [])\n  .controller('cmNavBarCtrl', function ($scope, $rootScope, $state, cmNavBarService,cmBackSvc) {\n    //设置返回按钮功能\n    $scope.canGoBack = cmBackSvc.canGoBack();\n    $scope.$watch(function () {\n      return cmBackSvc.canGoBack()\n    }, function () {\n      $scope.canGoBack = cmBackSvc.canGoBack();\n    });\n    $scope.goBack = function () {\n      if ($scope.canGoBack) {\n        $scope.canGoBack = cmBackSvc.goBack();\n      }\n    };\n    //设置右侧标题\n    $scope.title = '';\n    $rootScope.$on('cmNavBar', function (e, v) {\n      v && !angular.isUndefined(v['title']) && ($scope.title = v['title']);\n    });\n    //获取当前处于菜单的哪一个类型\n    var loadMenuItem = function (state, params) {\n      $scope.menuItem = cmNavBarService.getMatchedMenuItem(state, params);\n    };\n    loadMenuItem($state.current.name, $state.params);\n    $scope.toggleMenu = function () {\n      $rootScope.$broadcast('cmNavMenu', {toggle: true});\n    };\n    $rootScope.$on('$stateChangeStart',\n      function (event, toState, toParams) {\n        loadMenuItem(toState['name'], toParams);\n      });\n  })\n  .factory('cmNavBarService', function ($rootScope) {\n    return {\n      'setTitle': function (title) {\n        $rootScope.$broadcast('cmNavBar', {title: title});\n      },\n      'getMenu': function () {\n        return [\n          {\n            'title': '首页',\n            'label': '平台首页',\n            'icon': 'ion-ios-home-outline',\n            'show':true,\n            'state': 'home',\n            'params': {},\n            'match': function (s) {\n              return (s === 'home');\n            }\n          },\n          {\n            'title': '收货',\n            'label': '收货报告',\n            'icon': 'ion-ios-list-outline',\n            'show':true,\n            'state': 'home.process.formList',\n            'params': {\n              'Class': '收货',\n              'ProcessTypeId':'ARRIVAL',\n              'Rev':0,\n              'ProcessNodeTypeId':'AR01',\n            },\n            'match': function (s, p) {\n              return (s === 'home.process.formList' && p.Class === '收货');\n            }\n          },\n          {\n            'title': '主料',\n            'label': '主料检验',\n            'icon': 'ion-ios-paper-outline',\n            'show':true,\n            'state': 'home.process.processList',\n            'params': {\n              'Class': '主料',\n              'ProcessTypeId':undefined,\n              'Rev':undefined\n            },\n            'match': function (s, p) {\n              return (s === 'home.process.processList' && p.Class === '主料');\n            }\n          },\n          {\n            'title': '辅料',\n            'label': '辅料检验',\n            'icon': 'ion-ios-paper-outline',\n            'show':true,\n            'state': 'home.process.processList',\n            'params': {\n              'Class': '辅料',\n              'ProcessTypeId':undefined,\n              'Rev':undefined,\n            },\n            'match': function (s, p) {\n              return (s === 'home.process.processList' && p.Class === '辅料');\n            }\n          },\n          {\n            'title': '管理',\n            'label': '系统管理',\n            'icon': 'ion-ios-cog-outline',\n            'show':true,\n            'state': 'home.control.feedbackNew',\n            'params': {},\n            'match': function (s) {\n              return (s === 'home.control.feedbackNew');\n            }\n          },\n          {\n            'title': '表单',\n            'label': '',\n            'icon': 'ion-ios-photos-outline',\n            'state': 'home.process.detailForm',\n            'params': {},\n            'match': function (s) {\n              return (s === 'home.process.detailForm');\n            }\n          }\n        ];\n      },\n      'getMatchedMenuItem': function (state, params) {\n        var matchedItems = [];\n        angular.forEach(this.getMenu(), function (v) {\n          v && v['match'](state, params) && this['push'](v);\n        }, matchedItems);\n        return matchedItems[0];\n      }\n    };\n  })\n  .factory('cmBackSvc',function($rootScope, $state){\n    var goBackList = [];\n    goBackList.push({\n      'state': $state.current.name,\n      'params': $state.params\n    });\n    $rootScope.$on('$stateChangeSuccess', function () {\n      goBackList.push({\n        'state': $state.current.name,\n        'params': $state.params\n      });\n    });\n    return {\n      'removeLastVisit':function(){\n        var cur = goBackList.pop();\n        goBackList.pop();\n        goBackList.push(cur);\n      },\n      'canGoBack': function () {\n        return goBackList.length > 1;\n      },\n      'goBack': function () {\n        goBackList.pop();\n        var s = goBackList.pop();\n        $state.go(s.state, s.params);\n        return goBackList.length > 0;\n      }\n    };\n  })\n;\n\n/**\n * Created by Centimitr on 2015/11/29.\n */\n'use strict';\n\nangular.module('DEVBYCM.cmLoginModule', [])\n  .directive('cmLogin', function ($rootScope, cmLoginSvc, LoginSvc) {\n    return {\n      restrict: 'E',\n      templateUrl: 'app/components/ui/cmLogin/template.html',\n      scope: {},\n      link: function (scope) {\n        scope.isShow = false;\n        scope.isLoggedIn = LoginSvc.isLoggedIn();\n        scope.funcTryToClose = function () {\n          if (scope.isLoggedIn) {\n            scope.isShow = false;\n          }\n        };\n        $rootScope.$on('cmLogin', function (e, v) {\n          v && !angular.isUndefined(v['show']) && (scope.isShow = v['show']);\n          scope.isLoggedIn = LoginSvc.isLoggedIn();\n        });\n      }\n    };\n  })\n  .factory('cmLoginSvc', function ($rootScope, $timeout) {\n    return {\n      'show': function () {\n        $rootScope.$broadcast('cmLogin', {'show': true});\n      },\n      'hide': function (delay) {\n        angular.isUndefined(delay) && (delay = 1000);\n        return $timeout(function () {\n          $rootScope.$broadcast('cmLogin', {'show': false});\n        }, delay);\n      }\n    };\n  })\n  .controller('cmLoginCtrl', function ($scope, $state, cmLoginSvc, LoginSvc) {\n    $scope.uiIsHover = false;\n    $scope.uiCurrentHoverIndex = null;\n    $scope.uiIsLoggingIn = false;\n    $scope.uiIsInputError = false;\n    var defaultAvatar = 'data:image/png;base64,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';\n    var emptyUser = {\n      'Id': null,\n      'Password': null,\n      'Avatar':defaultAvatar,\n      'AutoUpdateSavedUser': false\n    };\n    $scope.selectedUser = angular.copy(emptyUser);\n    $scope.savedUsers = LoginSvc.getSavedUsers();\n    $scope.uiWhichPanel = 'switch';\n    var funcDisplayUserLogin = function (user) {\n      $scope.uiWhichPanel = 'login';\n      $scope.selectedUser = angular.copy(user);\n    };\n    //存储用户不足两个（可供挑选）时，自动加载一个\n    (function humanizedViewSwitch(){\n      if($scope.savedUsers.length===0){\n        funcDisplayUserLogin(emptyUser);\n      }else if($scope.savedUsers.length===1){\n        funcDisplayUserLogin($scope.savedUsers[0]);\n      }\n    })();\n    //$scope.savedUsers = [$scope.savedUsers[0]];\n    //View functions\n    $scope.funcRemoveUser = function (index) {\n      $scope.savedUsers.splice(index, 1);\n      LoginSvc.setSavedUsers($scope.savedUsers);\n    };\n    $scope.funcDisplayUserSwitch = function () {\n      $scope.uiWhichPanel = 'switch';\n    };\n    $scope.funcDisplayNewUserLogin = function () {\n      $scope.uiWhichPanel = 'login';\n      funcDisplayUserLogin(emptyUser);\n    };\n    $scope.funcDisplayUserLogin = function (user) {\n      funcDisplayUserLogin(user);\n    };\n    $scope.funcUserIdChanged = function () {\n      $scope.selectedUser.Avatar = defaultAvatar;\n    };\n    $scope.funcCancelInputErrorMark = function () {\n      $scope.uiIsInputError = false;\n    };\n    $scope.funcLogin = function () {\n      $scope.uiIsLoggingIn = true;\n      var user = $scope.selectedUser;\n      var funcAddOrUpdateUser = function (user) {\n        var savedUsers = $scope.savedUsers;\n        //-1 默认表示还没有存储这个用户\n        var userExistIndex = -1;\n        angular.forEach(savedUsers, function (savedUser, index) {\n          if (savedUser.Id === user.Id) {\n            userExistIndex = index;\n          }\n        });\n        if (userExistIndex ===-1) {\n          savedUsers.push(user);\n        } else {\n          savedUsers[userExistIndex] = user;\n        }\n        $scope.savedUsers = savedUsers;\n        LoginSvc.setSavedUsers(savedUsers);\n      };\n      LoginSvc.login(user.Id, user.Password)\n        .then(function (User) {\n          if (user.AutoUpdateSavedUser) {\n            User.AutoUpdateSavedUser = true;\n            User.Password = user.Password;\n            funcAddOrUpdateUser(User);\n          }\n          $scope.uiWhichPanel = 'success';\n          cmLoginSvc.hide(1500).then(function(){\n            $scope.funcDisplayUserSwitch();\n            $state.reload();\n          });\n        }, function () {\n          $scope.uiIsInputError = true;\n        }).finally(function () {\n        $scope.uiIsLoggingIn = false;\n      });\n    };\n  })\n;\n\n/**\n * Created by Centimitr on 2015/7/27.\n */\n'use strict';\n\nangular.module('DEVBYCM.cmLoadingModule', [])\n  .directive('cmLoading', function (cmLoadingSvc,$rootScope) {\n    return {\n      restrict: 'E',\n      templateUrl: 'app/components/ui/cmLoading/template.html',\n      scope:{},\n      link: function(scope) {\n        scope.isShow=false;\n        scope.content=\"\";\n        scope.status=\"\";\n        $rootScope.$on('cmLoading', function (e, v) {\n          v && !angular.isUndefined(v['show']) && (scope.isShow = v['show']);\n          v && !angular.isUndefined(v['content']) && (scope.content = v['content']);\n          v && !angular.isUndefined(v['status']) && (scope.status = v['status']);\n        });\n      }\n    };\n  })\n  .factory('cmLoadingSvc', function ($rootScope,$timeout) {\n    var showingloadingList = [];\n    var tempContent={};\n    return {\n      'show':function(){\n        showingloadingList.push(tempContent);\n        $rootScope.$broadcast('cmLoading', {'show': true});\n      },\n      'hide':function(delay){\n        showingloadingList.pop();\n        if(showingloadingList.length>0){\n          $rootScope.$broadcast('cmLoading',showingloadingList[length-1]);\n        }else{\n          angular.isUndefined(delay) && (delay=1000);\n          return $timeout(function(){\n            $rootScope.$broadcast('cmLoading', {'show': false});\n          },delay);\n        }\n      },\n      'setContent':function(content,status){\n        tempContent = {\n          'content':content,\n          'status':status\n        };\n        $rootScope.$broadcast('cmLoading',tempContent);\n      }\n    };\n  })\n;\n\n'use strict';\nangular.module('RMI.ProcessCtrls', [])\n  .controller('ProcessListCtrl', function ($scope, $state, $filter, $timeout, FormSvc, ProcessSvc, cmNavBarService, cmLoadingSvc) {\n    $scope.stateParams = $state.params;\n    $scope.uiIsSideMenuListLoaded = false;\n    (function funcLoadSideMenuList() {\n      ProcessSvc.fetchProcessTypesByClass($scope.stateParams['Class']).then(function (processTypes) {\n        $scope.sideMenuList = processTypes;\n        cmLoadingSvc.setContent('加载完成');\n      }, function (error) {\n        console.log(error);\n      }).finally(function () {\n        $scope.uiIsSideMenuListLoaded = true;\n        cmLoadingSvc.hide(750);\n      });\n    })();\n    $scope.funcCreateForm = function () {\n      cmLoadingSvc.setContent('收货报告创建中');\n      cmLoadingSvc.show();\n      FormSvc.requestCreate('ARRIVAL', 'ARRIVAL', 0, 'AR01').then(function (form) {\n        $state.go('home.process.detailForm', {\n          'ArrivalSerialNumber': form.ArrivalSerialNumber,\n          'FormId': form.Id,\n          'Mode': 'edit'\n        });\n      }, function (error) {\n        cmLoadingSvc.setContent('创建过程发生错误，请检查网络连接');\n        console.log(error);\n      }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    };\n    $scope.funcGoDetail = function (ArrivalSerialNumber, FormId, Mode) {\n      $state.go('home.process.detailForm', {\n        'ArrivalSerialNumber': ArrivalSerialNumber,\n        'FormId': FormId,\n        'Mode': Mode\n      });\n    };\n    $scope.funcGoDetailInfo = function (ArrivalSerialNumber) {\n      $state.go('home.process.detailInfo', {'ArrivalSerialNumber': ArrivalSerialNumber});\n    };\n    $scope.funcGoFormEdit = function (Process, ProcessNode, ProcessNodeForm) {\n      //表单不存在时候进行创建\n      if (angular.equals(ProcessNodeForm, {})) {\n        //从流程信息界面获取的表单编辑函数\n        $scope.funcEditForm = function (ArrivalSerialNumber, FormId) {\n          cmLoadingSvc.setContent('数据加载中');\n          cmLoadingSvc.show();\n          $state.go('home.process.detailForm', {'ArrivalSerialNumber': ArrivalSerialNumber, 'FormId': FormId});\n          cmLoadingSvc.hide(100);\n        };\n        $scope.funcShortcutCreateFormAndRequestEditFormAndEditForm = function (ArrivalSerialNumber, ProcessTypeId, Rev, ProcessNodeTypeId) {\n          cmLoadingSvc.setContent('正在尝试创建表单');\n          cmLoadingSvc.show();\n          FormSvc.requestCreate(ArrivalSerialNumber, ProcessTypeId, Rev, ProcessNodeTypeId).then(function (Form) {\n            $state.reload();\n            $scope.funcEditForm(ArrivalSerialNumber, Form.Id);\n          }, function (error) {\n            cmLoadingSvc.setContent('创建失败:' + error);\n          }).finally(function () {\n            cmLoadingSvc.hide(750);\n          });\n        };\n        $scope.funcShortcutCreateFormAndRequestEditFormAndEditForm(Process.ArrivalSerialNumber, Process.TypeId, Process.Rev, ProcessNode.Id);\n      } else {\n        $scope.funcGoDetail(Process.ArrivalSerialNumber, ProcessNodeForm.Id, 'edit');\n      }\n    };\n  })\n\n  .controller('ProcessListCountCtrl', function ($scope, $state, $filter, $timeout, $window, ngTableParams, FormSvc, cmNavBarService, cmLoadingSvc) {\n    var tableData = [];\n    $scope.uiIsFilterByCurrentUser = false;\n    $scope.tableDataOption = {\n      'Status': 4\n    };\n    $scope.tableParams = new ngTableParams({\n      page: 1,\n      count: 500,\n      sorting: {}\n    }, {\n      total: tableData.length,\n      counts: [],\n      filterDelay: 250,\n      getData: function ($defer, params) {\n        tableData = $filter('orderBy')(tableData, [\"-CreateTime\"]);\n        var orderedData = tableData;\n        orderedData = params.sorting ?\n          $filter('orderBy')(orderedData, params.orderBy()) : tableData;\n        orderedData = params.filter ?\n          $filter('filter')(orderedData, params.filter()) : orderedData;\n        $defer.resolve(orderedData.slice((params.page() - 1) * params.count(), params.page() * params.count()));\n      }\n    });\n    FormSvc.fetchForms($state.params.ProcessTypeId, $state.params.Rev, $state.params.ProcessNodeTypeId).then(function (forms) {\n      tableData = forms;\n      $scope.tableParams.reload();\n    }, function (error) {\n      //alert('Error : '+error)\n    });\n    $scope.funcSubmitForm = function (FormId) {\n      var r = $window.confirm('是否确认提交？');\n      if (r === true) {\n        cmLoadingSvc.setContent('正在提交表单');\n        cmLoadingSvc.show();\n        FormSvc.requestSubmitAndAddToArrivalAndAddToProcess(FormId).then(function () {\n          cmLoadingSvc.setContent('提交成功');\n          $state.reload();\n        }, function (error) {\n          console.log(error);\n        }).finally(function () {\n          cmLoadingSvc.hide(750);\n        });\n      }\n    };\n  })\n\n  .controller('ProcessListInspectionCtrl', function ($scope, $filter, $state, $q, $timeout, ngTableParams, ProcessSvc, FormSvc, AccountSvc, cmNavBarService, cmLoadingSvc) {\n    var tableData = [];\n    $scope.tableDataOption = {\n      'IsComplete': ($state.params.IsComplete === 'true' || $state.params.IsComplete === 'false' || $state.params.IsComplete === 'waiting') ? $state.params.IsComplete : 'false',\n      'StartTime': 1,\n      'EndTime': 2\n    };\n    $scope.funcChangeOption = function (option, value) {\n      var params = $state.params;\n      params[option] = value;\n      $state.go($state.current.name, params, {'reload': true});\n    };\n    $scope.tableParamsInProcessView = new ngTableParams({\n      page: 1,\n      count: 999,\n      sorting: {}\n    }, {\n      total: tableData.length,\n      counts: [],\n      filterDelay: 250,\n      getData: function ($defer, params) {\n        var orderedData = tableData;\n        orderedData = params.sorting ?\n          $filter('orderBy')(orderedData, params.orderBy()) : tableData;\n        orderedData = params.filter ?\n          $filter('filter')(orderedData, params.filter()) : orderedData;\n        $defer.resolve(orderedData.slice((params.page() - 1) * params.count(), params.page() * params.count()));\n      }\n    });\n    (function funcLoadListData() {\n      cmLoadingSvc.setContent('载入列表：' + $state.params.ProcessTypeId, 'inProgress');\n      cmLoadingSvc.show();\n      ProcessSvc.fetchProcessesByProcessTypeIdAndRev($state.params.ProcessTypeId, $state.params.Rev, $scope.tableDataOption)\n        .then(function (Processes) {\n          angular.forEach(Processes, function (Process) {\n            Process.Parameter = angular.fromJson(Process.Parameter);\n          });\n          tableData = Processes;\n          $scope.tableDataInProcessView = Processes;\n          cmLoadingSvc.setContent('加载完成', 'success');\n          $scope.tableParamsInProcessView.reload();\n        }, function (error) {\n          cmLoadingSvc.setContent('加载失败', 'error');\n        }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    })();\n    //取消首页默认转跳功能\n    $scope.funcResetDefaultProcessType = function () {\n      var defaultProcessType = AccountSvc.getUserSetting('UserSetting.UI.Process.List.DefaultProcessType')[$state.params.Class];\n      defaultProcessType.Enable = false;\n      var setting = AccountSvc.getUserSetting('UserSetting.UI.Process.List.DefaultProcessType');\n      setting[$state.params.Class] = defaultProcessType;\n      AccountSvc.setUserSetting('UserSetting.UI.Process.List.DefaultProcessType', setting);\n      $state.go('home.process.processList', {\n        'Class': $state.params.Class,\n        'ProcessTypeId': undefined,\n        'Rev': undefined\n      });\n    };\n  })\n\n  .controller('ProcessDetailInfoCtrl', function ($scope, $state, $filter, $timeout, $q, ProcessSvc, FormSvc, ControlDesignSvc, cmNavBarService, cmLoadingSvc) {\n    $scope.state = $state;\n    $scope.uiIsReferenceShow = false;\n    $scope.uiShowProcessNodeDetail = [];\n    $scope.uiProcessNodeViewSwitch = 'edit';\n    cmLoadingSvc.setContent('数据加载中');\n    $scope.nodes = [];\n    $scope.references = [];\n    $scope.process = {};\n    (function () {\n      ProcessSvc.fetchProcess($state.params.ArrivalSerialNumber).then(function (Process) {\n        (function funcConvertParameterJsonToObject() {\n          Process.Parameter = angular.fromJson(Process.Parameter);\n        })();\n        $scope.process = Process;\n        angular.forEach($scope.process['Nodes'], function (node) {\n          node.Order = parseInt(node.Order)\n        });\n        /*\n         (function funcLoadReferences() {\n         ProcessSvc.fetchProcessReference(Process.ArrivalSerialNumber).then(function (References) {\n         $scope.references = References;\n         }, function (error) {\n         console.error(error)\n         });\n         })();\n         */\n        cmLoadingSvc.hide();\n      }, function (error) {\n        alert('Error : ' + error);\n      });\n    })();\n    $scope.funcGetCurrentStageTabCode = function (Available, FormStatus, CheckStatus) {\n      console.log(Available, FormStatus, CheckStatus);\n      if (!CheckStatus) {\n        CheckStatus = 0;\n      }\n      if (!FormStatus) {\n        FormStatus = 0;\n      }\n      if (!Available) {\n        return 0;\n      } else {\n        if (FormStatus.toString() === '4') {\n          if (CheckStatus.toString() === '0') {\n            return 2;\n          } else {\n            return 3;\n          }\n        } else {\n          return 1;\n        }\n      }\n    };\n    $scope.funcShowProcessNodeDetail = function (index) {\n      $scope.uiShowProcessNodeDetail = [];\n      $scope.uiShowProcessNodeDetail[index] = true;\n    };\n\n    $scope.currentReference = {};\n    //测试：Reference相关\n    $scope.uiCurrentActiveReferenceIndex = null;\n    $scope.funcSwitchReference = function (index) {\n      if (index === $scope.uiCurrentActiveReferenceIndex) {\n        console.log('same');\n        $scope.uiIsReferenceShow = !$scope.uiIsReferenceShow;\n      } else {\n        $scope.currentReference = $scope.references[index];\n        $scope.uiIsReferenceShow = true;\n      }\n      $scope.uiCurrentActiveReferenceIndex = index;\n    };\n    $scope.funcHideReference = function () {\n      $scope.uiIsReferenceShow = false;\n    };\n\n    $scope.funcViewSourceForm = function (SourceFormId) {\n      $state.go('home.process.detailForm', {'ArrivalSerialNumber': 'ARRIVAL', 'FormId': SourceFormId, 'Mode': 'View'});\n    };\n    //表单查看与编辑\n    $scope.funcEditForm = function (ArrivalSerialNumber, FormId) {\n      $state.go('home.process.detailForm', {\n        'ArrivalSerialNumber': ArrivalSerialNumber,\n        'FormId': FormId,\n        'Mode': 'Edit'\n      });\n    };\n    $scope.funcViewForm = function (ArrivalSerialNumber, FormId) {\n      $state.go('home.process.detailForm', {\n        'ArrivalSerialNumber': ArrivalSerialNumber,\n        'FormId': FormId,\n        'Mode': 'View'\n      });\n    };\n    //表单状态操作函数\n    $scope.funcCreateForm = function (ArrivalSerialNumber, ProcessTypeId, Rev, ProcessNodeTypeId) {\n      cmLoadingSvc.setContent('正在尝试创建表单');\n      cmLoadingSvc.show();\n      FormSvc.requestCreate(ArrivalSerialNumber, ProcessTypeId, Rev, ProcessNodeTypeId).then(function () {\n        $state.reload();\n      }, function (error) {\n        cmLoadingSvc.setContent('创建失败:' + error)\n      }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    };\n    $scope.funcRequestEditForm = function (FormId) {\n      cmLoadingSvc.setContent('正在获取表单编辑权限');\n      cmLoadingSvc.show();\n      FormSvc.requestEdit(FormId).then(function () {\n        $state.reload();\n      }, function (error) {\n        cmLoadingSvc.setContent('获取失败:' + error);\n      }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    };\n    $scope.funcConfirmForm = function (FormId) {\n      cmLoadingSvc.setContent('正在提交你对表单的确认');\n      cmLoadingSvc.show();\n      FormSvc.requestConfirm(FormId).then(function () {\n        $state.reload();\n      }, function (error) {\n        cmLoadingSvc.setContent('创建失败:' + error);\n      }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    };\n    $scope.funcCancelEditForm = function (FormId) {\n      cmLoadingSvc.setContent('正在获取表单编辑权');\n      cmLoadingSvc.show();\n      FormSvc.requestCancelEdit(FormId).then(function () {\n        $state.reload();\n      }, function (error) {\n        cmLoadingSvc.setContent('获取失败:' + error);\n      }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    };\n    $scope.funcSubmitForm = function (FormId) {\n      cmLoadingSvc.setContent('正在提交表单');\n      cmLoadingSvc.show();\n      FormSvc.requestSubmit(FormId).then(function () {\n        $state.reload();\n      }, function (error) {\n        cmLoadingSvc.setContent('提交失败:' + error);\n      }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    };\n    $scope.funcShortcutCreateFormAndRequestEditFormAndEditForm = function (ArrivalSerialNumber, ProcessTypeId, Rev, ProcessNodeTypeId) {\n      cmLoadingSvc.setContent('正在尝试创建表单');\n      cmLoadingSvc.show();\n      FormSvc.requestCreate(ArrivalSerialNumber, ProcessTypeId, Rev, ProcessNodeTypeId).then(function (Form) {\n        $state.reload();\n        $scope.funcEditForm(ArrivalSerialNumber, Form.Id);\n      }, function (error) {\n        cmLoadingSvc.setContent('创建失败:' + error);\n      }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    };\n    $scope.funcShortcutRequestEditFormAndEditForm = function (ArrivalSerialNumber, FormId) {\n      cmLoadingSvc.setContent('正在获取表单编辑权');\n      cmLoadingSvc.show();\n      FormSvc.requestEdit(FormId).then(function () {\n        $state.reload();\n        $scope.funcEditForm(ArrivalSerialNumber, FormId);\n      }, function (error) {\n        cmLoadingSvc.setContent('获取失败:' + error);\n      }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    };\n    $scope.funcShortcutConfirmFormAndSubmitForm = function (FormId) {\n      var confirm = window.confirm(\"确定要提交吗？\");\n      if (confirm) {\n        $scope.funcSubmitForm(FormId);\n      }\n    };\n    $scope.$on('destroy', function () {\n      if (createFormTimer) {\n        $timeout.cancel(createFormTimer);\n      }\n      if (editFormTimer) {\n        $timeout.cancel(editFormTimer);\n      }\n      if (confirmFormTimer) {\n        $timeout.cancel(confirmFormTimer);\n      }\n      if (cancelEditFormTimer) {\n        $timeout.cancel(cancelEditFormTimer);\n      }\n      if (submitFormTimer) {\n        $timeout.cancel(submitFormTimer);\n      }\n    });\n    //流程状态相关操作函数\n    $scope.funcMarkProcessComplete = function (ArrivalSerialNumber) {\n      var confirm = window.confirm(\"请确认标记该检验任务完成吗？\");\n      if (confirm) {\n        cmLoadingSvc.setContent('正在标记完成', 'inProgress');\n        cmLoadingSvc.show();\n        var completePromise = ProcessSvc.updateProcessIsComplete(ArrivalSerialNumber, 'true');\n        var promise = $q.all([completePromise]);\n        promise.then(function () {\n          cmLoadingSvc.setContent('检验任务已经标记为完成', 'success');\n          $state.reload();\n        }, function () {\n          cmLoadingSvc.setContent('操作失败', 'error');\n        }).finally(function () {\n          cmLoadingSvc.hide();\n        });\n      }\n    };\n    $scope.funcMarkProcessWaiting = function (ArrivalSerialNumber) {\n      var confirm = window.confirm(\"请确认是否提交最后审核？\\n注意：确认后负责人将收到最后审核通知，并将检验任务标为完成\");\n      if (confirm) {\n        cmLoadingSvc.setContent('正在提交', 'inProgress');\n        cmLoadingSvc.show();\n        var completePromise = ProcessSvc.updateProcessIsComplete(ArrivalSerialNumber, 'waiting');\n        var promise = $q.all([completePromise]);\n        promise.then(function () {\n          cmLoadingSvc.setContent('提交成功', 'success');\n          $state.reload();\n        }, function () {\n          cmLoadingSvc.setContent('操作失败', 'error');\n        }).finally(function () {\n          cmLoadingSvc.hide();\n        });\n      }\n    };\n    $scope.funcRedoComplete = function (ArrivalSerialNumber) {\n      var confirm = window.confirm(\"请确认重置该检验任务完成状态吗？\\n注意：标记后是否完成重置为否\");\n      if (confirm) {\n        cmLoadingSvc.setContent('正在重置状态', 'inProgress');\n        cmLoadingSvc.show();\n        var completePromise = ProcessSvc.updateProcessIsComplete(ArrivalSerialNumber, 'false');\n        var promise = $q.all([completePromise]);\n        promise.then(function () {\n          cmLoadingSvc.setContent('检验任务已回到未完成状态', 'success');\n          $state.reload();\n        }, function () {\n          cmLoadingSvc.setContent('重置失败', 'error');\n        }).finally(function () {\n          cmLoadingSvc.hide();\n        });\n      }\n    };\n    //流程节点状态相关操作函数\n    $scope.funcUpdateProcessNodeAvailableFlag = function (ArrivalSerialNumber, ProcessNodeTypeId, AvailableFlag) {\n      cmLoadingSvc.setContent('修改可用性中...', 'inProgress');\n      cmLoadingSvc.show();\n      ProcessSvc.updateProcessNodeAvailableFlag(ArrivalSerialNumber, ProcessNodeTypeId, AvailableFlag).then(function () {\n        cmLoadingSvc.setContent('修改成功', 'success');\n      }, function (error) {\n        cmLoadingSvc.setContent('修改失败', 'error');\n        console.log(error);\n      }).finally(function () {\n        cmLoadingSvc.hide();\n        $timeout(function () {\n          $state.reload();\n        }, 1000);\n      });\n    };\n    $scope.funcCheckPass = function (ArrivalSerialNumber, ProcessNodeTypeId) {\n      cmLoadingSvc.setContent('提交审核结果中...', 'inProgress');\n      cmLoadingSvc.show();\n      ProcessSvc.updateProcessNodeCheckStatus(ArrivalSerialNumber, ProcessNodeTypeId, 1).then(function () {\n        cmLoadingSvc.setContent('修改成功', 'success');\n      }, function (error) {\n        cmLoadingSvc.setContent('修改失败', 'error');\n        console.log(error);\n      }).finally(function () {\n        cmLoadingSvc.hide();\n        $timeout(function () {\n          $state.reload();\n        }, 1000);\n      });\n    };\n    $scope.funcCheckDeny = function (ArrivalSerialNumber, ProcessNodeTypeId) {\n      cmLoadingSvc.setContent('提交审核结果中...', 'inProgress');\n      cmLoadingSvc.show();\n      ProcessSvc.updateProcessNodeCheckStatus(ArrivalSerialNumber, ProcessNodeTypeId, 2).then(function () {\n        cmLoadingSvc.setContent('修改成功', 'success');\n      }, function (error) {\n        cmLoadingSvc.setContent('修改失败', 'error');\n        console.log(error);\n      }).finally(function () {\n        cmLoadingSvc.hide();\n        $timeout(function () {\n          $state.reload();\n        }, 1000);\n      });\n\n    };\n    $scope.funcRedoFormAndCheck = function (ArrivalSerialNumber, ProcessNodeTypeId, FormId) {\n      var confirm = window.confirm(\"确定要重做该项目吗？\\n注意：重做会取消审核结论，并将表单置为可编辑\");\n      if (confirm) {\n        cmLoadingSvc.setContent('正在重设检验项状态', 'inProgress');\n        cmLoadingSvc.show();\n        var redoCheckStatusPromise = ProcessSvc.updateProcessNodeCheckStatus(ArrivalSerialNumber, ProcessNodeTypeId, 0);\n        var redoFormEditStatusPromise = FormSvc.requestEdit(FormId);\n        var promise = $q.all([redoCheckStatusPromise, redoFormEditStatusPromise]);\n        promise.then(function () {\n          cmLoadingSvc.setContent('重设成功', 'success');\n          $state.reload();\n        }, function () {\n          cmLoadingSvc.setContent('重设失败', 'error');\n        }).finally(function () {\n          cmLoadingSvc.hide();\n        });\n      }\n    };\n    $scope.funcRedoForm = function (FormId) {\n      var confirm = window.confirm(\"确定要重做表单吗？\\n注意：将表单置为可编辑状态\");\n      if (confirm) {\n        cmLoadingSvc.setContent('正在重置表单编辑状态', 'inProgress');\n        cmLoadingSvc.show();\n        var redoFormEditStatusPromise = FormSvc.requestEdit(FormId);\n        var promise = $q.all([redoFormEditStatusPromise]);\n        promise.then(function () {\n          cmLoadingSvc.setContent('重设成功', 'success');\n          $state.reload();\n        }, function () {\n          cmLoadingSvc.setContent('重设失败', 'error');\n        }).finally(function () {\n          cmLoadingSvc.hide();\n        });\n      }\n    };\n    $scope.funcRedoCheck = function (ArrivalSerialNumber, ProcessNodeTypeId) {\n      var confirm = window.confirm(\"确定要重做审核吗？\\n注意：重做会取消审核结论\");\n      if (confirm) {\n        cmLoadingSvc.setContent('正在重设审核状态', 'inProgress');\n        cmLoadingSvc.show();\n        var redoCheckStatusPromise = ProcessSvc.updateProcessNodeCheckStatus(ArrivalSerialNumber, ProcessNodeTypeId, 0);\n        var promise = $q.all([redoCheckStatusPromise]);\n        promise.then(function () {\n          cmLoadingSvc.setContent('重设成功', 'success');\n          $state.reload();\n        }, function () {\n          cmLoadingSvc.setContent('重设失败', 'error');\n        }).finally(function () {\n          cmLoadingSvc.hide();\n        });\n      }\n    };\n    $scope.funcUpdateProcessNodeConclusion = function (ArrivalSerialNumber, ProcessNodeTypeId, Conclusion) {\n      Conclusion = angular.toJson(Conclusion);\n      cmLoadingSvc.setContent('正在提交检验结论修改', 'inProgress');\n      cmLoadingSvc.show();\n      ProcessSvc.updateProcessNodeConclusion(ArrivalSerialNumber, ProcessNodeTypeId, Conclusion).then(function () {\n        cmLoadingSvc.setContent('修改成功', 'success');\n      }, function (error) {\n        cmLoadingSvc.setContent('修改失败', 'error');\n        console.log(error);\n      }).finally(function () {\n        cmLoadingSvc.hide();\n        $timeout(function () {\n          $state.reload();\n        }, 1000);\n      });\n\n    };\n  })\n\n  .controller('ProcessDetailFormCtrl', function ($scope, $rootScope, $timeout, $state, $q, $window, $interval, ProcessSvc, FormSvc, cmNavBarService, cmLoadingSvc) {\n    $scope.state = $state;\n    $scope.stateParams = $state.params;\n    $scope.uiIsEditTags = false;\n    $scope.uiIsDataLoaded = false;\n    $scope.uiIsAutoSaveFormData = false;\n    $scope.uiIsReferencePanelShow = true;\n    $scope.uiIsReferenceShow = false;\n    $scope.uiIsFormStatusEditable = true;\n    $scope.option = {\n      all: {\n        isEditable: true\n      },\n      table: {\n        isSortable: false\n      }\n    };\n\n    /*    $scope.formInfo = Form.Info || {};\n     $scope.formData = Form.Data || {} ;\n     $scope.formConfig = Form.Config || {};*/\n    $scope.formInfo = {};\n    $scope.formData = {};\n    $scope.formConfig = {};\n    {/*\n     (function funcLoadFormDataAndConfig() {\n     cmLoadingSvc.setContent('正在加载表单');\n     cmLoadingSvc.show();\n     var fetchFormPromise = FormSvc.fetchForm($state.params.FormId);\n     var fetchFormDataPromise = FormSvc.fetchFormData($state.params.FormId);\n     var fetchFormConfigPromise = FormSvc.fetchFormConfig($state.params.FormId);\n     var promise = $q.all([fetchFormPromise, fetchFormDataPromise, fetchFormConfigPromise]);\n     promise.then(function (formAndFormData) {\n     $scope.formInfo = formAndFormData[0];\n     $scope.formData = formAndFormData[1];\n     $scope.formConfig = formAndFormData[2];\n     (function funcLoadReferences(ArrivalSerialNumber) {\n     if (ArrivalSerialNumber === 'ARRIVAL') {\n     //因为收货报告没有明确的流程任务所以，ASN都为ARRIVAL，使用原来的接口是无法获取到Reference的。\n     return 0;\n     }\n     ProcessSvc.fetchProcessReference(ArrivalSerialNumber).then(function (References) {\n     $scope.references = References;\n     (function funcGenerateReferenceProvider(references) {\n     var referenceProvider = {};\n     angular.forEach(references, function (reference) {\n     this[reference.Id] = {};\n     angular.forEach(reference.Components, function (component) {\n     this[component.Id] = {};\n     this[component.Id]['Type'] = component.Type;\n     this[component.Id]['Data'] = component.Data;\n     this[component.Id]['Relation'] = component.Relation;\n     }, this[reference.Id]);\n     }, referenceProvider);\n     $scope.referencesProvider = referenceProvider;\n     })(References);\n     }, function (error) {\n     console.error(error)\n     });\n     })($scope.formInfo.ArrivalSerialNumber);\n     $scope.uiIsFormStatusEditable = (function funcEnsureFormStatusEditable(form) {\n     return parseInt(form.Status) === 2;\n     }($scope.formInfo));\n     $scope.option.all.isEditable = (function funcEnsureFormMode(params, form) {\n     if (parseInt(form.Status) != 2) {\n     return false;\n     } else {\n     var ensureUserHasPermission = function () {\n     return true\n     };\n     if (params['Mode'] === 'edit' && ensureUserHasPermission()) {\n     return true\n     } else if (params['Mode'] === 'view') {\n     return false;\n     }\n     }\n     return false;\n     })($state.params, $scope.formInfo);\n     //转换Tags字段的格式\n     if (!angular.isArray($scope.formInfo.Tags)) {\n     $scope.formInfo.Tags = angular.fromJson($scope.formInfo.Tags);\n     }\n     //加载标签设置数据\n     $scope.optionalTags = formAndFormData[2]['OptionalTags'];\n     (function funcLoadTagsStatus() {\n     angular.forEach($scope.optionalTags, function (optionalTag, index) {\n     angular.forEach($scope.formInfo.Tags, function (tag) {\n     if (!$scope.tagSelectStatus[index]) {\n     $scope.tagSelectStatus[index] = (optionalTag === tag);\n     }\n     });\n     });\n     })();\n     }, function () {\n     cmLoadingSvc.setContent('加载失败');\n     }).finally(function () {\n     cmLoadingSvc.hide();\n     });\n     })();\n     */\n    }\n    (function funcLoadData() {\n      cmLoadingSvc.setContent('正在加载表单');\n      cmLoadingSvc.show();\n      var formInfoPromise = FormSvc.fetchForm($state.params.FormId);\n      var formDataPromise = FormSvc.fetchFormData($state.params.FormId);\n      var formConfigPromise = FormSvc.fetchFormConfig($state.params.FormId);\n      var promise = $q.all([formInfoPromise, formDataPromise, formConfigPromise]);\n      promise.then(function (Data) {\n        $scope.formInfo = Data[0];\n        $scope.formData = Data[1];\n        $scope.formConfig = Data[2];\n/*        $scope.formConfig = {\n          template: '<div style=\"margin: 0;padding: 0;\">\\n <table class=\"table table-bordered\">\\n    <thead>\\n    </thead>\\n    <tbody>\\n    <tr>\\n      <td rowspan=\"6\">\\n        试样描述\\n      </td>\\n      <td>申请部门</td>\\n      <td>\\n        <cm-select options=\"[dep1,dep2,dep3]\" model=\"formData.shenqingbumen\"></cm-select>\\n      </td>\\n      <td>申请日期</td>\\n      <td>\\n        <cm-input type=\"date\" model=\"formData.shenqingriqi\"></cm-input>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td>样品</td>\\n      <td>1</td>\\n      <td>2</td>\\n      <td>3</td>\\n    </tr>\\n    <tr>\\n      <td>款号</td>\\n      <td>\\n        <cm-input type=\"text\" model=\"formData.kuanhao1\"></cm-input>\\n      </td>\\n      <td>\\n        <cm-input type=\"text\" model=\"formData.kuanhao2\"></cm-input>\\n      </td>\\n      <td>\\n        <cm-input type=\"text\" model=\"formData.kuanhao3\"></cm-input>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td>颜色/数量\\n      </td>\\n      <td>\\n        <div class=\"ia-div-flex\">\\n          <cm-input class=\"ia-table-inline\" model=\"formData.yanse1\"></cm-input>\\n          <span style=\"margin-left: 5px;margin-right: 5px;font-size:14px\">/</span>\\n          <cm-input model=\"formData.shuliang1\" type=\"number\" class=\"ia-table-inline\"></cm-input>\\n        </div>\\n\\n      </td>\\n      <td class=\"\">\\n        <div class=\"ia-div-flex\">\\n          <cm-input class=\"ia-table-inline\" style=\"\" model=\"formData.yanse2\"></cm-input>\\n          <span style=\"margin-left: 5px;margin-right: 5px;font-size:14px\">/</span>\\n          <cm-input model=\"formData.shuliang2\" type=\"number\" class=\"ia-table-inline\"></cm-input>\\n        </div>\\n      </td>\\n      <td class=\"\">\\n        <div class=\"ia-div-flex\">\\n          <cm-input class=\"ia-table-inline\" style=\"\" model=\"formData.yanse3\"></cm-input>\\n          <span style=\"margin-left: 5px;margin-right: 5px;font-size:14px\">/</span>\\n          <cm-input model=\"formData.shuliang3\" type=\"number\" class=\"ia-table-inline\"></cm-input>\\n        </div>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td colspan=\"4\">\\n        <span>洗涤目的：</span>\\n        <cm-textarea model=\"formData.xidimudi\"></cm-textarea>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td colspan=\"4\">洗前描述：\\n        <cm-textarea model=\"formData.xiqianmiaoshu\"></cm-textarea>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td colspan=\"5\">\\n        <center><strong>洗涤方法选择</strong></center>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td>程　序</td>\\n      <td>温　度（℃）</td>\\n      <td>转　数\\n        （转/分钟）\\n      </td>\\n      <td>烘　干</td>\\n      <td>洗涤次数</td>\\n    </tr>\\n    <tr>\\n      <td>\\n        <cm-checkbox model=\"formData.mianmazhiwu\" options=\"[\\'棉麻织物\\']\"></cm-checkbox>\\n      </td>\\n      <td>\\n        <cm-checkbox model=\"formData.mianmazhiwu_wendu\" options=\"[\\'冷水\\',\\'40\\',\\'60\\',\\'95\\']\"></cm-checkbox>\\n      </td>\\n      <td>\\n        <cm-checkbox model=\"formData.mianmazhiwu_zhuanshu\" options=\"[\\'400\\',\\'600\\',\\'800\\',\\'1000\\',\\'1200\\']\"></cm-checkbox>\\n      </td>\\n      <td>\\n        <cm-checkbox model=\"formData.mianmazhiwu_honggan\" options=\"[\\'标准\\',\\'强力\\',\\'低温\\',\\'轻微\\']\"></cm-checkbox>\\n      </td>\\n      <td>\\n        <div class=\"ia-div-flex\">\\n          <cm-input class=\"ia-table-inline\" style=\"width: 30px\" model=\"formData.mianmazhiwu_cishu\"></cm-input>\\n          次\\n        </div>\\n      </td>\\n    </tr>\\n    <tr>\\n    <tr>\\n      <td>\\n        <cm-checkbox model=\"formData.jingxizhiwu\" options=\"[\\'精细织物\\']\"></cm-checkbox>\\n      </td>\\n      <td>\\n        <cm-checkbox model=\"formData.jingxizhiwu_wendu\" options=\"[\\'冷水\\',\\'30\\',\\'40\\']\"></cm-checkbox>\\n      </td>\\n      <td>\\n        <cm-checkbox model=\"formData.jingxizhiwu_zhuanshu\" options=\"[\\'400\\',\\'600\\',\\'800\\']\"></cm-checkbox>\\n      </td>\\n      <td>\\n        <cm-checkbox model=\"formData.jingxizhiwu_honggan\" options=\"[\\'标准\\',\\'强力\\',\\'低温\\',\\'轻微\\']\"></cm-checkbox>\\n      </td>\\n      <td>\\n        <div class=\"ia-div-flex\">\\n          <cm-input class=\"ia-table-inline\" style=\"width: 30px\" model=\"formData.jingxizhiwu_cishu\"></cm-input>\\n          次\\n        </div>\\n      </td>\\n    </tr>\\n\\n    <tr>\\n      <td>\\n        <cm-checkbox model=\"formData.renzaoxianwei\" options=\"[\\'人造纤维\\']\"></cm-checkbox>\\n      </td>\\n      <td>\\n        <cm-checkbox model=\"formData.renzaoxianwei_wendu\" options=\"[\\'冷水\\',\\'30\\',\\'40\\']\"></cm-checkbox>\\n      </td>\\n      <td>\\n        <cm-checkbox model=\"formData.renzaoxianwei_zhuanshu\" options=\"[\\'400\\',\\'600\\',\\'800\\',\\'1000\\']\"></cm-checkbox>\\n      </td>\\n      <td>\\n        <cm-checkbox model=\"formData.renzaoxianwei_honggan\" options=\"[\\'标准\\',\\'强力\\',\\'低温\\',\\'轻微\\']\"></cm-checkbox>\\n      </td>\\n      <td>\\n        <div class=\"ia-div-flex\">\\n          <cm-input class=\"ia-table-inline\" style=\"width: 30px\" model=\"formData.renzaoxianwei_cishu\"></cm-input>\\n          次\\n        </div>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td>\\n        <cm-checkbox model=\"formData.kuaisuxi\" options=\"[\\'快速洗\\']\"></cm-checkbox>\\n      </td>\\n      <td>\\n        <cm-checkbox model=\"formData.kuaisuxi_wendu\" options=\"[\\'冷水\\',\\'30\\',\\'40\\']\"></cm-checkbox>\\n      </td>\\n      <td>\\n        <cm-checkbox model=\"formData.kuaisuxi_zhuanshu\" options=\"[\\'400\\',\\'600\\',\\'800\\',\\'1000\\']\"></cm-checkbox>\\n      </td>\\n      <td>\\n        <cm-checkbox model=\"formData.kuaisuxi_honggan\" options=\"[\\'标准\\',\\'强力\\', \\'低温\\',\\'轻微\\']\"></cm-checkbox>\\n      </td>\\n      <td>\\n        <div class=\"ia-div-flex\">\\n          <cm-input class=\"ia-table-inline\" style=\"width: 30px\" model=\"formData.kuaisuxi_cishu\"></cm-input>\\n          次\\n        </div>\\n      </td>\\n    </tr>\\n\\n    <tr>\\n      <td rowspan=\"2\">\\n        其他洗涤要求\\n      </td>\\n      <td colspan=\"4\">\\n        <cm-radio options=\"[\\'加洗涤剂\\',\\'不加洗涤剂\\']\" model=\"formData.qitaxidiyaoqiu_xuanxiang\"></cm-radio>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td colspan=\"4\">\\n        <cm-textarea model=\"formData.qitaxidiyaoqiu\"></cm-textarea>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td colspan=\"5\">\\n        <center><strong>水洗后情况描述</strong></center>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td>\\n        1\\n      </td>\\n      <td colspan=\"4\">\\n        <cm-textarea model=\"formData.shuixihouqingkuangmiaoshu1\"></cm-textarea>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td>2</td>\\n      <td colspan=\"4\">\\n        <cm-textarea model=\"formData.shuixihouqingkuangmiaoshu2\"></cm-textarea>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td>3</td>\\n      <td colspan=\"4\">\\n        <cm-textarea model=\"formData.shuixihouqingkuangmiaoshu3\"></cm-textarea>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td colspan=\"5\">判定结果：　\\n        <cm-radio options=\"[\\'合格\\',\\'不合格\\',\\'开发测试，不作判定\\']\"></cm-radio>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td colspan=\"5\"><span style=\"color: dodgerblue;\">备注：检测仅对来样负责</span></td>\\n    </tr>\\n    <tr>\\n      <td colspan=\"2\">测试员/日期：\\n      </td>\\n      <td colspan=\"2\">审核/日期：\\n      </td>\\n      <td colspan=\"2\">批准/日期：\\n      </td>\\n    </tr>\\n    </tbody>\\n  </table>\\n\\n</div>\\n\\n',\n          options: {}\n        };*/\n        console.log(JSON.stringify($scope.formConfig));\n      }, function () {\n        cmLoadingSvc.setContent('加载失败');\n      }).finally(function () {\n        cmLoadingSvc.hide();\n      });\n    })();\n    $scope.references = [];\n    $scope.referencesProvider = {};\n    $scope.currentReference = {};\n    //测试：Reference相关\n    $scope.funcSwitchReferencePanel = function () {\n      $scope.uiIsReferencePanelShow = !$scope.uiIsReferencePanelShow;\n    };\n    $scope.uiCurrentActiveReferenceIndex = null;\n    $scope.funcSwitchReference = function (index) {\n      if (index === $scope.uiCurrentActiveReferenceIndex) {\n        console.log('same');\n        $scope.uiIsReferenceShow = !$scope.uiIsReferenceShow;\n        $scope.uiCurrentActiveReferenceIndex = null;\n      } else {\n        $scope.currentReference = $scope.references[index];\n        $scope.uiIsReferenceShow = true;\n        $scope.uiCurrentActiveReferenceIndex = index;\n      }\n    };\n    $scope.funcHideReference = function () {\n      $scope.uiIsReferenceShow = false;\n    };\n    //侧边栏功能\n    $scope.funcSideSaveForm = function () {\n      if (parseInt($scope.formInfo.Status) === 2) {\n        $scope.option.all.isEditable = false;\n        $scope.funcSaveToServer();\n      }\n    };\n    $scope.funcSideEditForm = function () {\n      $scope.option.all.isEditable = true;\n    };\n    $scope.funcSideViewForm = function () {\n      $scope.option.all.isEditable = false;\n      $scope.uiIsEditTags = false;\n    };\n    {/*    //标签功能相关\n     $scope.optionalTags = [];\n     $scope.tagSelectStatus = [];\n     $scope.funcStartEditTags = function () {\n     $scope.uiIsEditTags = true;\n     };\n     $scope.funcEndEditTags = function () {\n     $scope.uiIsEditTags = false;\n     };\n     $scope.funcUpdateTags = function () {\n     cmLoadingSvc.setContent('正在修改当前表单标签', 'inProgress');\n     cmLoadingSvc.show();\n     var selectedTags = [];\n     angular.forEach($scope.optionalTags, function (tag, index) {\n     if ($scope.tagSelectStatus[index]) {\n     selectedTags.push(tag);\n     }\n     });\n     FormSvc.updateFormTags($scope.formInfo.Id, selectedTags).then(function (Tags) {\n     cmLoadingSvc.setContent('修改成功', 'success');\n     console.log(typeof Tags);\n     $scope.formInfo.Tags = Tags;\n     $scope.uiIsEditTags = false;\n     }, function (error) {\n     cmLoadingSvc.setContent('修改失败', 'error');\n     console.error(error);\n     }).finally(function () {\n     cmLoadingSvc.hide(750);\n     });\n     };*/\n    }\n    //表单数据相关\n    $scope.funcRedoForm = function (FormId) {\n      var confirm = window.confirm(\"确定要重做表单吗？\\n注意：将表单置为可编辑状态\");\n      if (confirm) {\n        cmLoadingSvc.setContent('正在重置表单编辑状态', 'inProgress');\n        cmLoadingSvc.show();\n        var redoFormEditStatusPromise = FormSvc.requestEdit(FormId);\n        var promise = $q.all([redoFormEditStatusPromise]);\n        promise.then(function () {\n          cmLoadingSvc.setContent('重设成功', 'success');\n          $state.reload();\n        }, function () {\n          cmLoadingSvc.setContent('重设失败', 'error');\n        }).finally(function () {\n          cmLoadingSvc.hide();\n        });\n      }\n    };\n    $scope.funcSaveToServer = function () {\n      console.log($scope.formData);\n      //从List控制里复制过来\n      cmLoadingSvc.setContent('正在保存到服务器', 'inProgress');\n      cmLoadingSvc.show();\n      FormSvc.saveFormDataToServer($state.params.FormId, $scope.formData, false).then(function () {\n        cmLoadingSvc.setContent('表单数据保存成功！', 'success')\n      }, function (error) {\n        cmLoadingSvc.setContent('保存失败', 'error')\n      }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    };\n    $scope.funcSubmitForm = function () {\n      var funcGoBackToList = function () {\n        var form = $scope.formInfo;\n        if (form.TypeClass === '收货') {\n          $state.go('home.process.formList', {\n            'Class': form.TypeClass,\n            'ProcessTypeId': form.ProcessTypeId,\n            'Rev': form.Rev,\n            'ProcessNodeTypeId': form.ProcessNodeTypeId\n          });\n        } else {\n          $state.go('home.process.processList', {\n            'Class': form.TypeClass,\n            'ProcessTypeId': form.ProcessTypeId,\n            'Rev': form.Rev\n          });\n        }\n      };\n      //和List中功能相同\n      var r = $window.confirm('是否确认提交？');\n      console.log(1);\n      if (r === true) {\n        if (1) {\n          cmLoadingSvc.setContent('校验失败，请检查是否有漏填，错填');\n          cmLoadingSvc.show();\n          cmLoadingSvc.hide(1500);\n        }\n        cmLoadingSvc.setContent('正在提交表单');\n        cmLoadingSvc.show();\n        FormSvc.saveFormDataToServer($state.params.FormId, $scope.formData, false)\n          .then(function () {\n            //进行提交操作，收货报告进行检验任务生成\n            if ($state.params.ArrivalSerialNumber === 'ARRIVAL') {\n              FormSvc.requestSubmitAndAddToArrivalAndAddToProcess($state.params.FormId)\n                .then(function () {\n                  cmLoadingSvc.setContent('提交成功，即将转跳回列表', 'success');\n                  $timeout(function () {\n                    funcGoBackToList();\n                    cmLoadingSvc.hide(1000);\n                  }, 2000);\n                }, function (error) {\n                  cmLoadingSvc.setContent('提交失败', 'error');\n                  console.log(error);\n                  cmLoadingSvc.hide();\n                });\n            } else {\n              FormSvc.requestSubmit($state.params.FormId).then(function () {\n                cmLoadingSvc.setContent('提交成功，即将转跳回列表', 'success');\n                funcGoBackToList();\n              }, function (error) {\n                cmLoadingSvc.setContent('提交失败', 'error');\n                console.log(error);\n                cmLoadingSvc.hide();\n              });\n            }\n          }, function (error) {\n            console.error(error);\n            cmLoadingSvc.setContent('欲提交表单保存失败');\n          });\n      }\n    };\n    var autoSaveTimer = (function funcAutoSaveFormData(interval) {\n      return $interval(function () {\n        $scope.uiIsAutoSaveFormData = true;\n        FormSvc.saveFormDataToServer($state.params.FormId, $scope.formData, true).then(function () {\n        }, function (error) {\n        }).finally(function () {\n          $scope.uiIsAutoSaveFormData = false;\n        });\n      }, interval);\n    })(2 * 60 * 1000);\n    $scope.$on('$destroy', function () {\n      if (autoSaveTimer) {\n        $interval.cancel(autoSaveTimer);\n      }\n    })\n  })\n\n  .controller('ProcessListBlankCtrl', function ($scope, $state, AccountSvc) {\n    $scope.uiIsProcessTypesShow = false;\n    var funcGoList = function (defaultProcessType) {\n      if ($state.params.Class === '收货') {\n        $state.go('home.process.formList', {\n          'Class': $state.params.Class,\n          'ProcessTypeId': defaultProcessType.ProcessTypeId,\n          'Rev': defaultProcessType.Rev,\n          'ProcessNodeTypeId': 'AR01'\n        })\n      } else {\n        $state.go('home.process.processList', {\n          'Class': $state.params.Class,\n          'ProcessTypeId': defaultProcessType.ProcessTypeId,\n          'Rev': defaultProcessType.Rev\n        })\n      }\n    };\n    var defaultProcessType = AccountSvc.getUserSetting('UserSetting.UI.Process.List.DefaultProcessType')[$state.params.Class];\n    funcGoList(defaultProcessType);\n    $scope.funcSetDefaultProcessType = function (ProcessTypeId, Rev) {\n      defaultProcessType.Enable = true;\n      defaultProcessType.ProcessTypeId = ProcessTypeId;\n      defaultProcessType.Rev = Rev;\n      var setting = AccountSvc.getUserSetting('UserSetting.UI.Process.List.DefaultProcessType');\n      setting[$state.params.Class] = defaultProcessType;\n      AccountSvc.setUserSetting('UserSetting.UI.Process.List.DefaultProcessType', setting);\n      funcGoList(defaultProcessType);\n    };\n  })\n;\n\n/**\n * Created by Centimitr on 2015/12/9.\n */\n\n'use strict';\nangular.module('RMI.PlayCtrls', [])\n  .controller('PlaygroundCtrl', function () {\n    var vm = this;\n    vm.options = {};\n    vm.fields = [\n      {\n        //表单整体分组\n        \"wrapper\": \"flex-rows\",\n        \"fieldGroup\": [\n          {\n            //送样品部门\n            \"wrapper\": [\"flex-rows\", \"label-left\", \"border-top-right-left\"],\n            \"templateOptions\": {\n              \"label\": \"送样品部门\"\n            },\n            \"fieldGroup\": [\n              {\n                //上面部分的左右四栏目\n                \"className\": \"row cmFormCollection border-top border-bottom border-left border-bottom\",\n                \"fieldGroup\": [\n                  {\n                    \"className\": \"col-md-3\",\n                    \"fieldGroup\": [\n                      {\n                        \"template\": \"材料名称\"\n                      }, {\n                        \"template\": \"供应商\"\n                      }, {\n                        \"template\": \"到料日期\"\n                      }, {\n                        \"template\": \"品牌/系列名\"\n                      }\n                    ]\n                  }, {\n                    \"className\": \"col-md-3\",\n                    \"fieldGroup\": [\n                      {\n                        \"type\": \"input\"\n                      }, {\n                        \"type\": \"input\"\n                      }, {\n                        \"type\": \"input\"\n                      }, {\n                        \"type\": \"input\"\n                      }\n                    ]\n                  }, {\n                    \"className\": \"col-md-3\",\n                    \"fieldGroup\": [\n                      {\n                        \"template\": \"材料名称\"\n                      }, {\n                        \"template\": \"供应商\"\n                      }, {\n                        \"template\": \"到料日期\"\n                      }, {\n                        \"template\": \"品牌/系列名\"\n                      }\n                    ]\n                  }, {\n                    \"className\": \"col-md-3\",\n                    \"fieldGroup\": [\n                      {\n                        \"type\": \"input\"\n                      }, {\n                        \"type\": \"input\"\n                      }, {\n                        \"type\": \"input\"\n                      }, {\n                        \"type\": \"input\"\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"className\":\"row cmFormCollection border-top\",\n                \"fieldGroup\":[\n                  {\n                    \"wrapper\": \"label-colon\",\n                    \"templateOptions\": {\n                      \"label\": \"用途\"\n                    },\n                    \"fieldGroup\": [\n                      {\n                        \"className\":\"row\",\n                        \"template\":\"用于面布，用于面布，用于面布，用于面布，\"\n                      }\n                    ]\n                  },\n                  {\n                    \"wrapper\": \"label-colon\",\n                    \"templateOptions\": {\n                      \"label\": \"模压条件\"\n                    },\n                    \"fieldGroup\": [\n                      {\n                        \"className\":\"row\",\n                        \"template\":\"上模温度，下模温度，用于面布，用于面布，\"\n                      },\n                      {\n                        \"className\":\"row\",\n                        \"template\":\"上模温度，下模温度，用于面布，用于面布，\"\n                      },\n                      {\n                        \"template\":\"送检人/日期\"\n                      }\n                    ]\n                  }\n                ]\n              }\n\n            ]\n          }\n        ]\n      },\n      {\n        \"wrapper\": \"heading\",\n        \"template\": \"材料模压测试报告\"\n      }\n    ];\n  })\n  .controller('PlayBuildCtrl', function ($scope) {\n  })\n;\n\n'use strict';\nangular.module('RMI.HomeCtrls', [])\n  .controller('HomeCtrl', function ($scope, $rootScope, $state) {\n  })\n  .controller('IndexCtrl', function ($scope, $http, $interval, AccountSvc, LoginSvc, FormSvc, ProcessSvc, $state, cmLoadingSvc, VERSION, cmLoginSvc) {\n    $scope.version = 'VERSION: '+VERSION;\n    $scope.currentUser = AccountSvc.currentUser();\n    $scope.currentTime = new Date();\n    $scope.quickGoProcessASN = '';\n    var currentTimeUpdateTimer = $interval(function () {\n      $scope.currentTime = new Date();\n    }, 1000);\n    $scope.funcAddArrivalForm = function () {\n      cmLoadingSvc.setContent('收货报告创建中');\n      cmLoadingSvc.show();\n      FormSvc.requestCreate('ARRIVAL', 'ARRIVAL', 0, 'AR01').then(function (form) {\n        $state.go('home.process.detailForm', {\n          'ArrivalSerialNumber': form.ArrivalSerialNumber,\n          'FormId': form.Id,\n          'Mode': 'edit'\n        });\n      }, function (error) {\n        cmLoadingSvc.setContent('创建过程发生错误，请检查网络连接');\n        console.log(error);\n      }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    };\n    $scope.funcQuickGoProcess = function (arrivalSerialNumber) {\n      cmLoadingSvc.setContent('查询中...', 'inProgress');\n      cmLoadingSvc.show();\n      var funcCheckFormat = function (arrivalSerialNumber) {\n        var pattern = /[0-9a-fA-F]{6}/;\n        return pattern.test(arrivalSerialNumber);\n      };\n      if (funcCheckFormat(arrivalSerialNumber)) {\n        ProcessSvc.fetchProcess(arrivalSerialNumber).then(function () {\n          cmLoadingSvc.setContent('转跳中...');\n          $state.go('home.process.detailInfo', {'ArrivalSerialNumber': arrivalSerialNumber});\n        }, function () {\n          cmLoadingSvc.setContent('该流水号不存在！');\n        }).finally(function () {\n          cmLoadingSvc.hide();\n        });\n      } else {\n        cmLoadingSvc.setContent('流水号输入错误！', 'error');\n        cmLoadingSvc.hide();\n      }\n    };\n    $scope.$on('$destroy', function () {\n      if (currentTimeUpdateTimer) {\n        $interval.cancel(currentTimeUpdateTimer);\n      }\n    });\n  })\n;\n\n/**\n * Created by Centimitr on 2015/8/2.\n */\nangular.module('RMI.ControlCtrls', [])\n  .controller('ControlBaseCtrl', function ($scope, $rootScope, $state) {\n    $scope.uiIsInDesignCacheEdit = false;\n    $scope.state = $state;\n    $rootScope.$on('$stateChangeStart',\n      function (event, toState, toParams) {\n        $scope.uiIsInDesignCacheEdit = !!toParams['isEditCache'];\n      });\n  })\n  .controller('ControlDesignProcessCtrl', function ($scope, $state, $q, cmLoadingSvc, ControlDesignSvc) {\n    $scope.processTypes = [];\n    $scope.processTypes = [{\n      'Id': 'X01',\n      'Class': '辅料',\n      'Name': '部件',\n      'Description': '描述信息描述信息描述信息描述信息描述信息描述信息'\n    }];\n    (function () {\n      cmLoadingSvc.setContent('正在加载所有流程列表', 'inProgress');\n      cmLoadingSvc.show();\n      ControlDesignSvc.fetchProcessTypes().then(function (ProcessTypes) {\n        $scope.processTypes = ProcessTypes;\n        cmLoadingSvc.setContent('加载成功', 'success');\n      }, function () {\n        cmLoadingSvc.setContent('加载失败');\n      }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    })();\n    $scope.funcEditProcess = function (ProcessTypeId, Rev) {\n      cmLoadingSvc.setContent('正在加载流程数据', 'inProgress');\n      cmLoadingSvc.show();\n      var processTypePromise = ControlDesignSvc.fetchProcessType(ProcessTypeId, Rev);\n      var processNodeTypesPromise = ControlDesignSvc.fetchProcessNodeTypes(ProcessTypeId, Rev);\n      var promise = $q.all([processTypePromise, processNodeTypesPromise]);\n      promise.then(function (ProcessTypeAndProcessNodeTypes) {\n        var ProcessType = ProcessTypeAndProcessNodeTypes[0];\n        var ProcessNodeTypes = ProcessTypeAndProcessNodeTypes[1];\n        angular.forEach(ProcessNodeTypes, function (ProcessNodeType) {\n          ProcessNodeType.FormConfig = angular.fromJson(ProcessNodeType.FormConfig);\n        });\n        ControlDesignSvc.saveCacheConfig('process', ProcessNodeTypes, ProcessType);\n        cmLoadingSvc.setContent('加载完成', 'success');\n        $state.go('home.control.designEditProcess', {'isEditCache': 'cache', 'loadItemType': undefined});\n      }, function (error) {\n        cmLoadingSvc.setContent('数据加载错误', 'error');\n        console.log(error);\n      }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    };\n  })\n  .controller('ControlDesignEditCtrl', function ($scope, $state, $filter, $q, ControlDesignSvc, FormSvc, cmLoadingSvc) {\n    $scope.uiIsTable = false;\n    $scope.uiIsMap = false;\n    $scope.uiIsTableTemplateBaseShow = false;\n    $scope.uiIsMapTemplateBaseShow = false;\n    $scope.uiIsAddPanelShow = false;\n    $scope.uiIsEditCache = $state.params.isEditCache ? true : false;\n    var presetConfig = ControlDesignSvc.getPresetConfig();\n    //var orderAttributeName = 'Order';\n\n    //配置初始化\n    $scope.configString = '';\n    var pageType = '';\n    if ($state.current.name === 'home.control.designEditMap') {\n      $scope.uiIsTable = false;\n      $scope.uiIsMap = true;\n      pageType = 'map';\n    } else if ($state.current.name === 'home.control.designEditTable') {\n      $scope.uiIsTable = true;\n      $scope.uiIsMap = false;\n      pageType = 'table';\n    } else if ($state.current.name === 'home.control.designEditForm') {\n      pageType = 'form';\n    } else if ($state.current.name === 'home.control.designEditProcess') {\n      pageType = 'process';\n    }\n    $scope.generalConfig = presetConfig.general[pageType];\n    $scope.itemConfig = presetConfig.item[pageType];\n    $scope.itemConfigs = [];\n    $scope.localConfigs = [];\n    $scope.localConfigs = [{\n      'description': new Date().getTime()\n    }, {\n      'description': new Date().getTime()\n    }, {\n      'description': new Date().getTime()\n    }];\n\n    //配置管理以及串接过程\n    (function funcLoadConfigsFromCache(whetherToLoad) {\n      if (!whetherToLoad)return 0;\n      var cacheConfig = ControlDesignSvc.getCacheConfig(pageType);\n      angular.extend($scope.generalConfig, cacheConfig.content.general);\n      angular.extend($scope.itemConfigs, cacheConfig.content.items);\n      angular.extend($scope.itemConfig, cacheConfig.content.item);\n      var loadItemType = $state.params.loadItemType;\n      if (loadItemType === 'form' || loadItemType === 'table' || loadItemType === 'map') {\n        angular.extend($scope.itemConfig, ControlDesignSvc.getCacheItemConfigByChildConfig(loadItemType));\n      }\n    })(!!$state.params.isEditCache);\n    $scope.funcSaveConfigsCacheAndBack = function () {\n      cmLoadingSvc.setContent('正在保存编辑后的配置', 'inProgress');\n      cmLoadingSvc.show();\n      ControlDesignSvc.saveCacheConfig(pageType, $scope.itemConfigs, $scope.generalConfig);\n      if (pageType === 'map' || pageType === 'table') {\n        $state.go('home.control.designEditForm', {'isEditCache': 'cache', 'loadItemType': pageType});\n        cmLoadingSvc.hide(750);\n      } else if (pageType === 'form') {\n        $state.go('home.control.designEditProcess', {'isEditCache': 'cache', 'loadItemType': pageType});\n        cmLoadingSvc.hide(750);\n      } else if (pageType === 'process') {\n        var updateProcessTypePromise = ControlDesignSvc.updateProcessType($scope.generalConfig.Id, $scope.generalConfig);\n        var updateProcessNodeTypesPromise = ControlDesignSvc.updateProcessNodeTypes($scope.generalConfig.Id, $scope.itemConfigs);\n        var promise = $q.all([updateProcessTypePromise, updateProcessNodeTypesPromise]);\n        promise.then(function () {\n          cmLoadingSvc.setContent('保存成功', 'success');\n          $state.go('home.control.designProcess', {'isEditCache': 'cache'});\n        }, function (error) {\n          console.log(error);\n          cmLoadingSvc.setContent('保存失败', 'error');\n        }).finally(function () {\n          cmLoadingSvc.hide(750);\n        });\n      }\n    };\n\n    var currentEditItemConfigIndex = null;\n    $scope.funcLoadItemConfigToAddPanel = function (itemConfig, index) {\n      currentEditItemConfigIndex = index;\n      $scope.itemConfig = angular.copy(itemConfig);\n      console.log('Current Editing:' + index);\n    };\n    var funcGoDesignEdit = function (goPageType) {\n      ControlDesignSvc.saveCacheConfig(pageType, $scope.itemConfigs, $scope.generalConfig, null);\n      ({\n        'form': function () {\n          $state.go('home.control.designEditForm', {'isEditCache': 'cache'});\n        },\n        'table': function () {\n          $state.go('home.control.designEditTable', {'isEditCache': 'cache'});\n        },\n        'map': function () {\n          $state.go('home.control.designEditMap', {'isEditCache': 'cache'});\n        }\n      }[goPageType])();\n    };\n    $scope.funcGoEditItemConfig = function (goPageType) {\n      var itemConfig = $scope.itemConfig;\n      var order = currentEditItemConfigIndex;\n      if (itemConfig) {\n        if (pageType === 'process') {\n          ControlDesignSvc.saveItemCacheConfig('process', itemConfig);\n          ControlDesignSvc.saveCacheConfigByFatherConfig(itemConfig, 'form', order);\n        } else if (pageType === 'form') {\n          ControlDesignSvc.saveItemCacheConfig('form', itemConfig);\n          var itemConfigType = itemConfig.Type;\n          if (itemConfigType === 'table') {\n            ControlDesignSvc.saveCacheConfigByFatherConfig(itemConfig, 'table', order);\n          } else if (itemConfigType === 'map') {\n            ControlDesignSvc.saveCacheConfigByFatherConfig(itemConfig, 'map', order);\n          }\n        }\n      }\n      funcGoDesignEdit(goPageType);\n    };\n    $scope.funcGoCreateItemConfig = function (goPageType) {\n      funcGoDesignEdit(goPageType);\n    };\n\n    //添加面板的工具函数\n    $scope.funcPackFormConfigString = function (configString) {\n      var formConfig = angular.fromJson(configString);\n      var formConfigPack = {\n        'FormConfig': formConfig\n      };\n      return angular.toJson(formConfigPack);\n    };\n    //configs列表表格的操作函数\n    $scope.funcLoadConfig = function (configString) {\n      var config = angular.fromJson(configString);\n      angular.forEach(config, function (v, k) {\n        $scope.itemConfig[k] = v;\n      });\n    };\n    $scope.funcAddUpConfigs = function () {\n      $scope.itemConfig['Order'] = $scope.itemConfigs.length + 1;\n      $scope.itemConfigs.push(angular.copy($scope.itemConfig));\n      $scope.itemConfig = presetConfig.item[pageType];\n    };\n    $scope.funcReorderConfigs = function () {\n      $scope.itemConfigs = $filter('orderBy')($scope.itemConfigs, 'Order');\n      angular.forEach($scope.itemConfigs, function (v, k) {\n        v['Order'] = k + 1;\n      });\n    };\n    $scope.funcDeleteFromConfigs = function (index) {\n      $scope.itemConfigs.splice(index, 1);\n    };\n\n    //流程编辑工具中的操作函数\n    $scope.funcAddProcessTypeIdToConfigs = function () {\n      angular.forEach($scope.itemConfigs, function (v) {\n        v.ProcessTypeId = $scope.generalConfig.Id;\n        v.Rev = $scope.generalConfig.Rev;\n      });\n    };\n    $scope.funcAddDatabaseTableNameToFormConfigs = function () {\n      var databaseTableNameStr = 'RMI_FORM_DATA_PROCESSTYPEID_REVREPLACE_REV_PROCESSNODETYPEID_COMPONENTORDER_TYPE';\n      angular.forEach($scope.itemConfigs, function (v) {\n        if (typeof (v.FormConfig) === 'object') {\n          var databaseTableNameStr2 = databaseTableNameStr\n            .replace(/PROCESSTYPEID/g, v.ProcessTypeId).replace(/PROCESSNODETYPEID/g, v.Id).replace(/REPLACE_REV/g, v.Rev);\n          angular.forEach(v.FormConfig['Components'], function (va) {\n            va.DatabaseTableName = databaseTableNameStr2.replace(/ORDER/g, va.Order).replace(/TYPE/g, va.Type.toUpperCase());\n          });\n        }\n      });\n    };\n    $scope.funcCreateProcessTypeAndProcessNodeTypes = function () {\n      cmLoadingSvc.setContent('正在提交流程数据');\n      cmLoadingSvc.show();\n      $scope.funcAddProcessTypeIdToConfigs();\n      $scope.funcAddDatabaseTableNameToFormConfigs();\n      var processType = $scope.generalConfig;\n      var processNodeTypes = $scope.itemConfigs;\n      angular.forEach(processNodeTypes, function (v) {\n        //转成字符串以方便服务器存储到数据库\n        if (typeof(v.FormConfig) !== 'string') {\n          //v.FormConfig = angular.toJson(v.FormConfig);\n        }\n        if (typeof(v.Order) === 'number') {\n          v.Order = v.Order.toString();\n        }\n      });\n      var createProcessTypePromise = ControlDesignSvc.createProcessType(processType);\n      console.log(processNodeTypes);\n      var createProcessNodeTypesPromise = ControlDesignSvc.createProcessNodeTypes(processNodeTypes);\n      var promise = $q.all([createProcessTypePromise, createProcessNodeTypesPromise]);\n      promise.then(function () {\n        cmLoadingSvc.setContent('提交成功！');\n      }, function (error) {\n        cmLoadingSvc.setContent('提交失败');\n        console.log('funcCreateProcessTypeAndProcessNodeTypes Error:' + error);\n      }).finally(function () {\n        cmLoadingSvc.hide(750);\n      })\n    };\n  })\n  .controller('ControlDesignClassificationCtrl', function ($scope, $state, SQLQuerySvc, ControlDesignSvc, cmLoadingSvc) {\n    $scope.uiIsAddPanelShow = false;\n    $scope.OptionalProcessTypes = [];\n    $scope.subclasses = [];\n    $scope.subclass = {\n      'Subclass': null,\n      'ProcessTypeId': null\n    };\n    $scope.funcSubmitSubclass = function (subclass) {\n      cmLoadingSvc.setContent('Creating subclass...', 'inProgress');\n      cmLoadingSvc.show();\n      console.log(subclass);\n      //不为空就进行提交\n      if (subclass.Subclass && subclass.ProcessTypeId) {\n        ControlDesignSvc.createSubclass(subclass).then(function () {\n          cmLoadingSvc.setContent('Successfully.', 'success');\n          $state.reload();\n        }, function (error) {\n          cmLoadingSvc.setContent('Error.', 'error');\n          console.error(error);\n        }).finally(function () {\n          cmLoadingSvc.hide();\n        });\n      } else {\n        cmLoadingSvc.setContent('Config error, please check.', 'error');\n        cmLoadingSvc.hide(1000);\n      }\n    };\n    $scope.funcRemoveSubclass = function (SubclassId) {\n      cmLoadingSvc.setContent('Deleting subclass...', 'inProgress');\n      cmLoadingSvc.show();\n      ControlDesignSvc.deleteSubclass(SubclassId).then(function () {\n        cmLoadingSvc.setContent('Successfully.', 'success');\n        $state.reload();\n      }, function (error) {\n        cmLoadingSvc.setContent('Error.', 'error');\n        console.error(error);\n      });\n    };\n    (function funcLoadData() {\n      ControlDesignSvc.fetchProcessTypes().then(function (ProcessTypes) {\n        $scope.OptionalProcessTypes = ProcessTypes;\n      }, function () {\n      });\n      ControlDesignSvc.fetchSubclasses().then(function (Subclasses) {\n        $scope.subclasses = Subclasses;\n        //console.log($scope.subclasses);\n      });\n    })();\n  })\n  .controller('ControlDesignSourceCtrl', function ($scope, ControlDesignSvc, cmLoadingSvc) {\n    $scope.uiIsAddPanelShow = true;\n    $scope.config = {\n      'Description': '',\n      'Name': '',\n      'Type': 'value',\n      'Value': ''\n    };\n    $scope.configs = [];\n    $scope.funcReadSources = function () {\n      cmLoadingSvc.setContent('正在加载数据', 'inProgress');\n      cmLoadingSvc.show();\n      ControlDesignSvc.readSourcesFromKVStore().then(function (Sources) {\n        cmLoadingSvc.setContent('加载完成', 'success');\n        $scope.configs = Sources;\n      }, function () {\n        cmLoadingSvc.setContent('加载失败', 'error');\n      }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    };\n    $scope.funcCreateSource = function () {\n      cmLoadingSvc.setContent('正在创建来源', 'inProgress');\n      cmLoadingSvc.show();\n      ControlDesignSvc.createSourceToKVStore($scope.config).then(function (Sources) {\n        cmLoadingSvc.setContent('数据成功获取，重载页面值', 'success');\n        $scope.configs = Sources;\n      }, function (error) {\n        cmLoadingSvc.setContent('创建失败', 'error');\n      }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    };\n    $scope.funcDeleteSource = function (sourceName) {\n      cmLoadingSvc.setContent('正在删除来源', 'inProgress');\n      cmLoadingSvc.show();\n      ControlDesignSvc.deleteSourceFromKVStore(sourceName).then(function (Sources) {\n        cmLoadingSvc.setContent('删除成功，重载页面值', 'success');\n        $scope.configs = Sources;\n      }, function (error) {\n        cmLoadingSvc.setContent('删除失败', 'error');\n      }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    };\n    $scope.funcReadSources();\n  })\n  .controller('ControlFeedbackCtrl', function ($scope, ControlFeedbackSvc, cmLoadingSvc, AccountSvc) {\n    $scope.feedback = {\n      'Subject': '',\n      'Content': '',\n      'SubmitTime': '',\n      'SubmitUserId': '',\n      'SubmitUserName': ''\n    };\n    $scope.funcSubmitNewFeedback = function (feedback) {\n      feedback.SubmitTime = new Date().getTime();\n      feedback.SubmitUserId = AccountSvc.currentUser().Id;\n      feedback.SubmitUserName = AccountSvc.currentUser().Name;\n      localStorage.setItem('Control.FeedBack.' + new Date().getTime(), angular.toJson(feedback));\n      cmLoadingSvc.setContent('正在提交您的反馈', 'inProgress');\n      cmLoadingSvc.show();\n      ControlFeedbackSvc.createFeedback(feedback)\n        .then(function () {\n          cmLoadingSvc.setContent('感谢您提供反馈！', 'success');\n        }, function (error) {\n          cmLoadingSvc.setContent('服务器提交失败，已本地存储', 'error');\n          console.error(error);\n        }).finally(function () {\n        cmLoadingSvc.hide(750);\n      });\n    };\n  })\n  .controller('ControlUserCtrl', function ($scope, ControlUserSvc, $uibModal) {\n    $scope.users = [];\n    (function funcLoadAllUsers() {\n      ControlUserSvc.fetchUsers().then(function (Users) {\n        $scope.users = Users;\n      }, function (error) {\n        console.error(error);\n      }).finally(function () {\n      });\n    })();\n    $scope.emptyUser = {};\n    $scope.funcOpenUserModifyModal = function (user) {\n      var modalInstance = $uibModal.open({\n        templateUrl: 'app/control/user/modify.html',\n        controller: 'ControlUserModifyCtrl',\n        resolve: {\n          'data':{\n            'user': user\n          }\n        }\n      });\n      modalInstance.result.then(function (modifiedUser) {\n        $scope.selectedUser = modifiedUser;\n      });\n    };\n  })\n  .controller('ControlUserModifyCtrl', function ($scope,data) {\n    var onSubmit = function () {\n      //an alert of the data model\n      alert(JSON.stringify($scope.vm.model), null, 2);\n    };\n    $scope.vm = {};\n    $scope.vm.onSubmit = onSubmit;\n    $scope.vm.model = angular.copy(data.user);\n    $scope.vm.initialFieldsModel = [{\n      \"className\": \"row\",\n      \"fieldGroup\": [{\n        \"className\": \"col-xs-4\",\n        \"type\": \"input\",\n        \"key\": \"Id\",\n        \"templateOptions\": {\n          \"type\": \"\",\n          \"label\": \"工号\",\n          \"required\": true,\n          \"placeholder\": \"\",\n          \"description\": \"\",\n          \"options\": []\n        }\n      }, {\n        \"className\": \"col-xs-4\",\n        \"type\": \"input\",\n        \"key\": \"Username\",\n        \"templateOptions\": {\n          \"type\": \"\",\n          \"label\": \"姓名\",\n          \"required\": true,\n          \"placeholder\": \"\",\n          \"description\": \"\",\n          \"options\": []\n        }\n      }, {\n        \"className\": \"col-xs-4\",\n        \"type\": \"input\",\n        \"key\": \"Password\",\n        \"templateOptions\": {\n          \"type\": \"password\",\n          \"label\": \"密码\",\n          \"required\": true,\n          \"placeholder\": \"\",\n          \"description\": \"\",\n          \"options\": []\n        }\n      }]\n    }, {\n      \"className\": \"row\",\n      \"fieldGroup\": [{\n        \"className\": \"col-xs-6\",\n        \"type\": \"groupedSelect\",\n        \"key\": \"Department\",\n        \"templateOptions\": {\n          \"type\": \"\",\n          \"label\": \"部门\",\n          \"required\": false,\n          \"placeholder\": \"\",\n          \"description\": \"\",\n          \"options\": [{\"name\": \"仓库管理\", \"value\": 0, \"group\": \"检验\"}, {\n            \"name\": \"主料检验\",\n            \"value\": 1,\n            \"group\": \"检验\"\n          }, {\"name\": \"辅料检验\", \"value\": 2, \"group\": \"检验\"}, {\"name\": \"管理\", \"value\": 3, \"group\": \"管理\"}]\n        }\n      }, {\n        \"className\": \"col-xs-6\",\n        \"type\": \"basicSelect\",\n        \"key\": \"Job\",\n        \"templateOptions\": {\n          \"type\": \"\",\n          \"label\": \"职务\",\n          \"required\": false,\n          \"placeholder\": \"\",\n          \"description\": \"\",\n          \"options\": [{\"name\": \"检验员\", \"value\": 0, \"group\": \"\"}, {\"name\": \"管理员\", \"value\": 1, \"group\": \"\"}]\n        }\n      }]\n    }, {\n      \"className\": \"row\",\n      \"fieldGroup\": [{\n        \"className\": \"col-xs-12\",\n        \"type\": \"textarea\",\n        \"key\": \"Permission\",\n        \"templateOptions\": {\n          \"type\": \"\",\n          \"label\": \"权限分配JSON\",\n          \"required\": false,\n          \"placeholder\": \"\",\n          \"description\": \"\",\n          \"options\": []\n        }\n      }]\n    }];\n    $scope.vm.buttons = {\n      \"submit\": \"submit\",\n      \"cancel\": \"cancel\"\n    };\n    $scope.vm.fields = angular.copy($scope.vm.initialFieldsModel);\n  })\n  .controller('ControlOperationCtrl', function ($scope, $state, FormSvc, ControlOperationSvc, AccountSvc) {\n    $scope.operations = [];\n    $scope.funcGo = function (Type, Id) {\n      if (Type === 'form') {\n        FormSvc.fetchForm(Id).then(function (Form) {\n          $state.go('home.process.detailForm', {\n            'ArrivalSerialNumber': Form.ArrivalSerialNumber,\n            'FormId': Id,\n            'Mode': 'edit'\n          });\n        }, function () {\n        }).finally()\n      } else if (Type === 'process') {\n        $state.go('home.process.detailInfo', {'ArrivalSerialNumber': Id});\n      }\n    };\n    (function funcLoadOperation(userId) {\n      $scope.operations = [];\n      var funcGetDescription = function (method) {\n        return {\n          'GET': '获取表单内容',\n          'POST': '创建新表单',\n          'PUT': '保存表单数据'\n        }[method];\n      };\n      ControlOperationSvc.fetchOperations(userId, $state.params.top)\n        .then(function (Operations) {\n            angular.forEach(Operations, function (operation) {\n              operation.Description = funcGetDescription(operation['Method']);\n            });\n            $scope.operations = Operations;\n          }, function (error) {\n            console.error(error);\n          }\n        )\n      ;\n    })(AccountSvc.currentUser());\n  })\n;\n\n(function () {\n  'use strict';\n\n  angular\n    .module('RMI', [\n      'ngAnimate',\n      'ngCookies',\n      'ngTouch',\n      'ngMessages',\n      //third party libraries\n      'ui.router',\n      'ui.bootstrap',\n      'nya.bootstrap.select',\n      'textAngular',\n      'formly',\n      'formlyBootstrap',\n      'ngTable',\n      'angular-loading-bar',\n      //Controllers\n      'RMI.PlayCtrls',\n      'RMI.HomeCtrls',\n      'RMI.ProcessCtrls',\n      'RMI.ControlCtrls',\n      //Services\n      'RMI.HomeServices',\n      'RMI.ProcessServices',\n      'RMI.ControlServices',\n      'RMI.UniversalServices',\n      //Directives\n      'DEVBYCM.cmTemplateLoad',\n      'DEVBYCM.cmInput',\n      'DEVBYCM.cmSelect',\n      'DEVBYCM.cmCheckbox',\n      'DEVBYCM.cmRadio',\n      'DEVBYCM.cmToggle',\n      'DEVBYCM.cmTextarea',\n      'DEVBYCM.cmTable',\n      'DEVBYCM.cmBarcode',\n      'DEVBYCM.cmNavMenu',\n      'DEVBYCM.cmSideMenuBox',\n      //'DEVBYCM.cmDynamicLoad',\n      'DEVBYCM.cmContentEditable',\n      //Module UI+Service\n      'DEVBYCM.cmLoadingModule',\n      'DEVBYCM.cmNavBarModule',\n      'DEVBYCM.cmLoginModule',\n      'DEVBYCM.cmNotificationAreaModule'\n    ]);\n\n})();\n\n/**\n * Created by Centimitr on 2015/12/13.\n */\n(function () {\n  'use strict';\n\n  angular\n    .module('RMI')\n    .config(formlyWrapperConfig);\n\n  /** @ngInject */\n  function formlyWrapperConfig(formlyConfigProvider) {\n    formlyConfigProvider.setWrapper({\n      name: 'heading',\n      template: '<div class=\"cmFormCollection heading\">\\n    <formly-transclude></formly-transclude>\\n</div>'\n    });\n    formlyConfigProvider.setWrapper({\n      name: 'fill-24',\n      template: '<div style=\"height: 24px;width: 100%\">\\n    <formly-transclude></formly-transclude>\\n</div>'\n    });\n    formlyConfigProvider.setWrapper({\n      name: 'label-left',\n      template: '<div class=\"cmFormCollection label-left\">\\n  <div class=\"left-label\">{{options.templateOptions.label}}</div>\\n  <div class=\"right-separator\"></div>\\n  <div class=\"content\">\\n    <formly-transclude></formly-transclude>  \\n  </div>\\n</div>'\n    });\n    formlyConfigProvider.setWrapper({\n      name: 'label-top',\n      template: '<div class=\"cmFormCollection label-top\">\\n  <div class=\"top-label\">{{options.templateOptions.label}}</div>\\n  <div class=\"bottom-separator\"></div>\\n  <div class=\"content\">\\n    <formly-transclude></formly-transclude>\\n  </div>\\n</div>'\n    });\n    formlyConfigProvider.setWrapper({\n      name: 'label-colon',\n      template: '<div class=\"cmFormCollection label-colon\">\\n  <div class=\"colon-label\">{{options.templateOptions.label}}</div>\\n  <div class=\"content\">\\n    <formly-transclude></formly-transclude>  \\n  </div>\\n</div>'\n    });\n    formlyConfigProvider.setWrapper({\n      name: 'border-top-right-left',\n      template: '<div class=\"cmFormCollection border-top-right-left\">\\n    <formly-transclude></formly-transclude>\\n</div>'\n    });\n    formlyConfigProvider.setWrapper({\n      name: 'border-bottom',\n      template: '<div class=\"cmFormCollection border-bottom\">\\n    <formly-transclude></formly-transclude>\\n</div>'\n    });\n    formlyConfigProvider.setWrapper({\n      name: 'flex-col',\n      template: '<div class=\"cmFormCollection flex-col\">\\n    <formly-transclude></formly-transclude>\\n</div>'\n    });\n    formlyConfigProvider.setWrapper({\n      name: 'flex-row',\n      template: '<div class=\"cmFormCollection flex-row\">\\n    <formly-transclude></formly-transclude>\\n</div>'\n    });\n    formlyConfigProvider.setWrapper({\n      name: 'flex-cols',\n      template: '<div class=\"cmFormCollection flex-cols\">\\n    <formly-transclude></formly-transclude>\\n</div>'\n    });\n    formlyConfigProvider.setWrapper({\n      name: 'flex-rows',\n      template: '<div class=\"cmFormCollection flex-rows\">\\n    <formly-transclude></formly-transclude>\\n</div>'\n    });\n  }\n})();\n\n/**\n * Created by Centimitr on 2015/12/13.\n */\n(function () {\n  'use strict';\n\n  angular\n    .module('RMI')\n    .config(formlyThirdPartyInputConfig);\n\n  /** @ngInject */\n  function formlyThirdPartyInputConfig(formlyConfigProvider) {\n    formlyConfigProvider.setType(\n      {\n        name: 'richEditor',\n        template: '<text-angular class=\"richTextAngular\" ng-model=\"model[options.key || index]\"></text-angular>'\n      }\n    );\n    formlyConfigProvider.setType(\n      {\n        name: 'blank',\n        template: '<div></div>'\n      }\n    );\n    var subTitleTemplate = '<div class=\"row\"><div class=\"\"><h4 class=\"text-center\">{{options.templateOptions.placeholder}}<h4><hr/></div></div>';\n    formlyConfigProvider.setType(\n      {\n        name: 'subTitle',\n        template: subTitleTemplate\n      }\n    );\n    var basicSelectTemplate =\n      '<div>' +\n      '<label>{{options.templateOptions.label}}</label>' +\n      ' <ol   class=\"nya-bs-select col-sm-12 col-xs-12 col-md-12 col-lg12\" ' +\n      '   ng-model=\"model[options.key || index]\"  ' +\n      '   id=\"{{id}}\"  ' +\n      '   disabled=\"options.templateOptions.options.length === 0\"> ' +\n      '   <li class=\"nya-bs-option\" nya-bs-option=\"option in options.templateOptions.options\"> ' +\n      '     <a>{{option.name}}</a> ' +\n      '   </li> ' +\n      ' </ol> ' +\n      '</div>';\n    formlyConfigProvider.setType(\n      {\n        name: 'basicSelect',\n        template: basicSelectTemplate\n      }\n    );\n    var groupedSelectTemplate =\n      '<div>' +\n      '  <label>{{options.templateOptions.label}}</label>' +\n      '  <ol class=\"nya-bs-select col-sm-12 col-xs-12 col-md-12 col-lg12\" ' +\n      '    ng-model=\"model[options.key || index]\" ' +\n      '       data-live-search=\"true\" ' +\n      '       disabled=\"options.templateOptions.options.length === 0\">' +\n      '       <li nya-bs-option=\"option in  options.templateOptions.options group by option.group\"  ' +\n      '       >' +\n      '         <span class=\"dropdown-header\">{{$group}}</span>' +\n      '         <a>' +\n      '           <span>{{option.name}}</span>' +\n      '           <span class=\"glyphicon glyphicon-ok check-mark\"></span>' +\n      '         </a>' +\n      '       </li>' +\n      '  </ol>' +\n      '</div>';\n    formlyConfigProvider.setType(\n      {\n        name: 'groupedSelect',\n        template: groupedSelectTemplate\n      }\n    );\n    // angular UI date picker\n    // thx Kent C. Dodds\n    var attributes = [\n      'date-disabled',\n      'custom-class',\n      'show-weeks',\n      'starting-day',\n      'init-date',\n      'min-mode',\n      'max-mode',\n      'format-day',\n      'format-month',\n      'format-year',\n      'format-day-header',\n      'format-day-title',\n      'format-month-title',\n      'year-range',\n      'shortcut-propagation',\n      'datepicker-popup',\n      'show-button-bar',\n      'current-text',\n      'clear-text',\n      'close-text',\n      'close-on-date-selection',\n      'datepicker-append-to-body'\n    ];\n    var bindings = [\n      'datepicker-mode',\n      'min-date',\n      'max-date'\n    ];\n    var ngModelAttrs = {};\n    angular.forEach(attributes, function (attr) {\n      ngModelAttrs[camelize(attr)] = {attribute: attr};\n    });\n    angular.forEach(bindings, function (binding) {\n      ngModelAttrs[camelize(binding)] = {bound: binding};\n    });\n    formlyConfigProvider.setType({\n      name: 'datepicker',\n      template: '<input  id=\"{{id}}\" class=\"form-control\" ng-click=\"open($event)\" ng-model=\"model[options.key  || index]\" is-open=\"to.isOpen\" ng-click=\"to.isOpen = true\" datepicker-options=\"to.datepickerOptions\" />',\n      wrapper: ['bootstrapLabel', 'bootstrapHasError'],\n      controller: ['$scope', function ($scope) {\n        $scope.open = function ($event) {\n          $event.preventDefault();\n          $event.stopPropagation();\n          $scope.opened = true;\n        };\n      }],\n      defaultOptions: {\n        ngModelAttrs: ngModelAttrs,\n        templateOptions: {\n          addonLeft: {\n            class: 'glyphicon glyphicon-calendar',\n            onClick: function (options, scope) {\n              options.templateOptions.isOpen = !options.templateOptions.isOpen;\n            }\n          },\n          onFocus: function ($viewValue, $modelValue, scope) {\n            scope.to.isOpen = !scope.to.isOpen;\n          },\n          datepickerOptions: {}\n        }\n      }\n    });\n    function camelize(string) {\n      string = string.replace(/[-_s]+(.)?/g, function (match, chr) {\n        return chr ? chr.toUpperCase() : '';\n      });\n      // Ensure 1st char is always lowercase\n      return string.replace(/^([A-Z])/, function (match, chr) {\n        return chr ? chr.toLowerCase() : '';\n      });\n    }\n  }\n\n})();\n\n/**\n * Created by Centimitr on 2015/12/13.\n */\n(function () {\n  'use strict';\n  var unique = 1;\n\n  angular\n    .module('RMI')\n    .config(formlyCollectionConfig)\n    .directive('cmFormlyTable', function () {\n      return {\n        restrict: 'E',\n        template: '<div class=\"cmFormCollection cmTable {{hideRepeat}} cm-animation-fade\" style=\"{{uiIsEmptyTableInitial?\\'min-height:163px;max-height:163px;\\':\\'\\'}}\">\\n  <div class=\"loading-mask\" ng-if=\"uiIsEmptyTableInitial\">\\n    <div class=\"text\">Loading...</div>\\n  </div>\\n  <div>\\n    <header class=\"table-head\">\\n      <div style=\"min-width: {{rowModifyClassWidth+\\'px\\'}};max-width: {{rowModifyClassWidth+\\'px\\'}};height: 100%;\"></div>\\n      <div class=\"head-cell\" ng-repeat=\"cell in tableHeadCells track by $index\" style=\"width: {{cell.width+\\'px\\'}}\">\\n        {{cell.name}}\\n      </div>\\n    </header>\\n    <section class=\"table-body\">\\n      <div class=\"table-row\" ng-repeat=\"element in model\" ng-init=\"fields = funcCopyFields(to.fields)\">\\n        <div class=\"row-modify\">\\n          <a ng-click=\"funcRemoveWithConfirm($index)\">删除</a>\\n        </div>\\n        <formly-form class=\"row-content\" fields=\"fields\" model=\"element\" form=\"form\"></formly-form>\\n      </div>\\n      <div class=\"table-row-no-content\" ng-show=\"model.length===0\">暂无内容</div>\\n    </section>\\n    <footer class=\"table-foot\">\\n      <div class=\"addNewRowButton\">\\n        <button type=\"button\" class=\"btn btn-block btn-primary\" ng-click=\"funcPushWithBringDown()\">添加新的项目</button>\\n      </div>\\n    </footer>\\n  </div>\\n</div>',\n        replace: true,\n        scope: {\n          model: '=',\n          to: '=',\n          templateOptions: '='\n        },\n        link: function (scope, el) {\n          var funcSetTableHeader = function () {\n            setTimeout(function () {\n              scope.rowModifyClassWidth = $($(el).find(\".row-modify\")[0]).outerWidth(true);\n              var firstFormly = $(el).find(\".formly\")[0];\n              var formlyFields = $(firstFormly).find(\".formly-field\");\n              scope.tableHeadCells = formlyFields.map(function () {\n                return {'width': $(this).outerWidth(true)};\n              }).get();\n              angular.forEach(scope.tableHeadCells, function (cell, index) {\n                var key = scope.to.fields[index].key;\n                angular.forEach(scope.to.relation, function (relation) {\n                  if (relation.key === key) {\n                    cell.name = relation.name;\n                  }\n                })\n              });\n              scope.$digest();\n            }, 0)\n          };\n          //绑定页面大小变化的时候，重新计算表头宽度\n          $(window).bind(\"resize\", function () {\n            el.ready(function () {\n              funcSetTableHeader();\n            });\n          });\n          setInterval(function () {\n            el.ready(function () {\n              funcSetTableHeader();\n            });\n          }, 750);\n          //表格行数发生变化的时候，重新绑定回车事件\n          scope.$watch(function () {\n            if (!angular.isUndefined(scope.model)) {\n              return scope.model.length;\n            }\n            return 0;\n          }, function () {\n            scope.uiIsLoading = true;\n            //绑定回车换格功能\n            setTimeout(function () {\n              var rows = $(el).find(\".formly\");\n              rows.map(function (rowIndex) {\n                $(this).find('.formly-field').map(function () {\n                  var nextFormLyField = $(this).next();\n                  $(this).find('input').unbind('keypress');\n                  $(this).find('input').bind('keypress', function (e) {\n                    var funcGoToNextRowBegin = function (rowIndex, rowsLength) {\n                      if (rowIndex <= rowsLength - 1) {\n                        $(rows[rowIndex + 1]).find('.formly-field').find('input').first().focus();\n                      } else {\n                        scope.funcPushWithBringDown();\n                        scope.$apply();\n                        newRows = $(el).find(\".formly\");\n                        $(newRows[rowIndex + 1]).find('.formly-field').find('input').first().focus();\n                      }\n                    };\n                    var newRows = null;\n                    if (e.ctrlKey === true && e.keyCode === 10) {\n                      e.preventDefault();\n                      funcGoToNextRowBegin(rowIndex, rows.length - 1);\n                    } else if (e.keyCode === 13) {\n                      e.preventDefault();\n                      var nextInput = nextFormLyField.find('input');\n                      if (nextInput.length) {\n                        nextInput.focus();\n                      } else {\n                        funcGoToNextRowBegin(rowIndex, rows.length - 1);\n                      }\n                    }\n                  });\n                });\n              });\n              setTimeout(function () {\n                scope.uiIsLoading = false;\n                scope.$digest();\n              }, 0);\n            }, 0);\n          });\n          //开始初始化表格，初始化遮罩\n          scope.uiIsEmptyTableInitial = !(scope.model);\n          scope.uiIsLoading = true;\n          //初始化表头，并结束加载\n          if (1 || scope.uiIsEmptyTableInitial) {\n            //通过添加一行来确保能够获取到表头的宽度\n            scope.funcPush();\n            //初始化表头宽度后再删除多余的一行\n            setTimeout(function () {\n              funcSetTableHeader();\n              scope.funcPop();\n              scope.uiIsEmptyTableInitial = false;\n              setInterval(function () {\n                scope.uiIsInitial = false;\n              }, 0);\n            }, 0);\n          } else {\n            funcSetTableHeader();\n            scope.uiIsInitial = false;\n          }\n        },\n        controller: function ($scope) {\n          $scope.formOptions = {formState: $scope.formState};\n          $scope.funcRemoveWithConfirm = function (index) {\n            var result = confirm(\"您确定要删除这一项吗？\");\n            if (result) {\n              $scope.funcRemove(index);\n            }\n          };\n          $scope.funcRemove = function (index) {\n            $scope.model.splice(index, 1);\n          };\n          $scope.funcPop = function () {\n            $scope.model.pop();\n          };\n          $scope.funcPush = function () {\n            $scope.model = $scope.model || [];\n            $scope.model.push({});\n          };\n          $scope.funcPushWithBringDown = function () {\n            $scope.model = $scope.model || [];\n            var rows = $scope.model;\n            var lastRow = rows[rows.length - 1];\n            var newRow = {};\n            if (lastRow) {\n              angular.forEach($scope.to.bringDown, function (bringDownOption) {\n                if (lastRow[bringDownOption['key']]) {\n                  newRow[bringDownOption['key']] = angular.copy(lastRow[bringDownOption['key']]);\n                }\n              });\n            }\n            rows.push(newRow);\n          };\n          $scope.funcCopyFields = copyFields;\n          function copyFields(fields) {\n            fields = angular.copy(fields);\n            addRandomIds(fields);\n            return fields;\n          }\n\n          function addRandomIds(fields) {\n            unique++;\n            angular.forEach(fields, function (field, index) {\n              if (field.fieldGroup) {\n                addRandomIds(field.fieldGroup);\n                return; // fieldGroups don't need an ID\n              }\n\n              if (field.templateOptions && field.templateOptions.fields) {\n                addRandomIds(field.templateOptions.fields);\n              }\n\n              field.id = field.id || (field.key + '_' + index + '_' + unique + getRandomInt(0, 9999));\n            });\n          }\n\n          function getRandomInt(min, max) {\n            return Math.floor(Math.random() * (max - min)) + min;\n          }\n        }\n      }\n    });\n\n  /** @ngInject */\n  function formlyCollectionConfig(formlyConfigProvider) {\n    formlyConfigProvider.setType({\n      name: 'cm-input',\n      template: '<div class=\"cmFormCollection cmInput\">\\n  <label>\\n    <div class=\"input-label\">\\n      {{options.templateOptions.label}}\\n    </div>\\n    <input type=\"{{options.templateOptions.type}}\" ng-model=\"model[options.key]\">\\n  </label>\\n</div>',\n      link: function (scope) {\n        /*        if(scope.options.templateOptions.type==='date'){\n         console.log(0);\n         scope.model= new Date(scope.model);\n         }*/\n      }\n    });\n    formlyConfigProvider.setType(\n      {\n        name: 'cm-select',\n        template: '<div class=\"cmFormCollection cmSelect\" style=\"width: {{options.templateOptions.width}}\">\\n  <label>\\n    {{options.templateOptions.label}}\\n  </label>\\n  <div>\\n    <div>\\n      <ol class=\"nya-bs-select\" ng-model=\"model[options.key || index]\"\\n          style=\"width: {{options.templateOptions.selectWidth}}\"\\n          title=\"请选择\"\\n          live-search=\"options.templateOptions.liveSearch===\\'true\\'\"\\n          disabled=\"options.templateOptions.options.length === 0\">\\n        <li ng-show=\"options.templateOptions.group\"\\n            nya-bs-option=\"option in  options.templateOptions.options group by option.group\"\\n            data-value=\"option.value\"\\n        >\\n          <span class=\"dropdown-header\">{{$group}}</span>\\n          <a><span>{{option.name}}</span><span class=\"\">1</span></a></li>\\n        <li ng-show=\"!options.templateOptions.group\"\\n            nya-bs-option=\"option in  options.templateOptions.options\"\\n            data-value=\"option.value\"\\n        ><span\\n          class=\"dropdown-header\">{{$group}}</span>\\n          <a><span>{{option.name}}</span><span class=\"\">1</span></a></li>\\n      </ol>\\n    </div>\\n  </div>\\n</div>',\n      }\n    );\n    formlyConfigProvider.setType({\n      name: 'cm-table',\n      template: '<cm-formly-table model=\"model[options.key]\" to=\"to\" templateOptions=\"templateOptions\"></cm-formly-table>',\n    });\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('RMI')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log) {\n\n    $log.debug('runBlock end');\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('RMI')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n    $stateProvider\n      .state('home', {\n        url: '/',\n        views: {\n          '': {\n            templateUrl: 'app/interaction/dashboard/index.html',\n            controller: 'HomeCtrl'\n          },\n          'main@home': {\n            templateUrl: 'app/interaction/dashboard/main.html',\n            controller: 'IndexCtrl'\n          }\n        }\n      })\n      .state('home.playground', {\n        url: 'Playground',\n        views: {\n          'main@home': {\n            templateUrl: 'app/interaction/playground/main.html',\n            controller: 'PlaygroundCtrl',\n            controllerAs: 'vm'\n          }\n        }\n      })\n      //Form相关路由\n      .state('home.process', {\n        abstract: true,\n        url: 'Ins',\n        views: {\n          'main@home': {\n            template: '<div ui-view=\"\"></div>'\n          }\n        }\n      })\n      .state('home.process.detailInfo', {\n        url: '/:ArrivalSerialNumber/Info/',\n        templateUrl: 'app/interaction/process/detail/info.html',\n        controller: 'ProcessDetailInfoCtrl'\n      })\n      .state('home.process.detailForm', {\n        url: '/:ArrivalSerialNumber/Form/:FormId/?Mode',\n        templateUrl: 'app/interaction/process/detail/base.html',\n        controller: 'ProcessDetailFormCtrl'\n      })\n      .state('home.process.formList', {\n        url: '/:Class/F/:ProcessTypeId-:Rev/:ProcessNodeTypeId/?IsComplete',\n        templateUrl: 'app/interaction/process/list/base.html',\n        controller: 'ProcessListCtrl'\n      })\n      .state('home.process.processList', {\n        url: '/:Class/P/:ProcessTypeId-:Rev/?IsComplete',\n        templateUrl: 'app/interaction/process/list/base.html',\n        controller: 'ProcessListCtrl'\n      })\n      //Control相关路由\n      .state('home.control', {\n        abstract: true,\n        url: 'Control',\n        views: {\n          'main@home': {\n            templateUrl: 'app/interaction/control/base.html',\n            controller: 'ControlBaseCtrl'\n          }\n        }\n      })\n      .state('home.control.designProcess', {\n        url: '/design/process/',\n        templateUrl: 'app/interaction/control/design/process.html',\n        controller: 'ControlDesignProcessCtrl'\n      })\n      .state('home.control.designEditProcess', {\n        url: '/design/edit/process/?isEditCache&loadItemType',\n        templateUrl: 'app/interaction/control/design/edit/process.html',\n        controller: 'ControlDesignEditCtrl'\n      })\n      .state('home.control.designEditForm', {\n        url: '/design/edit/form/?isEditCache&loadItemType',\n        templateUrl: 'app/interaction/control/design/edit/form.html',\n        controller: 'ControlDesignEditCtrl'\n      })\n      .state('home.control.designEditTable', {\n        url: '/design/edit/table/?isEditCache',\n        templateUrl: 'app/interaction/control/design/edit/table.html',\n        controller: 'ControlDesignEditCtrl'\n      })\n      .state('home.control.designEditMap', {\n        url: '/design/edit/map/?isEditCache',\n        templateUrl: 'app/interaction/control/design/edit/map.html',\n        controller: 'ControlDesignEditCtrl'\n      })\n      .state('home.control.designClassification', {\n        url: '/design/classification/',\n        templateUrl: 'app/interaction/control/design/classification.html',\n        controller: 'ControlDesignClassificationCtrl'\n      })\n      .state('home.control.designSource', {\n        url: '/design/source/',\n        templateUrl: 'app/interaction/control/design/source.html',\n        controller: 'ControlDesignSourceCtrl'\n      })\n      .state('home.control.feedbackNew', {\n        url: '/feedback/new/',\n        templateUrl: 'app/interaction/control/feedback/new.html',\n        controller: 'ControlFeedbackCtrl'\n      })\n      .state('home.control.user', {\n        \"url\": '/user/',\n        templateUrl: 'app/interaction/control/user/all.html',\n        controller: 'ControlUserCtrl'\n      })\n      .state('home.control.operationRecord', {\n        url: '/operation/record/?top',\n        templateUrl: 'app/interaction/control/operation/record.html',\n        controller: 'ControlOperationCtrl'\n      })\n    ;\n    $urlRouterProvider.otherwise('/');\n  }\n})();\n\n/* global malarkey:false, moment:false */\n(function () {\n  'use strict';\n\n  angular\n    .module('RMI')\n    .constant('malarkey', malarkey)\n    .constant('moment', moment)\n    .constant('SERVER_URL', 'http://192.168.135.50:8000/api/')\n    .constant('VERSION', '1512.22.218');\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('RMI')\n    .config(['cfpLoadingBarProvider', function (cfpLoadingBarProvider) {\n      cfpLoadingBarProvider.includeSpinner = false;\n      cfpLoadingBarProvider.includeBar = true;\n    }])\n    .config(['nyaBsConfigProvider', function (nyaBsConfigProvider) {\n      nyaBsConfigProvider.setLocalizedText('zh-cn', {\n        defaultNoneSelection: '',\n        noSearchResult: '没有结果',\n        numberItemSelected: '选中%d项'\n      });\n      nyaBsConfigProvider.useLocale('zh-cn');\n    }]);\n})();\n\n/**\n * Created by Centimitr on 2015/12/22.\n */\n'use strict';\n\nangular.module('DEVBYCM.cmTemplateLoad', [])\n  .directive('cmTemplateLoad', function (UtilSvc,$templateCache) {\n    return {\n      restrict: 'E',\n      template: '<div ng-include=\"templateUrl\"></div>',\n      scope:{\n        'model':'=',\n        'template':'@'\n      },\n      replace:true,\n      link:function(scope){\n        scope.templateUrl = 'cmTemplateLoad'+UtilSvc.random(16,8,true,false)+'.html';\n        $templateCache.put(scope.templateUrl,scope.template);\n        scope.$on('$destroy',function(){\n          $templateCache.remove(scope.templateUrl);\n        });\n      }\n    };\n  })\n;\n\n/**\n * Created by Centimitr on 2015/5/22.\n */\n'use strict';\n\nangular.module('DEVBYCM.cmContentEditable', [])\n  .directive('cmcontenteditable', function ($timeout) {\n    return {\n      restrict: 'A',\n      require: '?ngModel',\n      terminal:true,\n      link: function(scope, element, attrs, ngModel) {\n        // don't do anything unless this is actually bound to a model\n        if (!ngModel) {\n          return ;\n        }\n\n        // options\n        var opts = {};\n        angular.forEach([\n          'stripBr',\n          'noLineBreaks',\n          'selectNonEditable',\n          'moveCaretToEndOnChange'\n        ], function(opt) {\n          var o = attrs[opt];\n          opts[opt] = o && o !== 'false';\n        });\n\n        // view -> model\n        element.bind('input', function(e) {\n          scope.$apply(function() {\n            var html, html2, rerender;\n            html = element.html();\n            rerender = false;\n            if (opts.stripBr) {\n              html = html.replace(/<br>$/, '');\n            }\n            if (opts.noLineBreaks) {\n              html2 = html.replace(/<div>/g, '').replace(/<br>/g, '').replace(/<\\/div>/g, '');\n              if (html2 !== html) {\n                rerender = true;\n                html = html2;\n              }\n            }\n            ngModel.$setViewValue(html);\n            if (rerender) {\n              ngModel.$render();\n            }\n            if (html === '') {\n              // the cursor disappears if the contents is empty\n              // so we need to refocus\n              $timeout(function(){\n                element[0].blur();\n                element[0].focus();\n              });\n            }\n          });\n        });\n\n        // model -> view\n        var oldRender = ngModel.$render;\n        ngModel.$render = function() {\n          var el, el2, range, sel;\n          if (!!oldRender) {\n            oldRender();\n          }\n          element.html(ngModel.$viewValue || '');\n          if (opts.moveCaretToEndOnChange) {\n            el = element[0];\n            range = document.createRange();\n            sel = window.getSelection();\n            if (el.childNodes.length > 0) {\n              el2 = el.childNodes[el.childNodes.length - 1];\n              range.setStartAfter(el2);\n            } else {\n              range.setStartAfter(el);\n            }\n            range.collapse(true);\n            sel.removeAllRanges();\n            sel.addRange(range);\n          }\n        };\n        if (opts.selectNonEditable) {\n          element.bind('click', function(e) {\n            var range, sel, target;\n            target = e.toElement;\n            if (target !== this && angular.element(target).attr('contenteditable') === 'false') {\n              range = document.createRange();\n              sel = window.getSelection();\n              range.setStartBefore(target);\n              range.setEndAfter(target);\n              sel.removeAllRanges();\n              sel.addRange(range);\n            }\n          });\n        }\n      }\n    };\n  })\n;\n\n/**\n * Created by Centimitr on 2015/12/3.\n */\n'use strict';\n\nangular.module('DEVBYCM.cmBarcode', [])\n  .directive('cmBarcode', function() {\n    return {\n      restrict: 'E',\n      template: '<img src=\"\">',\n      scope:{\n        'value':'='\n      },\n      replace:true,\n      link:function(scope,element){\n        var option ={\n          width:  2,\n          height: 80,\n          quite: 0,\n          format: \"CODE128\",\n          displayValue: true,\n          font:\"Consolas\",\n          textAlign:\"center\",\n          fontSize: 17,\n          backgroundColor:\"\",\n          lineColor:\"#000\"\n        };\n        scope.$watch(function(){\n          return scope.value;\n        },function(newValue){\n          if(newValue){\n            JsBarcode(element[0], newValue, option);\n          }\n        },true)\n      }\n    }\n  });\n\n/**\n * Created by Centimitr on 2015/12/20.\n */\n'use strict';\n\nangular.module('DEVBYCM.cmToggle', [])\n  .directive('cmToggle', function (UtilSvc) {\n    return {\n      restrict: 'E',\n      template: '<div class=\"cmFormCollection cmToggle\">\\n  <label>\\n    {{label}}<input type=\"checkbox\" ng-model=\"model\">\\n  </label>\\n</div>',\n      scope: {\n        model: '=',\n        label: '@'\n      },\n      replace: true,\n      link: function (scope, element) {\n      }\n    }\n  })\n;\n\n/**\n * Created by Centimitr on 2015/12/20.\n */\n'use strict';\n\nangular.module('DEVBYCM.cmTextarea', [])\n  .directive('cmTextarea', function () {\n    return {\n      restrict: 'E',\n      template: '<div class=\"cmFormCollection cmTextarea\">\\n  <label>\\n    <textarea ng-model=\"model\"></textarea>\\n  </label>\\n</div>',\n      scope: {\n        model:'=',\n        required:'='\n      },\n      replace: true,\n      link: function (scope, element) {\n      }\n    }\n  })\n;\n\n/**\n * Created by Centimitr on 2015/12/20.\n */\n'use strict';\n\nangular.module('DEVBYCM.cmTable', [])\n  .directive('cmTable', function () {\n    return {\n      restrict: 'E',\n      template: '<table>\\n  <thead></thead>\\n  <tbody></tbody>\\n  <tfoot></tfoot>\\n</table>',\n      scope: {},\n      replace: true,\n      link: function (scope, element) {\n      }\n    }\n  })\n;\n\n/**\n * Created by Centimitr on 2015/12/20.\n */\n'use strict';\n\nangular.module('DEVBYCM.cmSelect', [])\n  .directive('cmSelect', function () {\n    return {\n      restrict: 'E',\n      template: '<div class=\"cmFormCollection cmSelect\" style=\"width: {{width}}\">\\n  <label>\\n    {{label}}\\n  </label>\\n  <div>\\n    <div>\\n      <ol class=\"nya-bs-select\" ng-model=\"model\"\\n          style=\"width: {{selectWidth}}\"\\n          title=\"请选择\"\\n          live-search=\"liveSearch===\\'true\\'\"\\n          disabled=\"options.length === 0\">\\n        <li ng-show=\"group\"\\n            nya-bs-option=\"option in  options group by option.group\"\\n            data-value=\"option.value\"\\n        >\\n          <span class=\"dropdown-header\">{{$group}}</span>\\n          <a><span>{{option.name}}</span><span class=\"\">1</span></a></li>\\n        <li ng-show=\"!group\"\\n            nya-bs-option=\"option in  options\"\\n            data-value=\"option.value\"\\n        ><span\\n          class=\"dropdown-header\">{{$group}}</span>\\n          <a><span>{{option.name}}</span><span class=\"\">1</span></a></li>\\n      </ol>\\n    </div>\\n  </div>\\n</div>',\n      scope: {\n        model:'=',\n        options:'=',\n        width:'@',\n        label:'@',\n        liveSearch:'@'\n      },\n      replace: true,\n      link: function (scope, element) {\n      }\n    }\n  })\n;\n\n/**\n * Created by Centimitr on 2015/12/20.\n */\n'use strict';\n\nangular.module('DEVBYCM.cmRadio', [])\n  .directive('cmRadio', function (UtilSvc) {\n    return {\n      restrict: 'E',\n      template: '<div class=\"cmFormCollection cmRadio\">\\n  <label ng-repeat=\"option in options\">\\n    <input type=\"radio\" name=\"{{name}}\" ng-init=\"value[$index]=model\" ng-model=\"value[$index]\" ng-click=\"funcUpdateModel(value[$index])\" ng-value=\"option\">{{option}}\\n  </label>\\n</div>',\n      scope: {\n        model:'=',\n        options:'='\n      },\n      replace: true,\n      link: function (scope, element) {\n        scope.name = UtilSvc.random(16,8,true,false);\n        scope.funcUpdateModel = function(value){\n          scope.model=value;\n        }\n      }\n    }\n  })\n;\n\n/**\n * Created by Centimitr on 2015/12/20.\n */\n'use strict';\n\nangular.module('DEVBYCM.cmInput', [])\n  .directive('cmInput', function () {\n    return {\n      restrict: 'E',\n      template: '<div class=\"cmFormCollection cmInput\">\\n  <label>\\n    <input type=\"{{type}}\" ng-model=\"model\" required=\"{{required}}\">\\n  </label>\\n</div>',\n      scope: {\n        model:'=',\n        type:'@',\n        required:'='\n      },\n      replace: true,\n      link: function (scope, element) {\n      }\n    }\n  })\n;\n\n/**\n * Created by Centimitr on 2015/12/20.\n */\n'use strict';\n\nangular.module('DEVBYCM.cmCheckbox', [])\n  .directive('cmCheckbox', function (UtilSvc) {\n    return {\n      restrict: 'E',\n      template: '<div class=\"cmFormCollection cmCheckbox\">\\n  <label ng-repeat=\"option in options\">\\n    <input type=\"checkbox\" ng-model=\"value[$index]\" ng-click=\"funcUpdateModel(value[$index],index,option)\" ng-value=\"option\">{{option}}\\n  </label>\\n</div>',\n      scope: {\n        model: '=',\n        options: '='\n      },\n      replace: true,\n      link: function (scope) {\n        if(!angular.isArray(scope.model)){\n          scope.model = [];\n        }\n        scope.name = UtilSvc.random(16,8,true,false);\n        var funcFindOptionIndex = function(array,item){\n          for(var i =0;i<array.length;i++){\n            if(array[i]===item){\n              return i;\n            }\n          }\n          console.log('Cant find item in the array.')\n        };\n        scope.funcUpdateModel = function(value,index,option){\n          if(value){\n            scope.model.push(option);\n          }else{\n            if(angular.isNumber(funcFindOptionIndex(scope.model,option))){\n              scope.model.splice(funcFindOptionIndex(scope.model,option),1);\n            }\n          }\n        }\n      }\n    }\n  })\n;\n\n/**\n * Created by Centimitr on 2015/8/20.\n */\n'use strict';\n\nangular.module('RMI.UniversalServices', [])\n  .factory('UtilSvc',function(){\n    return {\n      'random':function(radix,digit,isUpperCase,isFillZero){\n        if(radix<1||radix>36||digit<0||digit>16){\n          console.log('UtilSvc.random Error: radix='+radix+' digit='+digit+' isUppercase='+isUpperCase+' isFillZero='+isFillZero);\n          return -1;\n        }\n        var random = Math.round(Math.random()*Math.pow(radix,digit)).toString(radix).toLowerCase();\n        if(isUpperCase){\n          random=random.toUpperCase()\n        }\n        if(isFillZero&&random.length!==(digit-1)){\n          random = random + (new Array(digit-random.length).join('0'));\n        }\n        return random;\n      }\n    };\n  })\n  .factory('KVStoreSvc', function ($rootScope,$q,$http,SERVER_URL) {\n    var SERVER_KVSTORE_URL = SERVER_URL+'kvstore/';\n    return {\n      'create':function(k,v){\n        var deferred = $q.defer();\n        $http.post(SERVER_KVSTORE_URL+k+'/',angular.toJson(v))\n          .success(function(v){\n          deferred.resolve(angular.fromJson(v));\n        }).error(function(error){\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'read':function(k){\n        var deferred = $q.defer();\n        $http.get(SERVER_KVSTORE_URL+k+'/')\n          .success(function(v){\n          deferred.resolve(angular.fromJson(v));\n        }).error(function(error){\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'update':function(k,v){\n        var deferred = $q.defer();\n        $http.put(SERVER_KVSTORE_URL+k+'/',angular.toJson(v))\n          .success(function(v){\n          deferred.resolve(angular.fromJson(v));\n        }).error(function(error){\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'delete':function(k){\n        var deferred = $q.defer();\n        $http.delete(SERVER_KVSTORE_URL+k+'/')\n          .success(function(v){\n          deferred.resolve(angular.fromJson(v));\n        }).error(function(error){\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      }\n    }\n  })\n  .factory('SQLQuerySvc',function($q,$http,SERVER_URL){\n    return {\n      'query':function(sql){\n        var deferred = $q.defer();\n        $http.get(SERVER_URL+'sqlquery',{'params':{'sql':sql}})\n          .success(function(ResultSet){\n            deferred.resolve(ResultSet);\n          }).error(function(error){\n            deferred.reject(error)}\n        );\n        return deferred.promise;\n      }\n    };\n  })\n;\n\n/**\n * Created by Centimitr on 2015/5/10.\n */\n'use strict';\n\nangular.module('RMI.ProcessServices', [])\n  .factory('FormSvc', function ($http, $rootScope, $state, $timeout, $q, SERVER_URL) {\n    return {\n      //界面数据相关\n      'stateParamsToFormTypeId': function (stateParams) {\n        return {\n          'daohuo': {\n            'shouhuobaogao': 'A01'\n          },\n          'zhuliao': {\n            'waiguan': 'B01',\n            'lihua': 'B02',\n            'shimoya': 'B03',\n            'yanseshougan': 'B04',\n            'zhuliaoruku': 'B05'\n          },\n          'fuliao': {\n            'shangbiao': 'C01',\n            'bugantie': 'C02',\n            'zhika': 'C03',\n            'huabian': 'C04',\n            'goupan': 'C05',\n            'tiaojiekou': 'C06',\n            'jiandai': 'C07',\n            'songjindai': 'C08'\n          }\n        }[stateParams.class][stateParams.type];\n      },\n      //从服务器获取数据\n      'fetchForms': function (ProcessTypeId, Rev, ProcessNodeTypeId) {\n        var deferred = $q.defer();\n        $http.get(SERVER_URL + 'forms/', {\n            params: {\n              'ProcessTypeId': ProcessTypeId,\n              'Rev': Rev,\n              'ProcessNodeTypeId': ProcessNodeTypeId\n            }\n          })\n          .success(function (Forms) {\n            angular.forEach(Forms,function(Form){\n              if(Form.Parameter&&angular.isString(Form.Parameter)){\n                Form.Parameter = angular.fromJson(Form.Parameter);\n              }\n            });\n            deferred.resolve(Forms);\n          })\n          .error(function (error) {\n            deferred.reject(error);\n          });\n        return deferred.promise;\n      },\n      'fetchForm': function (FormId) {\n        var deferred = $q.defer();\n        $http.get(SERVER_URL + 'forms/' + FormId + '/')\n          .success(function (Form) {\n              if(Form.Parameter&&angular.isString(Form.Parameter)){\n                Form.Parameter = angular.fromJson(Form.Parameter);\n              }\n            deferred.resolve(Form);\n          })\n          .error(function (error) {\n            deferred.reject(error);\n          });\n        return deferred.promise;\n      },\n      'fetchFormData': function (FormId) {\n        var deferred = $q.defer();\n        $http.get(SERVER_URL + 'forms/' + FormId + '/data/')\n          .success(function (FormData) {\n            deferred.resolve(FormData);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'fetchFormConfig':function(FormId){\n        var deferred = $q.defer();\n        $http.get(SERVER_URL + 'forms/' + FormId + '/config/')\n          .success(function (FormConfig) {\n            deferred.resolve(FormConfig);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      //保存数据到服务器\n      'saveFormDataToServer': function (FormId, formData, isAutoSave) {\n        var deferred = $q.defer();\n        $http.put(SERVER_URL + 'forms/' + FormId + '/data/', formData, {'params': {'autoSave': isAutoSave}})\n          .success(function () {\n            deferred.resolve();\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      //表单逻辑接口\n      'requestCreate': function (ArrivalSerialNumber, ProcessTypeId, Rev, ProcessNodeTypeId) {\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'forms/', {\n          'ArrivalSerialNumber': ArrivalSerialNumber,\n          'create': 'true',\n          'ProcessTypeId': ProcessTypeId,\n          'Rev': 0,\n          'ProcessNodeTypeId': ProcessNodeTypeId,\n          'Status': '2'\n        }).success(function (form) {\n          deferred.resolve(form);\n        }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'requestCancelEdit': function (FormId) {\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'forms/' + FormId + '/', {'Status': '1'})\n          .success(function (Form) {\n            deferred.resolve(Form);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'requestEdit': function (FormId) {\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'forms/' + FormId + '/', {'Status': '2'})\n          .success(function (Form) {\n            deferred.resolve(Form);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'requestConfirm': function (FormId) {\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'forms/' + FormId + '/', {'Status': '3'})\n          .success(function (Form) {\n            deferred.resolve(Form);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'requestSubmit': function (FormId) {\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'forms/' + FormId + '/', {'Status': '4'})\n          .success(function (form) {\n            deferred.resolve(form);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'requestAddToArrival': function (FormId) {\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'forms/' + FormId + '/', {'addToArrival': 'true'})\n          .success(function (Form) {\n            deferred.resolve(Form);\n          })\n          .error(function (error) {\n            deferred.reject(error);\n          });\n        return deferred.promise;\n      },\n      'requestAddToArrivalAndAddToProcess': function (FormId) {\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'forms/' + FormId + '/', {'addToArrivalAndAddToProcess': 'true'})\n          .success(function (Form) {\n            deferred.resolve(Form);\n          })\n          .error(function (error) {\n            deferred.reject(error);\n          });\n        return deferred.promise;\n      },\n      'requestSubmitAndAddToArrival': function (FormId) {\n        var _this = this;\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'forms/' + FormId + '/', {'Status': '4'})\n          .success(function (form) {\n            _this.requestAddToArrival(FormId).then(function () {\n              deferred.resolve(form);\n            }, function (error) {\n              deferred.reject(error);\n            });\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'requestSubmitAndAddToArrivalAndAddToProcess': function (FormId) {\n        var _this = this;\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'forms/' + FormId + '/', {'Status': '4'})\n          .success(function () {\n            _this.requestAddToArrivalAndAddToProcess(FormId).then(function (Form) {\n              deferred.resolve(Form);\n            }, function (error) {\n              deferred.reject(error);\n            });\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'updateFormTags': function (FormId, tags) {\n        var deferred = $q.defer();\n        $http.put(SERVER_URL + 'forms/' + FormId + '/tags/', tags)\n          .success(function (Form) {\n            deferred.resolve(angular.fromJson(Form));\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      }\n    };\n  })\n  .factory('ProcessSvc', function (SERVER_URL, $q, $http) {\n    var funcProcessDataTagsPatch = function (Processes) {\n      angular.forEach(Processes, function (Process) {\n        angular.forEach(Process['Nodes'], function (node) {\n          if (!angular.isArray(node.Form.Tags)) {\n            node.Form.Tags = angular.fromJson(node.Form.Tags);\n          }\n        });\n      });\n      return Processes;\n    };\n    return {\n      //操作Arrival相关使用的接口\n      '_DEPRECATED_fetchArrivals': function (Class) {\n        var deferred = $q.defer();\n        $http.get(SERVER_URL + 'arrivals/', {'params': {'Class': Class}})\n          .success(function (arrivals) {\n            deferred.resolve(arrivals);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      '_DEPRECATED_fetchProcessesByClass': function (Class) {\n        var deferred = $q.defer();\n        $http.get(SERVER_URL + 'processes/', {'params': {'Class': Class}})\n          .success(function (processes) {\n            deferred.resolve(funcProcessDataTagsPatch(processes));\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      '_DEPRECATED_requestAddToProcess': function (ArrivalSerialNumber) {\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'arrivals/' + ArrivalSerialNumber + '/', {'addToProcess': 'true'})\n          .success(function () {\n            deferred.resolve();\n          })\n          .error(function (error) {\n            deferred.reject(error);\n          });\n        return deferred.promise;\n      },\n      '_DEPRECATED_requestAddAllToProcess': function () {\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'arrivals/', {'addToProcess': 'true'})\n          .success(function () {\n            deferred.resolve();\n          })\n          .error(function (error) {\n            deferred.reject(error);\n          });\n        return deferred.promise;\n      },\n      //检验任务类型\n      'fetchProcessTypesByClass': function (Class) {\n        var deferred = $q.defer();\n        $http.get(SERVER_URL + 'processtypes/', {\n          'params': {'Class': Class},\n          'cache': true\n        }).success(function (processTypes) {\n          deferred.resolve(processTypes);\n        }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      //获取检验任务数据\n      'fetchProcess': function (ArrivalSerialNumber) {\n        var deferred = $q.defer();\n        $http.get(SERVER_URL + 'processes/' + ArrivalSerialNumber + '/')\n          .success(function (process) {\n            deferred.resolve(funcProcessDataTagsPatch([process])[0]);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'fetchProcessesByProcessTypeIdAndRev': function (ProcessTypeId, Rev, optionalOption) {\n        var deferred = $q.defer();\n        $http.get(SERVER_URL + 'processes/', {'params': {'ProcessTypeId': ProcessTypeId, 'Rev': Rev,'IsComplete':optionalOption.IsComplete}})\n          .success(function (processes) {\n            deferred.resolve(funcProcessDataTagsPatch(processes));\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'fetchProcessReference': function (ArrivalSerialNumber) {\n        var deferred = $q.defer();\n        $http.get(SERVER_URL + 'processes/' + ArrivalSerialNumber + '/references/')\n          .success(function (references) {\n            if (!angular.isArray(references)) {\n              references = angular.fromJson(references);\n            }\n            deferred.resolve(references);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'updateProcessCheckStatus':function(ArrivalSerialNumber,CheckStatus){\n        var deferred = $q.defer();\n        $http.put(SERVER_URL + 'processes/' + ArrivalSerialNumber + '/checkstatus', CheckStatus)\n          .success(function () {\n            deferred.resolve();\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'updateProcessIsComplete':function(ArrivalSerialNumber,IsComplete){\n        (IsComplete===true) && (IsComplete='true');\n        (IsComplete===false) && (IsComplete='false');\n        if(IsComplete!=='true'||IsComplete!=='false'||IsComplete!=='waiting'){\n          console.warn('IsComplete Value error: '+IsComplete);\n        }\n        IsComplete = angular.toJson(IsComplete);\n        var deferred = $q.defer();\n        $http.put(SERVER_URL + 'processes/' + ArrivalSerialNumber + '/iscomplete', IsComplete)\n          .success(function () {\n            deferred.resolve();\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      //操作检验步骤数据\n      'fetchProcessNodeTypes': function (ProcessTypeId, Rev) {\n        var deferred = $q.defer();\n        $http.get(SERVER_URL + 'processtypes/' + ProcessTypeId + '/processnodetypes/', {'params': {'Rev': Rev}})\n          .success(function (ProcessNodeTypes) {\n            deferred.resolve(ProcessNodeTypes);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'updateProcessNodeAvailableFlag': function (ArrivalSerialNumber, ProcessNodeTypeId, AvailableFlag) {\n        var deferred = $q.defer();\n        $http.put(SERVER_URL + 'processes/' + ArrivalSerialNumber + '/processnodes/' + ProcessNodeTypeId + '/availableflag', AvailableFlag)\n          .success(function () {\n            deferred.resolve();\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'updateProcessNodeCheckStatus':function(ArrivalSerialNumber,ProcessNodeTypeId,CheckStatus){\n        var deferred = $q.defer();\n        $http.put(SERVER_URL + 'processes/' + ArrivalSerialNumber + '/processnodes/' + ProcessNodeTypeId + '/checkstatus', CheckStatus)\n          .success(function () {\n            deferred.resolve();\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'updateProcessNodeConclusion':function(ArrivalSerialNumber,ProcessNodeTypeId,Conclusion){\n        var deferred = $q.defer();\n        $http.put(SERVER_URL + 'processes/' + ArrivalSerialNumber + '/processnodes/' + ProcessNodeTypeId + '/conclusion', Conclusion)\n          .success(function () {\n            deferred.resolve();\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      }\n    };\n  })\n  .filter('FormStatusFilter', function () {\n    return function (str) {\n      switch (str) {\n        case \"0\":\n          return \"未创建\";\n        case \"1\":\n          return \"待编辑\";\n        case \"2\":\n          return \"正在编辑\";\n        case \"3\":\n          return \"确认可提交\";\n        case \"4\":\n          return \"已提交\";\n        case undefined :\n          return \"未创建\";\n        default :\n          return \"读取出错\";\n      }\n    }\n  })\n  .filter('TrueFalseShiFouFilter', function () {\n    return function (str) {\n      if (str === 'true')return '是';\n      else if (str === 'false')return '否';\n      else if (str === true)return '是';\n      else return '否';\n    }\n  })\n  .filter('ProcessNodeStatusFilter', function () {\n    return function (str, Available, FormStatus, CheckStatus) {\n      FormStatus = +(FormStatus);\n      CheckStatus = +(CheckStatus);\n      if (!CheckStatus) {\n        CheckStatus = 0;\n      }\n      if (!FormStatus) {\n        FormStatus = 0;\n      }\n      if (!Available) return '不可用';\n      else {\n        if (angular.isUndefined(FormStatus)) {\n          return '可用';\n        } else {\n          FormStatus = parseInt(FormStatus);\n          switch (FormStatus) {\n            case 0:\n              return '可用';\n            case 1:\n              return '可用';\n            case 2:\n              return '编辑中';\n            case 3:\n              return '编辑中';\n            case 4:\n              switch (CheckStatus) {\n                case 0:\n                  return '待审核';\n                case 1:\n                  return '已完成';\n                case 2:\n                  return '审核不通过';\n              }\n              return '待审核';\n          }\n        }\n        return Available + FormStatus + CheckStatus;\n      }\n    }\n  })\n  .filter('ProcessIsCompleteFilter', function () {\n    return function (IsComplete){\n      IsComplete = angular.lowercase(IsComplete);\n      switch (IsComplete){\n        case \"true\":return \"是\";\n        case \"false\":return \"否\";\n        case \"waiting\":return \"等待最终审核\";\n        default : console.warn('IsComplete value error: '+IsComplete);\n      }\n    };\n  })\n  .filter('ProcessNodeAvailableFlagFilter', function () {\n    return function (AvailableFlag){\n      switch (AvailableFlag){\n        case 'default':return '自动开启';\n        case 'true':return '手动开启';\n        case 'false':return '手动禁用';\n      }\n      return AvailableFlag;\n    };\n  })\n;\n\n/**\n * Created by Centimitr on 2015/8/2.\n */\n'use strict';\n\nangular.module('RMI.ControlServices', [])\n  .factory('ControlDesignSvc', function ($http, $rootScope, $timeout, $q, SERVER_URL, KVStoreSvc) {\n    var KVStoreSourceKey = 'Form.Source';\n    //暂存服务\n    var presetConfig = {\n      'general': {\n        'process': {\n          'Id': 'X01',\n          'Name': '',\n          'Rev': 0,\n          'Class': '辅料',\n          'CompleteCondition': 'PN01.Status=4',\n          'Reference': '[{\"Id\":\"arrival\",\"Name\":\"shbg\",\"Order\":1,\"Visible\":true,\"Components\":[{\"Order\":1,\"Visible\":true,\"Type\":\"table\",\"Query\":\"select * from 123132\",\"Data\":[{\"a\":11,\"b\":22}],\"Relation\":{\"a\":\"yi\",\"b\":\"er\"}},{\"Order\":2,\"Visible\":true,\"Type\":\"map\",\"Data\":{\"a\":11,\"b\":22},\"Relation\":{\"a\":\"yi\",\"b\":\"er\"}},{\"Order\":3,\"Visible\":true,\"Type\":\"html\",\"Data\":\"<div>1</div>\"}]}]'\n        },\n        'form': {\n          'OptionalTags': ['Error.A', 'Error.B', 'Error.C']\n        },\n        'map': {\n          'Type': 'map',\n          'Style': 'flex',\n          'Show': 'true',\n          'QuickInitial': '(function(ref,util){var data={}; return data;})'\n        },\n        'table': {\n          'Type': 'table',\n          'Show': 'true',\n          'QuickInitial': '(function(ref,util){var data=[]; return data;})'\n        }\n      },\n      'item': {\n        'process': {\n          'Id': '',\n          'Order': null,\n          'Name': '',\n          'ProcessTypeId': '',\n          'Rev': '',\n          'Description': '',\n          'AvailableCondition': '1',\n          'FormConfig': []\n        },\n        'form': {\n          'Order': null,\n          'Type': 'map',\n          'Style': 'flex',\n          'Show': 'true',\n          'Config': '',\n          'DatabaseTableName': ''\n        },\n        'map': {\n          'Order': null,\n          'Name': '',\n          'LeftDescription': '',\n          'RightDescription': '',\n          'AttributeName': '',\n          'Row': '',//map use\n          'Group': '',//table use\n          'Width': '',\n          'Type': 'text',\n          'Sources': [],\n          'Options': [],\n          'min': null,\n          'max': null,\n          'ngMinlength': null,\n          'ngMaxlength': null,\n          'ngPattern': null,\n          'ngTrim': true,\n          'required': true,\n          'disabled': false,\n          'ngRequired': true,\n          'ngDisabled': false,\n          'ngChange': ''\n        },\n        'table': {\n          'Order': null,\n          'Name': '',\n          'AttributeName': '',\n          'Row': '',//map use\n          'Group': '',//table use\n          'Width': '',\n          'Type': 'text',\n          'Sources': [],\n          'Options': [],\n          'min': null,\n          'max': null,\n          'ngMinlength': null,\n          'ngMaxlength': null,\n          'ngPattern': null,\n          'ngTrim': true,\n          'required': true,\n          'disabled': false,\n          'ngRequired': true,\n          'ngDisabled': false,\n          'ngChange': ''\n        }\n      }\n    };\n    var cachedConfig = {\n      'table': {\n        'order': null,\n        'active': false,\n        'content': {\n          'general': presetConfig.general['table'],\n          'item': presetConfig.item['table'],\n          'items': []\n        }\n      },\n      'map': {\n        'order': '',\n        'active': false,\n        'content': {\n          'general': presetConfig.general['map'],\n          'item': presetConfig.item['map'],\n          'items': []\n        }\n      },\n      'form': {\n        'order': null,\n        'active': false,\n        'content': {\n          'general': presetConfig.general['form'],\n          'item': presetConfig.item['form'],\n          'items': []\n        }\n      },\n      'process': {\n        'order': null,\n        'active': false,\n        'content': {\n          'general': presetConfig.general['process'],\n          'item': presetConfig.item['process'],\n          'items': []\n        }\n      }\n    };\n    return {\n      //流程编辑逻辑使用\n      'getPresetConfig': function () {\n        return presetConfig;\n      },\n      'getCacheConfig': function (type) {\n        return cachedConfig[type];\n      },\n      'getCacheItemConfigByChildConfig': function (type) {\n        return {\n          'map': function (config) {\n            var itemConfig = config.content.general;\n            itemConfig.Config = config.content.items;\n            return itemConfig;\n          },\n          'table': function (config) {\n            var itemConfig = config.content.general;\n            itemConfig.Config = config.content.items;\n            return itemConfig;\n          },\n          'form': function (config) {\n            var itemConfig = {'FormConfig': {}};\n            itemConfig.FormConfig = config.content.general;\n            itemConfig.FormConfig.Components = config.content.items;\n            return itemConfig;\n          }\n        }[type](cachedConfig[type]);\n      },\n      'saveItemCacheConfig': function (type, item) {\n        item ? cachedConfig[type].content.item = item : 0;\n      },\n      'saveCacheConfig': function (type, items, general, order) {\n        cachedConfig[type].content.items = items;\n        general ? cachedConfig[type].content.general = general : 0;\n        order ? cachedConfig[type].order = order : 0;\n      },\n      'saveCacheConfigByFatherConfig': function (fatherConfigObj, type, order) {\n        var configParser = {\n          'map': function (fatherConfigObj) {\n            return {\n              'general': function () {\n                var fatherConfigObjCopy = angular.copy(fatherConfigObj);\n                delete fatherConfigObjCopy.Config;\n                return fatherConfigObjCopy;\n              }(),\n              'items': function () {\n                return fatherConfigObj.Config;\n              }()\n            };\n          },\n          'table': function (fatherConfigObj) {\n            return {\n              'general': function () {\n                var fatherConfigObjCopy = angular.copy(fatherConfigObj);\n                delete fatherConfigObjCopy.Config;\n                return fatherConfigObjCopy;\n              }(),\n              'items': fatherConfigObj.Config\n            };\n          },\n          'form': function (processConfigItem) {\n            return {\n              'general': function () {\n                var processConfigItemFormConfig = angular.copy(processConfigItem.FormConfig);\n                delete processConfigItemFormConfig['Components'];\n                return processConfigItemFormConfig;\n              }(),\n              'items': processConfigItem.FormConfig['Components']\n            };\n          },\n          'process': function (processConfig) {\n            return {\n              'items': processConfig\n            };\n          }\n        };\n        var config = configParser[type](fatherConfigObj);\n        this.saveCacheConfig(type, config.items, config.general, order);\n      },\n      //前后端流程配置数据交互\n      'fetchProcessTypes': function () {\n        var deferred = $q.defer();\n        $http.get(SERVER_URL + 'processtypes/').success(function (ProcessTypes) {\n          deferred.resolve(ProcessTypes);\n        }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'fetchProcessType': function (ProcessTypeId) {\n        var deferred = $q.defer();\n        $http.get(SERVER_URL + 'processtypes/' + ProcessTypeId + '/', {'params': {'Rev': 0}}).success(function (ProcessType) {\n          deferred.resolve(ProcessType);\n        }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'fetchProcessNodeTypes': function (ProcessTypeId, Rev) {\n        var deferred = $q.defer();\n        $http.get(SERVER_URL + 'processtypes/' + ProcessTypeId + '/processnodetypes/', {'params': {'Rev': Rev}})\n          .success(function (ProcessNodeTypes) {\n            deferred.resolve(ProcessNodeTypes);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'createProcessType': function (processTypeObj) {\n\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'processtypes/' + processTypeObj.Id + '/', processTypeObj)\n          .success(function (processTypeObj) {\n            deferred.resolve(processTypeObj);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'updateProcessType': function (processTypeId, processTypeObj) {\n        var deferred = $q.defer();\n        $http.put(SERVER_URL + 'processtypes/' + processTypeId + '/', processTypeObj)\n          .success(function (processTypeObj) {\n            deferred.resolve(processTypeObj);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'createProcessNodeType': function (processNodeTypeObj) {\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'processtypes/' + processNodeTypeObj.ProcessTypeId + '/processnodetypes/' + processNodeTypeObj.Id + '/', processNodeTypeObj)\n          .success(function (processNodeTypeObj) {\n            deferred.resolve(processNodeTypeObj);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'createProcessNodeTypes': function (processNodeTypeObjArr) {\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'processtypes/' + processNodeTypeObjArr[0].ProcessTypeId + '/processnodetypes/', processNodeTypeObjArr)\n          .success(function (processNodeTypeObjArr) {\n            deferred.resolve(processNodeTypeObjArr);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'updateProcessNodeTypes': function (processNodeTypeId, processNodeTypeObjArr) {\n        //因为新的Rev机制导致配置修改变成了添加新配置的模式，因此弃用原来的调用Create接口\n        return this.createProcessNodeTypes(processNodeTypeObjArr);\n        /*        var deferred = $q.defer();\n         $http.put(SERVER_URL + 'processtypes/' + processNodeTypeId + '/processnodetypes/', processNodeTypeObjArr)\n         .success(function (processNodeTypeObjArr) {\n         deferred.resolve(processNodeTypeObjArr);\n         }).error(function (error) {\n         deferred.reject(error);\n         });\n         return deferred.promise;*/\n      },\n      //manage subclass configuration\n      'fetchSubclasses': function () {\n        var deferred = $q.defer();\n        $http.get(SERVER_URL + 'processtypes/subclasses/')\n          .success(function (Subclasses) {\n            deferred.resolve(Subclasses);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'createSubclass': function (subclass) {\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'processtypes/subclasses/', subclass)\n          .success(function (Subclasses) {\n            deferred.resolve(Subclasses);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'deleteSubclass': function (subclassId) {\n        var deferred = $q.defer();\n        $http.delete(SERVER_URL + 'processtypes/subclasses/' + subclassId + '/')\n          .success(function (info) {\n            deferred.resolve(info);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      //选项来源数据存储与交互\n      'createSourceToKVStore': function (source) {\n        var deferred = $q.defer();\n        KVStoreSvc.read(KVStoreSourceKey).then(function (Sources) {\n          angular.forEach(Sources, function (v) {\n            if (v.Name === Sources.Name) {\n              deferred.reject('Sources Name Existed.');\n            }\n          });\n          KVStoreSvc.update(KVStoreSourceKey, Sources.concat([source])).then(function (Sources) {\n            deferred.resolve(Sources);\n          }, function (error) {\n            deferred.reject(error);\n          });\n        }, function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'deleteSourceFromKVStore': function (sourceName) {\n        var deferred = $q.defer();\n        KVStoreSvc.read(KVStoreSourceKey).then(function (Sources) {\n          angular.forEach(Sources, function (v, k) {\n            if (v.Name === sourceName) {\n              Sources.splice(k, 1);\n            }\n          });\n          KVStoreSvc.update(KVStoreSourceKey, Sources).then(function (newSources) {\n            deferred.resolve(newSources);\n          }, function (error) {\n            deferred.reject(error);\n          });\n        }, function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      },\n      'readSourcesFromKVStore': function () {\n        var deferred = $q.defer();\n        KVStoreSvc.read(KVStoreSourceKey).then(function (Sources) {\n          deferred.resolve(Sources);\n        }, function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      }\n    };\n  })\n  .factory('ControlFeedbackSvc', function ($http, $q, SERVER_URL) {\n    return {\n      'createFeedback': function (feedback) {\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'feedback/', feedback)\n          .success(function (data) {\n            deferred.resolve(data);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      }\n    };\n  })\n  .factory('ControlOperationSvc', function ($http, $q, SERVER_URL) {\n    return {\n      'fetchOperations': function (userId, top) {\n        if (!top) {\n          top = 1000;\n        }\n        userId = 'User';\n        var deferred = $q.defer();\n        $http.get(SERVER_URL + 'users/' + userId + '/operations/', {'params': {'top': top}})\n          .success(function (data) {\n            deferred.resolve(data);\n          }).error(function (error) {\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      }\n    };\n  })\n  .factory('ControlUserSvc', function ($http, $q, SERVER_URL) {\n    return {\n      'fetchUsers': function () {\n        var deferred = $q.defer();\n        $http.get(SERVER_URL+'users/')\n          .success(function(Users){\n            deferred.resolve(Users);\n          }).error(function(error){\n          deferred.reject(error);\n        });\n        return deferred.promise;\n      }\n    };\n  })\n  .filter('FormProcessChineseFilter', function () {\n    return function (str) {\n      if (str === 'form' || str === 'Form') {\n        return '表单'\n      }\n      else if (str === 'process' || str === 'Process') {\n        return '表单'\n      }\n    }\n  })\n;\n\n/**\n * Created by Centimitr on 2015/9/7.\n */\n\n'use strict';\n\nangular.module('RMI.HomeServices', [])\n  .factory('LoginSvc', function ($q, $http, SERVER_URL,cmLoginSvc, AccountSvc,$interval,$timeout) {\n    var isLoggedIn = false;\n    //var isLoggedIn = true;\n    var funcCheckAndShowLoginPanel = function(){\n      if(!isLoggedIn){\n        cmLoginSvc.show();\n      }\n    };\n    $timeout(function(){\n      funcCheckAndShowLoginPanel();\n    });\n    $interval(function(){\n      funcCheckAndShowLoginPanel();\n    },5*60*1000);\n    return {\n      'isLoggedIn': function () {\n        return isLoggedIn;\n      },\n      'login': function (userId, password) {\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'users/' + userId + '/login/', {'Id': userId, 'Password': password})\n          .success(function (User) {\n            isLoggedIn = true;\n            //保存当前用户\n            AccountSvc.setCurrentUser(User);\n            deferred.resolve(User);\n          })\n          .error(function (error) {\n            deferred.reject(error);\n          });\n        return deferred.promise;\n      },\n      'logout': function () {\n        var userId = AccountSvc.currentUser().Id;\n        var deferred = $q.defer();\n        $http.post(SERVER_URL + 'users/' + userId + '/logout/')\n          .success(function () {\n            isLoggedIn = false;\n            deferred.resolve();\n            $timeout(function(){\n              funcCheckAndShowLoginPanel();\n            },1000);\n          })\n          .error(function () {\n            deferred.reject();\n          });\n        return deferred.promise;\n      },\n      'getSavedUsers': function () {\n        var savedUsers = angular.fromJson(localStorage.getItem('Account.SavedUsers'));\n        if (!angular.isArray(savedUsers)) {\n          savedUsers = [];\n        }\n        return savedUsers;\n      },\n      'setSavedUsers': function (outerSavedUsers) {\n        if (angular.isArray(outerSavedUsers)) {\n          localStorage.setItem('Account.SavedUsers', angular.toJson(outerSavedUsers));\n        }\n      }\n    };\n  })\n  .factory('AccountSvc', function ($state, $rootScope) {\n      var defaultUser = {\n        'Username': '未登录',\n        'Id': '?',\n        'Department': '?',\n        'Job': '?'\n      };\n      var currentUser = angular.copy(defaultUser);\n      //页面权限检查\n      var funcFetchUserPermissions = function () {\n        return [\n          //'Permission.UI.Control.EditProcess'\n        ];\n      };\n      var funcCheckPagePermission = function (curState) {\n        var matcherRules = {\n          'home.control.designProcess': 'Permission.UI.Control.EditProcess',\n          'home.control.designEditProcess': 'Permission.UI.Control.EditProcess',\n          'home.control.designEditForm': 'Permission.UI.Control.EditProcess',\n          'home.control.designEditTable': 'Permission.UI.Control.EditProcess',\n          'home.control.designEditMap': 'Permission.UI.Control.EditProcess',\n          'home.control.designSource': 'Permission.UI.Control.EditProcess'\n        };\n        var userPermissions = funcFetchUserPermissions();\n        var isBelongTo = function (set, entity) {\n          if (angular.isArray(set)) {\n            for (var i = 0; i < set.length; i++) {\n              if (set[i] === entity) {\n                return true;\n              }\n            }\n            return false;\n          }\n          console.error('Param set not an array.');\n          return false;\n        };\n        var isPageAccessPermitted = true;\n        angular.forEach(matcherRules, function (requiredPermission, state) {\n            if (curState.name === state) {\n              isPageAccessPermitted = isBelongTo(userPermissions, requiredPermission);\n            }\n          }\n        );\n        return isPageAccessPermitted;\n      };\n      $rootScope.$on('$stateChangeStart', function (event, toState, toParams) {\n        if (!funcCheckPagePermission(toState, toParams)) {\n          alert('您没有权限查看此页面！\\n如有疑问，请于系统管理->问题反馈中提交您的反馈');\n          event.preventDefault();\n        }\n      });\n      //加载用户设置\n      var userSettings = (function funcLoadUserSettings() {\n        return {\n          'UserSetting.UI.Process.List.DefaultProcessType': {\n            '收货': {\n              'Enable': false,\n              'ProcessTypeId': 'AR01',\n              'Rev': 0\n            },'主料': {\n              'Enable': false,\n              'ProcessTypeId': 'R01',\n              'Rev': 0\n            }, '辅料': {\n              'Enable': false,\n              'ProcessTypeId': 'R02',\n              'Rev': 0\n            }\n          }\n        };\n      })();\n      return {\n        'currentUser': function () {\n          return currentUser;\n        },\n        'getCurrentUser': function () {\n          return currentUser;\n        },\n        'setCurrentUser':function(user){\n          currentUser = user;\n        },\n        'getUserSetting': function (settingName) {\n          if (userSettings[settingName]) {\n            return userSettings[settingName];\n          } else {\n          }\n        },\n        'setUserSetting': function (settingName, value) {\n          userSettings[settingName] = value;\n        }\n      };\n    }\n  );\n\nangular.module(\"RMI\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/interaction/control/base.html\",\"<cm-side-menu-box><cm-side-menu><section class=\\\"category\\\"><h4>流程表单设计</h4><ul><li ui-sref-active=\\\"active\\\" ui-sref=\\\"home.control.designClassification\\\">检验任务分配规则</li></ul><h4>使用管理</h4><ul><li ui-sref-active=\\\"active\\\" ui-sref=\\\"home.control.user\\\">用户管理</li><li ui-sref-active=\\\"active\\\" ui-sref=\\\"home.control.operationRecord({top:500})\\\">操作记录</li></ul><h4>问题反馈</h4><ul><li ui-sref-active=\\\"active\\\" ui-sref=\\\"home.control.feedbackNew\\\">提交新问题</li></ul></section></cm-side-menu><div ui-view=\\\"\\\"></div></cm-side-menu-box>\");\n$templateCache.put(\"app/interaction/dashboard/index.html\",\"<style>\\n  .home-container{\\n    position: fixed;\\n    /*border-top: 1px dashed #DEDEDE;*/\\n    border-top: 2px solid #dddddd;\\n/*    top: 28px;right: 28px;\\n    bottom: 28px;left: 28px;\\n    border: 1px solid rgba(0, 90, 161, 0.4);\\n    box-shadow: 0 0 15px rgba(102, 175, 233, 0.4);*/\\n    top: 0;\\n    right: 0;\\n    bottom: 0;\\n    left: 0;\\n  }\\n  .content-container{\\n    position: absolute;\\n    /*top: 45px;*/\\n    top: 0;\\n    right: 0;\\n    bottom: 0;\\n    left: 0;\\n\\n  }\\n  .navbar{\\n    position: absolute;\\n    top: 0;\\n    right: 0;\\n    left: 0;\\n  }\\n  .main{\\n    /*padding-top: 52px;*/\\n  }\\n</style><div class=\\\"home-container\\\"><cm-login></cm-login><cm-loading></cm-loading><cm-nav-menu></cm-nav-menu><div class=\\\"content-container\\\"><div class=\\\"main\\\" ui-view=\\\"main\\\"></div></div></div>\");\n$templateCache.put(\"app/interaction/dashboard/main.html\",\"<cm-side-menu-box><cm-side-menu><section class=\\\"category\\\"><h4>登录信息</h4><ul><li>姓名：{{currentUser.Name}}</li><li>工号：{{currentUser.Id}}</li><li>部门：{{currentUser.Department}}</li><li>职务：{{currentUser.Job}}</li></ul></section><section class=\\\"category\\\"><br><h4>快捷信息</h4><ul><li ng-click=\\\"$parent.role=\\'luruyuan\\'\\\">仓库收货</li><li ng-click=\\\"$parent.role=\\'zhuliaojianyanyuan\\'\\\">主料检验</li><li ng-click=\\\"$parent.role=\\'fuliaojianyanyuan\\'\\\">辅料检验</li></ul></section><section class=\\\"category\\\" ng-if=\\\"false\\\"><h4>消息通知</h4><ul><li>新数据提示 12</li></ul></section></cm-side-menu><cm-side-menu-content class=\\\"tmp-home-main\\\"><cm-side-menu-content-header><section class=\\\"title\\\"><h2 title=\\\"{{version}}\\\">美山子原材料检验系统</h2></section><section class=\\\"toolbar\\\"><div class=\\\"button\\\" ui-sref=\\\"home.control.feedbackNew\\\">意见反馈</div><cm-person></cm-person></section></cm-side-menu-content-header><article><header><div class=\\\"jumbotron\\\"><h3><span class=\\\"ion-arrow-right-b\\\" style=\\\"padding-right: 16px\\\"></span>欢迎回来，{{currentUser.Name}} !</h3><p>现在是{{currentTime | date:\\' yyyy年MM月dd日 HH:mm:ss \\'}}，下面是与您相关的一些信息。</p><form class=\\\"form-inline\\\" style=\\\"margin: 4px auto 14px auto\\\" ng-submit=\\\"funcQuickGoProcess(quickGoProcessASN)\\\"><div class=\\\"form-group\\\"><label class=\\\"sr-only\\\"></label><div class=\\\"input-group\\\"><div class=\\\"input-group-addon\\\">流程编号</div><input type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"quickGoProcessASN\\\" autofocus=\\\"\\\"></div></div><button type=\\\"submit\\\" class=\\\"btn btn-primary\\\">快速跳转</button></form></div></header><section ng-init=\\\"role=\\'luruyuan\\'\\\" class=\\\"card-list\\\"><div ng-show=\\\"role===\\'luruyuan\\'\\\" class=\\\"row\\\"><div class=\\\"col-sm-4\\\"><div class=\\\"card card-block\\\" ng-click=\\\"funcAddArrivalForm()\\\"><h3 class=\\\"card-title\\\">添加收货报告</h3><p class=\\\"card-text\\\">点此添加新的收货报告记录</p></div></div><div class=\\\"col-sm-4\\\"><div class=\\\"card card-block\\\" ui-sref=\\\"home.process.formList({ \\'Class\\': \\'收货\\', \\'ProcessTypeId\\':\\'ARRIVAL\\', \\'ProcessNodeTypeId\\':undefined })\\\"><h3 class=\\\"card-title\\\">查看收货列表</h3><p class=\\\"card-text\\\">浏览已经创建的收货报告</p></div></div><div class=\\\"col-sm-4\\\" ui-sref=\\\"home.control.operationRecord({\\'top\\':500})\\\"><div class=\\\"card card-block\\\"><h3 class=\\\"card-title\\\">查看操作记录</h3><p class=\\\"card-text\\\">查阅您的最近的修改记录</p></div></div></div><div ng-show=\\\"role===\\'zhuliaojianyanyuan\\'\\\" class=\\\"row\\\"><div class=\\\"col-sm-4\\\"><div class=\\\"card card-block\\\" ui-sref=\\\"home.process.processList({ \\'Class\\': \\'主料\\', \\'ProcessTypeId\\':undefined, \\'ProcessNodeTypeId\\':undefined, \\'Rev\\':undefined })\\\"><h3 class=\\\"card-title\\\">查看主料检验队列</h3><p class=\\\"card-text\\\">查看待检验材料并进行检验录入</p></div></div><div class=\\\"col-sm-4\\\" ui-sref=\\\"home.control.operationRecord({\\'top\\':500})\\\"><div class=\\\"card card-block\\\"><h3 class=\\\"card-title\\\">查看操作记录</h3><p class=\\\"card-text\\\">查阅您的最近的修改记录</p></div></div></div><div ng-show=\\\"role===\\'fuliaojianyanyuan\\'\\\" class=\\\"row\\\"><div class=\\\"col-sm-4\\\"><div class=\\\"card card-block\\\" ui-sref=\\\"home.process.processList({ \\'Class\\': \\'辅料\\', \\'ProcessTypeId\\':undefined, \\'ProcessNodeTypeId\\':undefined, \\'Rev\\':undefined })\\\"><h3 class=\\\"card-title\\\">查看辅料检验队列</h3><p class=\\\"card-text\\\">查看待检验材料并进行检验录入</p></div></div><div class=\\\"col-sm-4\\\" ui-sref=\\\"home.control.operationRecord({\\'top\\':500})\\\"><div class=\\\"card card-block\\\"><h3 class=\\\"card-title\\\">查看操作记录</h3><p class=\\\"card-text\\\">查阅您的最近的修改记录</p></div></div></div></section><br></article></cm-side-menu-content></cm-side-menu-box>\");\n$templateCache.put(\"app/interaction/playground/main.html\",\"<cm-side-menu><cm-side-menu-content><<<<<<< HEAD<hr><div style=\\\"overflow-y: auto\\\"><table class=\\\"table table-bordered\\\"><thead></thead><tbody><tr><td rowspan=\\\"6\\\">试样描述</td><td>申请部门</td><td><cm-select options=\\\"[dep1,dep2,dep3]\\\" model=\\\"fromData.shenqingbumen\\\"></cm-select></td><td>申请日期</td><td><cm-input type=\\\"date\\\" model=\\\"fromData.shenqingriqi\\\"></cm-input></td></tr><tr><td>样品</td><td>1</td><td>2</td><td>3</td></tr><tr><td>款号</td><td><cm-input type=\\\"text\\\" model=\\\"fromData.kuanhao1\\\"></cm-input></td><td><cm-input type=\\\"text\\\" model=\\\"fromData.kuanhao2\\\"></cm-input></td><td><cm-input type=\\\"text\\\" model=\\\"fromData.kuanhao3\\\"></cm-input></td></tr><tr><td>颜色/数量</td><td><div class=\\\"ia-div-flex\\\"><cm-input class=\\\"ia-table-inline\\\" style=\\\"\\\" model=\\\"fromData.yanse1\\\"></cm-input><span style=\\\"margin-left: 5px;margin-right: 5px;font-size:14px\\\">/</span><cm-input model=\\\"fromData.shuliang1\\\" type=\\\"number\\\" class=\\\"ia-table-inline\\\"></cm-input></div></td><td class=\\\"\\\"><div class=\\\"ia-div-flex\\\"><cm-input class=\\\"ia-table-inline\\\" style=\\\"\\\" model=\\\"fromData.yanse2\\\"></cm-input><span style=\\\"margin-left: 5px;margin-right: 5px;font-size:14px\\\">/</span><cm-input model=\\\"fromData.shuliang2\\\" type=\\\"number\\\" class=\\\"ia-table-inline\\\"></cm-input></div></td><td class=\\\"\\\"><div class=\\\"ia-div-flex\\\"><cm-input class=\\\"ia-table-inline\\\" style=\\\"\\\" model=\\\"fromData.yanse3\\\"></cm-input><span style=\\\"margin-left: 5px;margin-right: 5px;font-size:14px\\\">/</span><cm-input model=\\\"fromData.shuliang3\\\" type=\\\"number\\\" class=\\\"ia-table-inline\\\"></cm-input></div></td></tr><tr><td colspan=\\\"4\\\"><span>洗涤目的：</span> <textarea></textarea></td></tr><tr><td colspan=\\\"4\\\">洗前描述： <textarea></textarea></td></tr><tr><td colspan=\\\"5\\\"><center><strong>洗涤方法选择</strong></center></td></tr><tr><td>程 序</td><td>温 度（℃）</td><td>转 数 （转/分钟）</td><td>烘 干</td><td>洗涤次数</td></tr><tr><td><cm-checkbox model=\\\"fromData.mianmazhiwu\\\" options=\\\"[\\'棉麻织物\\']\\\"></cm-checkbox></td><td><cm-checkbox model=\\\"fromData.mianmazhiwu_wendu\\\" options=\\\"[\\'冷水\\',\\'40\\',\\'60\\',\\'95\\']\\\"></cm-checkbox></td><td><cm-checkbox model=\\\"fromData.mianmazhiwu_zhuanshu\\\" options=\\\"[\\'400\\',\\'600\\',\\'800\\',\\'1000\\',\\'1200\\']\\\"></cm-checkbox></td><td><cm-checkbox model=\\\"fromData.mianmazhiwu_honggan\\\" options=\\\"[\\'标准\\',\\'强力\\',\\'低温\\',\\'轻微\\']\\\"></cm-checkbox></td><td><div class=\\\"ia-div-flex\\\"><cm-input class=\\\"ia-table-inline\\\" style=\\\"width: 30px\\\" model=\\\"fromData.mianmazhiwu_cishu\\\"></cm-input>次</div></td></tr><tr></tr><tr><td><cm-checkbox model=\\\"fromData.jingxizhiwu\\\" options=\\\"[\\'精细织物\\']\\\"></cm-checkbox></td><td><cm-checkbox model=\\\"fromData.jingxizhiwu_wendu\\\" options=\\\"[\\'冷水\\',\\'30\\',\\'40\\']\\\"></cm-checkbox></td><td><cm-checkbox model=\\\"fromData.jingxizhiwu_zhuanshu\\\" options=\\\"[\\'400\\',\\'600\\',\\'800\\']\\\"></cm-checkbox></td><td><cm-checkbox model=\\\"fromData.jingxizhiwu_honggan\\\" options=\\\"[\\'标准\\',\\'强力\\',\\'低温\\',\\'轻微\\']\\\"></cm-checkbox></td><td><div class=\\\"ia-div-flex\\\"><cm-input class=\\\"ia-table-inline\\\" style=\\\"width: 30px\\\" model=\\\"fromData.jingxizhiwu_cishu\\\"></cm-input>次</div></td></tr><tr><td><cm-checkbox model=\\\"fromData.renzaoxianwei\\\" options=\\\"[\\'人造纤维\\']\\\"></cm-checkbox></td><td><cm-checkbox model=\\\"fromData.renzaoxianwei_wendu\\\" options=\\\"[\\'冷水\\',\\'30\\',\\'40\\']\\\"></cm-checkbox></td><td><cm-checkbox model=\\\"fromData.renzaoxianwei_zhuanshu\\\" options=\\\"[\\'400\\',\\'600\\',\\'800\\',\\'1000\\']\\\"></cm-checkbox></td><td><cm-checkbox model=\\\"fromData.renzaoxianwei_honggan\\\" options=\\\"[\\'标准\\',\\'强力\\',\\'低温\\',\\'轻微\\']\\\"></cm-checkbox></td><td><div class=\\\"ia-div-flex\\\"><cm-input class=\\\"ia-table-inline\\\" style=\\\"width: 30px\\\" model=\\\"fromData.renzaoxianwei_cishu\\\"></cm-input>次</div></td></tr><tr><td><cm-checkbox model=\\\"fromData.kuaisuxi\\\" options=\\\"[\\'快速洗\\']\\\"></cm-checkbox></td><td><cm-checkbox model=\\\"fromData.kuaisuxi_wendu\\\" options=\\\"[\\'冷水\\',\\'30\\',\\'40\\']\\\"></cm-checkbox></td><td><cm-checkbox model=\\\"fromData.kuaisuxi_zhuanshu\\\" options=\\\"[\\'400\\',\\'600\\',\\'800\\',\\'1000\\']\\\"></cm-checkbox></td><td><cm-checkbox model=\\\"fromData.kuaisuxi_honggan\\\" options=\\\"[\\'标准\\',\\'强力\\', \\'低温\\',\\'轻微\\']\\\"></cm-checkbox></td><td><div class=\\\"ia-div-flex\\\"><cm-input class=\\\"ia-table-inline\\\" style=\\\"width: 30px\\\" model=\\\"fromData.kuaisuxi_cishu\\\"></cm-input>次</div></td></tr><tr><td rowspan=\\\"2\\\">其他洗涤要求</td><td colspan=\\\"4\\\"><cm-radio options=\\\"[\\'加洗涤剂\\',\\'不加洗涤剂\\']\\\" model=\\\"fromData.qitaxidiyaoqiu_xuanxiang\\\"></cm-radio></td></tr><tr><td colspan=\\\"4\\\"><textarea></textarea></td></tr><tr><td colspan=\\\"5\\\"><center><strong>水洗后情况描述</strong></center></td></tr><tr><td>1</td><td colspan=\\\"4\\\"><textarea></textarea></td></tr><tr><td>2</td><td colspan=\\\"4\\\"><textarea></textarea></td></tr><tr><td>3</td><td colspan=\\\"4\\\"><textarea></textarea></td></tr><tr><td colspan=\\\"5\\\">判定结果：<cm-radio options=\\\"[\\'合格\\',\\'不合格\\',\\'开发测试，不作判定\\']\\\"></cm-radio></td></tr><tr><td colspan=\\\"5\\\"><span style=\\\"color: dodgerblue;\\\">备注：检测仅对来样负责</span></td></tr><tr><td colspan=\\\"2\\\">测试员/日期：</td><td colspan=\\\"2\\\">审核/日期：</td><td colspan=\\\"2\\\">批准/日期：</td></tr></tbody></table></div>=======<section ng-init=\\\"input=\\'1\\';checkbox=\\'1\\';radio=\\'1\\';select=\\'1\\';\\\"><cm-input type=\\\"text\\\" model=\\\"input\\\"></cm-input>{{input}}<cm-input type=\\\"password\\\" model=\\\"input\\\"></cm-input>{{input}}<cm-checkbox options=\\\"[100,200,300,400]\\\" model=\\\"checkbox\\\"></cm-checkbox>{{checkbox}}<cm-radio options=\\\"[100,200,300,400]\\\" model=\\\"radio\\\"></cm-radio>{{radio}}<cm-select options=\\\"[100,200,300,400]\\\" model=\\\"select\\\"></cm-select>{{select}}<cm-toggle model=\\\"toggle\\\"></cm-toggle>{{toggle}}<cm-textarea model=\\\"textarea\\\"></cm-textarea>{{textarea}}</section>>>>>>>> origin/devbycm</cm-side-menu-content></cm-side-menu>\");\n$templateCache.put(\"app/components/ui/cmLoading/template.html\",\"<div class=\\\"cmLoading\\\"><div class=\\\"shade\\\" ng-if=\\\"isShow\\\"></div><div class=\\\"loading cm-animation-fade\\\" ng-if=\\\"false\\\"><div class=\\\"spinner spinner-lines\\\"><svg viewbox=\\\"0 0 64 64\\\"><g stroke-width=\\\"7\\\" stroke-linecap=\\\"round\\\"><line x1=\\\"10\\\" x2=\\\"10\\\" y2=\\\"48\\\" y1=\\\"16\\\"></line><animate attributename=\\\"y1\\\" dur=\\\"750ms\\\" values=\\\"16;18;28;18;16;16\\\" repeatcount=\\\"indefinite\\\"></animate><animate attributename=\\\"y2\\\" dur=\\\"750ms\\\" values=\\\"48;46;36;44;48;48\\\" repeatcount=\\\"indefinite\\\"></animate><animate attributename=\\\"stroke-opacity\\\" dur=\\\"750ms\\\" values=\\\"1;.4;.5;.8;1;1\\\" repeatcount=\\\"indefinite\\\"></animate><line x1=\\\"24\\\" x2=\\\"24\\\" y2=\\\"45.3897\\\" y1=\\\"17.3052\\\"></line><animate attributename=\\\"y1\\\" dur=\\\"750ms\\\" values=\\\"16;16;18;28;18;16\\\" repeatcount=\\\"indefinite\\\"></animate><animate attributename=\\\"y2\\\" dur=\\\"750ms\\\" values=\\\"48;48;46;36;44;48\\\" repeatcount=\\\"indefinite\\\"></animate><animate attributename=\\\"stroke-opacity\\\" dur=\\\"750ms\\\" values=\\\"1;1;.4;.5;.8;1\\\" repeatcount=\\\"indefinite\\\"></animate><line x1=\\\"38\\\" x2=\\\"38\\\" y2=\\\"38.7793\\\" y1=\\\"24.5258\\\"></line><animate attributename=\\\"y1\\\" dur=\\\"750ms\\\" values=\\\"18;16;16;18;28;18\\\" repeatcount=\\\"indefinite\\\"></animate><animate attributename=\\\"y2\\\" dur=\\\"750ms\\\" values=\\\"44;48;48;46;36;44\\\" repeatcount=\\\"indefinite\\\"></animate><animate attributename=\\\"stroke-opacity\\\" dur=\\\"750ms\\\" values=\\\".8;1;1;.4;.5;.8\\\" repeatcount=\\\"indefinite\\\"></animate><line x1=\\\"52\\\" x2=\\\"52\\\" y2=\\\"42.5258\\\" y1=\\\"21.4742\\\"></line><animate attributename=\\\"y1\\\" dur=\\\"750ms\\\" values=\\\"28;18;16;16;18;28\\\" repeatcount=\\\"indefinite\\\"></animate><animate attributename=\\\"y2\\\" dur=\\\"750ms\\\" values=\\\"36;44;48;48;46;36\\\" repeatcount=\\\"indefinite\\\"></animate><animate attributename=\\\"stroke-opacity\\\" dur=\\\"750ms\\\" values=\\\".5;.8;1;1;.4;.5\\\" repeatcount=\\\"indefinite\\\"></animate></g></svg></div></div><div class=\\\"pane cm-animation-fade\\\" ng-if=\\\"isShow\\\"><div class=\\\"content\\\"><span ng-if=\\\"status===\\'inProgress\\'\\\"></span> <span ng-if=\\\"status===\\'success\\'\\\"></span> <span ng-if=\\\"status===\\'error\\'\\\"></span> {{content}}</div></div></div>\");\n$templateCache.put(\"app/components/ui/cmLogin/template.html\",\"<div class=\\\"cmLogin\\\"><div class=\\\"shade\\\" ng-if=\\\"isShow\\\" ng-click=\\\"funcTryToClose()\\\"></div><div class=\\\"pane-a cm-animation-fade\\\" ng-if=\\\"isShow\\\"><header style=\\\"position: relative;\\\"><div class=\\\"close-button ion-ios-close\\\" ng-show=\\\"isLoggedIn\\\" ng-click=\\\"funcTryToClose()\\\"></div><br><br><div style=\\\"text-align: center\\\"><h3 style=\\\"text-shadow:0 0 2px #DDDDDD\\\">美山子原材料检验</h3></div></header><div class=\\\"content\\\" ng-controller=\\\"cmLoginCtrl\\\" ng-switch=\\\"uiWhichPanel\\\"><section class=\\\"switchPanel\\\" ng-switch-when=\\\"switch\\\"><div class=\\\"avatar-group\\\"><div class=\\\"avatar\\\" ng-repeat=\\\"user in savedUsers\\\" ng-mouseleave=\\\"uiCurrentHoverIndex=null\\\" ng-mouseenter=\\\"uiCurrentHoverIndex=$index\\\"><div class=\\\"remove ion-ios-close\\\" ng-show=\\\"user.Username&&uiCurrentHoverIndex===$index\\\" ng-click=\\\"funcRemoveUser($index)\\\"></div><div ng-click=\\\"funcDisplayUserLogin(user)\\\"><img ng-src=\\\"{{user.Avatar}}\\\"><div class=\\\"name\\\" ng-show=\\\"user.Username&&uiCurrentHoverIndex===$index\\\">{{user.Username}}</div></div></div></div><br><div class=\\\"description\\\" ng-show=\\\"savedUsers.length>0\\\">请选择一个用户以登陆<span ng-show=\\\"savedUsers.length<4\\\">，<a ng-click=\\\"funcDisplayNewUserLogin()\\\">或添加一个</a></span></div><div class=\\\"description\\\" ng-show=\\\"!savedUsers.length>0\\\">还没有存储的用户<span ng-show=\\\"savedUsers.length<4\\\">，<a ng-click=\\\"funcDisplayNewUserLogin()\\\">点此添加一个</a></span></div></section><section class=\\\"loginPanel\\\" ng-switch-when=\\\"login\\\"><form ng-submit=\\\"funcLogin()\\\"><div class=\\\"center\\\"><div style=\\\"margin-right: 25px\\\"><div class=\\\"avatar\\\" ng-mouseenter=\\\"uiIsHover=true\\\" ng-mouseleave=\\\"uiIsHover=false\\\"><img ng-src=\\\"{{selectedUser.Avatar}}\\\"><div class=\\\"name\\\" ng-show=\\\"uiIsHover\\\">{{selectedUser.Username}}</div></div></div><div class=\\\"login-form {{uiIsInputError?\\'has-error\\':\\'\\'}}\\\"><div><label><input type=\\\"text\\\" class=\\\"form-control above\\\" ng-model=\\\"selectedUser.Id\\\" ng-change=\\\"funcCancelInputErrorMark();funcUserIdChanged()\\\" autofocus=\\\"\\\" placeholder=\\\"工号\\\" required=\\\"\\\" ng-disabled=\\\"uiIsLoggingIn\\\"></label></div><hr><div><label><input type=\\\"password\\\" class=\\\"form-control below\\\" ng-model=\\\"selectedUser.Password\\\" ng-change=\\\"funcCancelInputErrorMark()\\\" placeholder=\\\"密码\\\" required=\\\"\\\" ng-disabled=\\\"uiIsLoggingIn\\\"></label></div><div class=\\\"options\\\"><label><input type=\\\"checkbox\\\" value=\\\"true\\\" checked=\\\"checked\\\" ng-model=\\\"selectedUser.AutoUpdateSavedUser\\\" ng-disabled=\\\"uiIsLoggingIn\\\"> <span>保存登录凭证</span></label> <label ng-show=\\\"savedUsers.length>0\\\"><span ng-show=\\\"uiIsLoggingIn\\\">其他用户</span> <a ng-show=\\\"!uiIsLoggingIn\\\" ng-click=\\\"funcCancelInputErrorMark();funcDisplayUserSwitch()\\\">其他用户</a></label></div></div></div><div class=\\\"form-group\\\"><br><button type=\\\"submit\\\" class=\\\"btn btn-primary login-button\\\" ng-disabled=\\\"uiIsLoggingIn\\\"><span ng-show=\\\"!uiIsLoggingIn\\\">登录</span> <span ng-show=\\\"uiIsLoggingIn\\\">正在登陆中...</span></button></div></form></section><section class=\\\"successPanel\\\" ng-switch-when=\\\"success\\\"><div class=\\\"success\\\"><span class=\\\"ion-checkmark-round\\\"></span>登陆成功！1秒后返回</div></section></div></div></div>\");\n$templateCache.put(\"app/components/ui/cmNavBar/template.html\",\"<div class=\\\"cmNavBar\\\" ng-controller=\\\"cmNavBarCtrl\\\"><div class=\\\"nav-part hide-style\\\"><span class=\\\"icon button ion-android-arrow-back {{canGoBack?\\'active\\':\\'\\'}}\\\" ng-click=\\\"goBack()\\\"></span><div class=\\\"current\\\" ng-click=\\\"toggleMenu()\\\"><span class=\\\"icon {{menuItem.icon||\\'ion-ios-photos-outline\\'}}\\\"></span> <span class=\\\"text\\\">{{menuItem.title||\\\"其他\\\"}}</span> <span class=\\\"down\\\"></span> <span class=\\\"down ion-ios-arrow-down\\\"></span></div></div><div class=\\\"title-part\\\" ng-if=\\\"false\\\"><div><span class=\\\"title\\\">{{title}}</span></div><div><span class=\\\"button active\\\">{{$state.$current.name}}</span> <span class=\\\"button active\\\" ng-if=\\\"\\\">反馈</span></div></div></div>\");\n$templateCache.put(\"app/components/ui/cmNavMenu/template.html\",\"<div class=\\\"cmNavMenu\\\"><div class=\\\"shade\\\" ng-if=\\\"show\\\" ng-click=\\\"close()\\\"></div><div class=\\\"triangle cm-animation-fade\\\" ng-if=\\\"show\\\"></div><div class=\\\"navMenu cm-animation-fade\\\" ng-if=\\\"show\\\"><div class=\\\"content\\\"><div class=\\\"block\\\"><div class=\\\"item\\\" ng-repeat=\\\"i in menuItems\\\" ng-click=\\\"goAndClose(i.state,i.params)\\\" ng-show=\\\"i.show\\\"><div class=\\\"icon {{i.icon}}\\\"></div><div class=\\\"label\\\">{{i.label}}</div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/ui/cmNotificationArea/template.html\",\"<div class=\\\"cmNotificationArea\\\"><div class=\\\"button {{uiIsPanelShow?\\'active\\':\\'\\'}}\\\" ng-click=\\\"uiIsPanelShow=!uiIsPanelShow\\\"><div class=\\\"item\\\"><span class=\\\"ion-android-person\\\"></span>{{currentUser.Name}}</div></div><div class=\\\"panel\\\" ng-show=\\\"uiIsPanelShow\\\"><div class=\\\"option\\\" ng-click=\\\"funcSwitchUser()\\\">切换用户</div><div class=\\\"option\\\" ng-click=\\\"funcLogout()\\\">退出登录</div></div></div>\");\n$templateCache.put(\"app/components/ui/cmSideMenuBox/template.html\",\"<div ng-transclude=\\\"\\\"></div>\");\n$templateCache.put(\"app/interaction/control/design/classification.html\",\"<cm-side-menu-content class=\\\"control\\\"><cm-side-menu-content-header><section class=\\\"title\\\">查看并修改原材料检验任务分配规则</section><section class=\\\"toolbar\\\"></section></cm-side-menu-content-header><section class=\\\"block\\\" ng-show=\\\"0\\\"><h4>添加新的对应</h4><section class=\\\"map\\\"><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">物料名称</div><div class=\\\"input\\\"><input type=\\\"text\\\"></div></div><div class=\\\"item\\\"><div class=\\\"name\\\">对应流程类型</div><div class=\\\"input\\\"><select name=\\\"\\\" id=\\\"\\\"></select></div></div></div></section><input class=\\\"btn btn-default\\\" type=\\\"submit\\\" id=\\\"submit\\\" value=\\\"添加\\\"></section><section class=\\\"block\\\"><h4>当前分配规则</h4><br><table class=\\\"table table-hover table-bordered\\\"><thead><tr><th>#</th><th>物料名称</th><th>流程类型</th><th>大类</th><th>操作</th></tr></thead><tbody><tr><td></td><td><label style=\\\"width: 100%;margin: 0;\\\"><input style=\\\"border: 0;\\\" type=\\\"text\\\" ng-model=\\\"subclass.Subclass\\\"></label></td><td><label style=\\\"width: 100%;margin: 0;\\\"><select style=\\\"border: 0;\\\" ng-model=\\\"subclass.ProcessTypeId\\\" ng-options=\\\"ProcessType.Id as (ProcessType.Name+\\' \\'+ProcessType.Id) group by ProcessType.Class for ProcessType in OptionalProcessTypes track by ProcessType.Name\\\"><option value=\\\"\\\" ng-show=\\\"!subclass.ProcessTypeId\\\">-- 请选择流程类型 --</option></select></label></td><td>-</td><td><a ng-click=\\\"funcSubmitSubclass(subclass)\\\">添加</a></td></tr><tr ng-repeat=\\\"subclass in subclasses\\\"><td>{{ $index+1 }}</td><td>{{subclass.Subclass}}</td><td>{{subclass.Name+\\' \\'+subclass.ProcessTypeId}}</td><td>{{subclass.Class}}</td><td><a ng-click=\\\"funcRemoveSubclass(subclass.Id)\\\">删除</a></td></tr></tbody></table></section></cm-side-menu-content>\");\n$templateCache.put(\"app/interaction/control/design/process.html\",\"<cm-side-menu-content class=\\\"control\\\"><cm-side-menu-content-header><section class=\\\"title\\\">查看并修改流程信息</section><section class=\\\"toolbar\\\"><div class=\\\"button\\\">添加新的流程</div><div class=\\\"button\\\" ui-sref=\\\"home.control.designEditProcess({\\'isEditCache\\':\\'cache\\'})\\\">进入缓存流程编辑</div></section></cm-side-menu-content-header><section class=\\\"block\\\" ng-if=\\\"false\\\"><h4>编辑流程基本信息</h4><section class=\\\"map\\\"><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">Id</div><input class=\\\"value\\\" type=\\\"text\\\"></div><div class=\\\"item\\\"><div class=\\\"name\\\">分类</div><input class=\\\"value\\\" type=\\\"text\\\"></div><div class=\\\"item\\\"><div class=\\\"name\\\">名称</div><input class=\\\"value\\\" type=\\\"text\\\"></div><div class=\\\"item\\\"></div></div><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">描述</div><input type=\\\"text\\\" class=\\\"value\\\" style=\\\"width: 67%;\\\"></div></div></section><input class=\\\"btn btn-default\\\" type=\\\"submit\\\" id=\\\"submit\\\" value=\\\"添加\\\"></section><section class=\\\"block\\\"><h4>当前流程列表</h4><br><table class=\\\"table table-hover table-bordered\\\"><thead><tr><th width=\\\"15%\\\">Id</th><th width=\\\"15%\\\">Rev</th><th width=\\\"15%\\\">分类</th><th width=\\\"15%\\\">名称</th><th width=\\\"40%\\\">描述</th><th width=\\\"15%\\\">操作</th></tr></thead><tbody><tr ng-repeat=\\\"processType in processTypes\\\"><td>{{processType.Id}}</td><td>{{processType.Rev}}</td><td>{{processType.Class}}</td><td>{{processType.Name}}</td><td>{{processType.Description}}</td><td><span style=\\\"cursor: pointer\\\" ng-click=\\\"funcEditProcess(processType.Id,processType.Rev)\\\">编辑</span></td></tr></tbody></table></section></cm-side-menu-content>\");\n$templateCache.put(\"app/interaction/control/design/source.html\",\"<cm-side-menu-content class=\\\"form-table control\\\"><cm-side-menu-content-header><section class=\\\"title\\\"><h2>配置选项数据来源</h2></section><section class=\\\"toolbar\\\"><div class=\\\"button {{uiIsAddPanelShow?\\'active\\':\\'\\'}}\\\" ng-click=\\\"$parent.uiIsAddPanelShow=!$parent.uiIsAddPanelShow\\\">添加新来源</div></section></cm-side-menu-content-header><section class=\\\"block\\\" ng-show=\\\"uiIsAddPanelShow\\\"><h4>新的选项数据来源</h4><form name=\\\"addNewCol\\\" ng-submit=\\\"funcCreateSource()\\\"><section class=\\\"map\\\"><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">来源描述</div><div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"config.Description\\\" placeholder=\\\"描述来源内容\\\" required=\\\"\\\"></div></div><div class=\\\"item\\\"><div class=\\\"name\\\">调用名</div><div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"config.Name\\\" placeholder=\\\"调用使用的名称，限字母\\\" required=\\\"\\\"></div></div><div class=\\\"item\\\"></div></div><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">类型</div><div><label title=\\\"字面量\\\"><input type=\\\"radio\\\" ng-model=\\\"config.Type\\\" id=\\\"inlineRadio1\\\" value=\\\"value\\\">字面量</label> <label title=\\\"SQL查询\\\"><input type=\\\"radio\\\" ng-model=\\\"config.Type\\\" id=\\\"inlineRadio2\\\" value=\\\"sql\\\" disabled=\\\"\\\">SQL查询</label> <label title=\\\"关联关系\\\"><input type=\\\"radio\\\" ng-model=\\\"config.Type\\\" id=\\\"inlineRadio3\\\" value=\\\"relation\\\" disabled=\\\"\\\">关联关系</label></div></div></div><div class=\\\"row\\\" ng-show=\\\"config.Type===\\'value\\'\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">可选值</div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"config.Value\\\" ng-list=\\\"\\\" placeholder=\\\"使用 , 分开多个选项\\\" style=\\\"width: 60%\\\"></div></div></section><input class=\\\"btn btn-default\\\" type=\\\"submit\\\" id=\\\"submit\\\" value=\\\"提交到服务器\\\"></form></section><section class=\\\"block\\\"><h4>存储的选项数据来源</h4><table class=\\\"table table-hover table-bordered table-condensed\\\"><thead><tr><th width=\\\"5%\\\">序号</th><th width=\\\"5%\\\">修改</th><th width=\\\"15%\\\">来源描述</th><th width=\\\"10%\\\">调用名</th><th width=\\\"10%\\\">类型</th><th width=\\\"55%\\\">可选值</th></tr></thead><tbody><tr ng-repeat=\\\"config in configs\\\"><td>{{$index+1}}</td><td ng-click=\\\"funcDeleteSource(config.Name)\\\" style=\\\"cursor: pointer;\\\">删除</td><td>{{config.Description}}</td><td>{{config.Name}}</td><td>{{config.Type}}</td><td>{{config.Value}}</td></tr><tr ng-show=\\\"!(configs.length>0)\\\"><td colspan=\\\"6\\\" style=\\\"height: 64px;text-align:center;line-height:64px;background-color: #F4F4F4;font-size: 15px\\\">服务器上还没有选项数据来源</td></tr></tbody></table></section><section class=\\\"block\\\"><pre>\\n      {{configs}}\\n    </pre></section></cm-side-menu-content>\");\n$templateCache.put(\"app/interaction/control/feedback/new.html\",\"<cm-side-menu-content><cm-side-menu-content-header><section class=\\\"title\\\"><h2>提交您的反馈</h2></section></cm-side-menu-content-header><section style=\\\"width: 67%;\\\"><form ng-submit=\\\"funcSubmitNewFeedback(feedback)\\\"><h5>主题</h5><input type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"feedback.Subject\\\"><br><h5>反馈内容</h5><textarea rows=\\\"15\\\" class=\\\"form-control\\\" style=\\\"resize: none\\\" ng-model=\\\"feedback.Content\\\" required=\\\"\\\"></textarea><br><button class=\\\"btn btn-default\\\">提交</button></form></section></cm-side-menu-content>\");\n$templateCache.put(\"app/interaction/control/operation/record.html\",\"<cm-side-menu-content><cm-side-menu-content-header><section class=\\\"title\\\"><h2>查看操作记录</h2></section></cm-side-menu-content-header><table class=\\\"table\\\"><thead><tr><th>时间</th><th>对象</th><th>描述</th><th>操作</th><th>用户名</th><th>IP</th></tr></thead><tbody><tr ng-repeat=\\\"operation in operations\\\"><td>{{operation.Time | date:\\'MM月dd日&nbsp;&nbsp;HH:mm \\'}}</td><td><a ng-click=\\\"funcGo(operation.Type,operation.Id)\\\">{{operation.Type | FormProcessChineseFilter}}&nbsp;{{operation.Id}}</a></td><td>{{operation.Description}}</td><td>{{operation.Operation}}</td><td>{{operation.Username}}</td><td>{{operation.IP}}</td></tr></tbody></table></cm-side-menu-content>\");\n$templateCache.put(\"app/interaction/control/user/all.html\",\"<cm-side-menu-content><cm-side-menu-content-header><section class=\\\"title\\\"><h2>用户管理</h2></section><section class=\\\"toolbar\\\"><div class=\\\"button\\\" ng-click=\\\"funcOpenUserModifyModal(emptyUser)\\\">添加新用户</div></section></cm-side-menu-content-header><section><table class=\\\"table table-content-vertical-middle\\\"><thead><tr><th>工号</th><th>姓名</th><th>部门</th><th>职务</th><th>权限</th><th>操作</th></tr></thead><tbody><tr ng-repeat=\\\"user in users\\\" style=\\\"width: 100%;\\\"><td style=\\\"min-width: 50px;\\\">{{user.Id}}</td><td style=\\\"min-width: 150px;\\\"><img ng-src=\\\"{{user.Avatar}}\\\" style=\\\"height: 24px;width: 24px;margin:0 10px 0 0\\\"> {{user.Username}}</td><td style=\\\"min-width: 100px;\\\">{{user.Department}}</td><td style=\\\"min-width: 100px;\\\">{{user.Job}}</td><td style=\\\"word-break: break-all\\\">{{user.Permission}}</td><td style=\\\"min-width: 100px;\\\"><a ng-click=\\\"funcOpenUserModifyModal(user)\\\">修改用户信息</a></td></tr></tbody></table></section></cm-side-menu-content>\");\n$templateCache.put(\"app/interaction/control/user/modify.html\",\"<div class=\\\"modal-header\\\"><div class=\\\"modal-title\\\">添加或修改用户</div></div><div class=\\\"modal-body\\\"><section class=\\\"form\\\"><form ng-submit=\\\"vm.onSubmit()\\\" name=\\\"vm.form\\\" novalidate=\\\"\\\"><formly-form model=\\\"vm.model\\\" fields=\\\"vm.fields\\\" options=\\\"vm.options\\\" form=\\\"vm.form\\\"><div class=\\\"button-row\\\"><button type=\\\"submit\\\" class=\\\"btn btn-primary submit-button pull-right\\\" ng-disabled=\\\"vm.form.$invalid\\\">提交</button></div></formly-form></form></section></div>\");\n$templateCache.put(\"app/interaction/process/detail/base.html\",\"<cm-side-menu-box><cm-side-menu style=\\\"width: 60px;box-sizing: border-box;font-size: 22px;\\\"><div style=\\\"height: 67%;display: flex;flex-direction:column;justify-content: center;\\\"><div ng-show=\\\"form.Status===\\'2\\'\\\"><ul ng-if=\\\"false\\\"><li class=\\\"{{uiIsReferencePanelShow?\\'active\\':\\'\\'}}\\\" ng-click=\\\"funcSwitchReferencePanel()\\\" style=\\\"padding: 0;\\\"><div class=\\\"ion-ios-bookmarks\\\" style=\\\"text-align: center;height: 100%;\\\" title=\\\"参考\\\"></div></li></ul><ul><li ng-click=\\\"funcSideSaveForm()\\\" style=\\\"padding: 0;\\\"><div class=\\\"ion-folder\\\" style=\\\"text-align: center;height: 100%;\\\" title=\\\"暂存\\\"></div></li></ul><ul><li class=\\\"{{option.all.isEditable?\\'\\':\\'active\\'}}\\\" ng-click=\\\"funcSideViewForm()\\\" style=\\\"padding: 0;\\\"><div class=\\\"ion-eye\\\" style=\\\"text-align: center;height: 100%;\\\" title=\\\"查看\\\"></div></li><li class=\\\"{{option.all.isEditable?\\'active\\':\\'\\'}}\\\" ng-click=\\\"funcSideEditForm()\\\" style=\\\"padding: 0;\\\"><div class=\\\"ion-edit\\\" style=\\\"text-align: center;height: 100%;\\\" title=\\\"编辑\\\"></div></li></ul><ul></ul></div><div ng-show=\\\"form.Status!==\\'2\\'\\\"><ul><li class=\\\"disabled\\\" style=\\\"padding: 0;\\\"><div class=\\\"ion-folder\\\" style=\\\"text-align: center;height: 100%;\\\" data-trigger=\\\"hover\\\" data-type=\\\"info\\\" data-title=\\\"保存\\\" bs-tooltip=\\\"\\\"></div></li></ul><ul><li class=\\\"disabled {{option.all.isEditable?\\'\\':\\'active\\'}}\\\" style=\\\"padding: 0;\\\"><div class=\\\"ion-eye\\\" style=\\\"text-align: center;height: 100%;\\\" data-trigger=\\\"hover\\\" data-type=\\\"info\\\" data-title=\\\"查看\\\" bs-tooltip=\\\"\\\"></div></li><li class=\\\"disabled {{option.all.isEditable?\\'active\\':\\'\\'}}\\\" style=\\\"padding: 0;\\\"><div class=\\\"ion-edit\\\" style=\\\"text-align: center;height: 100%;\\\" data-trigger=\\\"hover\\\" data-type=\\\"info\\\" data-title=\\\"编辑\\\" bs-tooltip=\\\"\\\"></div></li></ul><ul></ul></div></div></cm-side-menu><ng-include ng-if=\\\"state.current.name===\\'home.process.detailForm\\'\\\" src=\\\"\\'app/interaction/process/detail/form.html\\'\\\"></ng-include></cm-side-menu-box>\");\n$templateCache.put(\"app/interaction/process/detail/form.html\",\"<cm-side-menu-content style=\\\"left: 60px;\\\"><cm-side-menu-content-header><section class=\\\"form-infomation\\\"><div class=\\\"basic\\\">{{formInfo.Status | FormStatusFilter}}：{{formInfo.Id}}</div><div class=\\\"edit\\\" title=\\\"创建：由 {{formInfo.CreateUserName}} 在 {{formInfo.CreateTime | date:\\'MM/dd hh:mm:ss\\'}}\\\">最后修改：由 {{formInfo.LastModifiedUserName}} 在 {{formInfo.LastModifiedTime | date:\\'MM/dd hh:mm:ss\\'}}</div></section><section class=\\\"toolbar\\\"><div class=\\\"button\\\" ng-show=\\\"formInfo.Status===\\'2\\'&&!uiIsAutoSaveFormData\\\" ng-click=\\\"funcSaveToServer()\\\">暂存</div><div class=\\\"button disabled\\\" ng-show=\\\"formInfo.Status===\\'2\\'&&uiIsAutoSaveFormData\\\">自动暂存中...</div><div class=\\\"button\\\" ng-show=\\\"formInfo.Status===\\'2\\'\\\" ng-click=\\\"funcSubmitForm()\\\">提交表单</div></section></cm-side-menu-content-header><section class=\\\"block\\\" ng-show=\\\"uiIsReferencePanelShow&&references.length\\\"><div class=\\\"reference-switch\\\" style=\\\"display: flex;\\\"><div ng-repeat=\\\"ref in references\\\" class=\\\"switcher {{$index===uiCurrentActiveReferenceIndex?\\'active\\':\\'\\'}}\\\" ng-click=\\\"funcSwitchReference($index)\\\" title=\\\"{{ref.Id}}\\\">{{ref.Name}}</div></div><hr style=\\\"margin: 6px 0 12px 0;\\\"><ng-include src=\\\"\\'app/interaction/process/detail/reference.html\\'\\\"></ng-include></section><section ng-show=\\\"stateParams.ArrivalSerialNumber===\\'ARRIVAL\\'&&formInfo.Status===\\'4\\'\\\" style=\\\"padding: 12px;margin-bottom:12px;border: 1px solid #eaf2e0;border-radius: 2px;background-color: #f6f9f0;color: darkgreen;\\\"><div style=\\\"font-size: 16px;margin-bottom: 2px\\\">该收货报告有问题？<a ng-click=\\\"funcRedoForm(formInfo.Id)\\\">点击这里</a> <span style=\\\"opacity: 0.9;\\\">重新编辑该表单。</span></div><div style=\\\"opacity: 0.6;font-size: 14px\\\">提交后将重新生成检验任务，前后没有变化的检验任务不受到影响。</div><div style=\\\"opacity: 0.6;font-size: 14px\\\">该报告生成的检验任务链接： <a ng-repeat=\\\"asn in formInfo.Parameter.processes\\\" ui-sref=\\\"home.process.detailInfo({ArrivalSerialNumber:asn})\\\">{{asn}}</a></div></section><div><section style=\\\"padding: 12px;border: 1px solid #f2f2f2;border-radius: 2px;background-color: #f9f9f9\\\"><div ng-if=\\\"formConfig.fields\\\"><formly-form model=\\\"formData\\\" fields=\\\"formConfig.fields\\\" form=\\\"formConfig.form\\\" options=\\\"formConfig.options\\\"></formly-form></div><div ng-if=\\\"formConfig.template\\\"><cm-template-load template=\\\"{{formConfig.template}}\\\" model=\\\"formData\\\"></cm-template-load></div></section><section><br><pre>{{formData}}</pre></section></div></cm-side-menu-content>\");\n$templateCache.put(\"app/interaction/process/detail/info.html\",\"<cm-side-menu-box><cm-side-menu style=\\\"width: 60px;\\\"></cm-side-menu><cm-side-menu-content style=\\\"left: 60px;\\\" class=\\\"rmiProcessDetailInfo\\\"><cm-side-menu-content-header><section class=\\\"title\\\" style=\\\"display: flex\\\"><div style=\\\"margin: 5px 10px 0 0;\\\"><div class=\\\"cm-table-indicator-dot\\\" style=\\\"background-color: {{\\'#\\'+process.ArrivalSerialNumber}}\\\"></div></div><h2>{{\\'检验任务： \\'+process.TypeName+\\' ，由 \\'}}<a style=\\\"cursor: pointer;\\\" ng-click=\\\"funcViewSourceForm(process.SourceFormId)\\\">{{\\'收获报告#\\'+process.SourceFormId}}</a>{{\\'生成\\'}}</h2></section><section class=\\\"toolbar\\\"><div class=\\\"button\\\">打印该检验任务</div><div class=\\\"button\\\">打印条形码</div></section></cm-side-menu-content-header><section class=\\\"info\\\"><div class=\\\"info-part\\\"><h4>基本信息</h4><div class=\\\"info-container\\\"><div class=\\\"info-col\\\"><div class=\\\"info-kv\\\"><div class=\\\"key\\\">物料类型</div><div class=\\\"value\\\">{{process.TypeClass}}-{{process.TypeName}}-{{process.Parameter.wuliaomingcheng}}</div></div><div class=\\\"info-kv\\\"><div class=\\\"key\\\">供应商</div><div class=\\\"value\\\">{{process.Parameter.gongyingshang}}</div></div><div class=\\\"info-kv\\\"><div class=\\\"key\\\">货号</div><div class=\\\"value\\\">{{process.Parameter.huohao}}</div></div><div class=\\\"info-kv\\\"><div class=\\\"key\\\">颜色</div><div class=\\\"value\\\">{{process.Parameter.yanse}}</div></div></div><div class=\\\"info-col\\\"><div class=\\\"info-kv\\\"><div class=\\\"key\\\">开始时间</div><div class=\\\"value\\\">{{process.StartTime | date:\\'yyyy年M月d日&nbsp;&nbsp;HH:mm\\'}}</div></div><div class=\\\"info-kv\\\"><div class=\\\"key\\\">是否完成</div><div class=\\\"value\\\" title=\\\"{{process.IsComplete}}\\\">{{process.IsComplete|ProcessIsCompleteFilter}}<a ng-show=\\\"process.IsComplete===true||process.IsComplete===\\'true\\'\\\" ng-click=\\\"funcRedoComplete(process.ArrivalSerialNumber)\\\" style=\\\"margin-left: 8px\\\">撤销完成状态</a></div></div><div class=\\\"info-kv\\\" ng-show=\\\"process.IsComplete===\\'false\\'||process.IsComplete===\\'False\\'\\\" style=\\\"margin-top: 14px;\\\"><div class=\\\"value\\\"><button class=\\\"btn btn-default\\\" ng-click=\\\"funcMarkProcessWaiting(process.ArrivalSerialNumber)\\\">标记等待确认完成</button></div></div><div class=\\\"info-kv\\\" ng-show=\\\"process.IsComplete===\\'waiting\\'\\\" style=\\\"margin-top: 14px;\\\"><div class=\\\"value\\\"><button class=\\\"btn btn-default\\\" ng-click=\\\"funcMarkProcessComplete(process.ArrivalSerialNumber)\\\">标记检验完成</button></div></div><div class=\\\"info-kv\\\" ng-show=\\\"process.IsComplete===\\'true\\'\\\"><div class=\\\"key\\\">完成时间</div><div class=\\\"value\\\">{{process.CompleteTime | date:\\'yyyy年M月d日&nbsp;&nbsp;HH:mm\\'}}</div></div><div class=\\\"info-kv\\\" ng-show=\\\"process.IsComplete===\\'true\\'\\\"><div class=\\\"key\\\">流程时间</div><div class=\\\"value\\\" title=\\\"历时{{((+process.CompleteTime)-(+process.StartTime))/(24*60*60*1000)|number:1}}天\\\">{{((+process.CompleteTime)-(+process.StartTime))/(60*60*1000)|number:1}}&nbsp;小时</div></div></div></div></div><div class=\\\"info-part\\\"><h4>流水条形码</h4><div class=\\\"info-col\\\"><div class=\\\"info-kv\\\"><div class=\\\"value\\\"><cm-barcode value=\\\"process.ArrivalSerialNumber\\\"></cm-barcode></div></div></div></div></section><section><ul class=\\\"process-node-list\\\"><li class=\\\"process-node\\\" ng-repeat=\\\"Node in process.Nodes | orderBy:Node.Order\\\"><div class=\\\"process-node-container\\\"><header class=\\\"header\\\" ng-init=\\\"Node.uiCurrentStageTabCode=funcGetCurrentStageTabCode(Node.Available,Node.Form.Status,Node.CheckStatus); Node.uiActiveTabCode=Node.uiCurrentStageTabCode; Node.uiIsTabAvailable =[]; Node.uiIsTabAvailable[0]=true; Node.uiIsTabAvailable[1]=Node.Available&&(Node.uiCurrentStageTabCode!==0); Node.uiIsTabAvailable[2]=Node.Available&&(Node.uiCurrentStageTabCode===2||Node.uiCurrentStageTabCode===3); Node.uiIsTabAvailable[3]=Node.Available&&(Node.uiCurrentStageTabCode===3);\\\"><h4>{{Node.Name}} · {{1|ProcessNodeStatusFilter:Node.Available:Node.Form.Status:Node.CheckStatus}}</h4><div class=\\\"tabs\\\"><div class=\\\"tab {{(Node.uiIsTabAvailable[tab.code])?\\'\\':\\'disabled\\'}}\\\" ng-repeat=\\\"tab in [{\\'name\\':\\'启用\\',\\'code\\':0},{\\'name\\':\\'检验\\',\\'code\\':1},{\\'name\\':\\'审核\\',\\'code\\':2},{\\'name\\':\\'完成\\',\\'code\\':3}]\\\" ng-click=\\\"(Node.uiIsTabAvailable[tab.code])&&(Node.uiActiveTabCode=tab.code)\\\">{{tab.name}}<div ng-if=\\\"tab.code===Node.uiActiveTabCode\\\" class=\\\"tri ion-arrow-up-b\\\"></div></div></div><div ng-show=\\\"Node.Available\\\"><div ng-show=\\\"Node.Form.Status===undefined\\\"></div><div ng-show=\\\"Node.Form.Status!==undefined\\\"><div class=\\\"quick-edit-form\\\" ng-show=\\\"Node.Form.Status===null||Node.Form.Status===2||Node.Form.Status===\\'2\\'\\\" ng-click=\\\"funcEditForm(process.ArrivalSerialNumber,Node.Form.Id)\\\">快捷编辑</div><div class=\\\"quick-view-form\\\" ng-hide=\\\"Node.Form.Status===null||Node.Form.Status===2||Node.Form.Status===\\'2\\'\\\" ng-click=\\\"funcViewForm(process.ArrivalSerialNumber,Node.Form.Id)\\\">表单查看</div></div></div></header><div class=\\\"content\\\" ng-switch=\\\"Node.uiActiveTabCode\\\"><div ng-switch-when=\\\"0\\\"><div ng-switch=\\\"Node.Available\\\"><div ng-switch-when=\\\"true\\\"><h5>检验中 <span class=\\\"description\\\">当前项状态</span></h5><p>启用方式：{{Node.AvailableFlag |ProcessNodeAvailableFlagFilter}}</p><button ng-click=\\\"funcUpdateProcessNodeAvailableFlag(process.ArrivalSerialNumber,Node.Id,\\'default\\')\\\" class=\\\"btn btn-default\\\">恢复默认</button> <button ng-click=\\\"funcUpdateProcessNodeAvailableFlag(process.ArrivalSerialNumber,Node.Id,\\'true\\')\\\" class=\\\"btn btn-default\\\">手动启用</button> <button ng-click=\\\"funcUpdateProcessNodeAvailableFlag(process.ArrivalSerialNumber,Node.Id,\\'false\\')\\\" class=\\\"btn btn-default\\\">手动禁止</button></div><div ng-switch-when=\\\"false\\\"><p class=\\\"message\\\">该项当前不可用<br>您可以选择 <a ng-click=\\\"funcUpdateProcessNodeAvailableFlag(process.ArrivalSerialNumber,Node.Id,\\'true\\')\\\">手动启用</a></p></div><div ng-switch-default=\\\"\\\">PAGE DISPLAY ERROR.</div></div></div><div ng-switch-when=\\\"1\\\"><div ng-switch=\\\"Node.Form.Status\\\"><section ng-switch-when=\\\"undefined\\\"><h5>未创建 <span class=\\\"description\\\">编辑状态</span></h5><p><br></p><button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcShortcutCreateFormAndRequestEditFormAndEditForm(process.ArrivalSerialNumber,process.TypeId,process.Rev,Node.Id)\\\">创建并编辑</button></section><section ng-switch-when=\\\"0\\\"><h5>未创建 <span class=\\\"description\\\">编辑状态</span></h5><p>还未创建该检验项的报告</p><button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcShortcutCreateFormAndRequestEditFormAndEditForm(process.ArrivalSerialNumber,process.TypeId,process.Rev,Node.Id)\\\">创建并编辑</button></section><section ng-switch-when=\\\"2\\\"><h5>编辑中 <span class=\\\"description\\\">编辑状态</span></h5><p></p><div style=\\\"line-height: 22px;color: #666;\\\"><div>创建：{{Node.Form.CreateUserName}} {{Node.Form.CreateTime | date:\\'yyyy年MM月dd日 hh:mm\\'}}</div><div>最后编辑： {{Node.Form.LastModifiedUserName}}{{Node.Form.LastModifiedTime | date:\\'yyyy年MM月dd日 hh:mm\\'}}</div></div><p></p><button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcShortcutRequestEditFormAndEditForm(process.ArrivalSerialNumber,Node.Form.Id)\\\">编辑</button> <button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcViewForm(process.ArrivalSerialNumber,Node.Form.Id)\\\">查看</button> <button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcShortcutConfirmFormAndSubmitForm(Node.Form.Id)\\\">提交</button><br><div><h5>检验结论<span class=\\\"description\\\"></span></h5><label><input type=\\\"radio\\\" ng-model=\\\"Node.Conclusion\\\" value=\\\"空\\\">空</label> <label><input type=\\\"radio\\\" ng-model=\\\"Node.Conclusion\\\" value=\\\"合格\\\">合格</label> <label><input type=\\\"radio\\\" ng-model=\\\"Node.Conclusion\\\" value=\\\"不合格\\\">不合格</label> {{Node.Conclusion}} <button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcUpdateProcessNodeConclusion(process.ArrivalSerialNumber,Node.Id,Node.Conclusion)\\\">提交修改</button></div></section><section ng-switch-when=\\\"4\\\"><h5>已提交 <span class=\\\"description\\\">编辑状态</span></h5><p>检验报告已提交，等待审核</p><div style=\\\"line-height: 22px;color: #666;\\\"><div>创建：{{Node.Form.CreateUserName}} {{Node.Form.CreateTime | date:\\'yyyy年MM月dd日 hh:mm\\'}}</div><div>最后编辑： {{Node.Form.LastModifiedUserName}}{{Node.Form.LastModifiedTime | date:\\'yyyy年MM月dd日hh:mm\\'}}</div></div><p></p><button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcViewForm(process.ArrivalSerialNumber,Node.Form.Id)\\\">查看</button> <button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcRedoForm(Node.Form.Id)\\\">撤销提交</button></section><section ng-switch-default=\\\"\\\">PAGE DISPLAY ERROR.</section></div></div><div ng-switch-when=\\\"2\\\"><div ng-switch=\\\"Node.CheckStatus\\\"><section ng-switch-when=\\\"undefined\\\"><h5>未审核 <span class=\\\"description\\\">审核状态</span></h5><p>检验报告已提交，等待审核</p><p>检验结论： {{Node.Conclusion}}</p><button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcViewForm(process.ArrivalSerialNumber,Node.Form.Id)\\\">查看</button> <button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcCheckPass(process.ArrivalSerialNumber,Node.Id)\\\">审核通过</button> <button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcCheckDeny(process.ArrivalSerialNumber,Node.Id)\\\">审核不通过</button></section><section ng-switch-when=\\\"0\\\"><h5>未审核 <span class=\\\"description\\\">审核状态</span></h5><p>检验报告已提交，等待审核</p><p>检验结论： {{Node.Conclusion}}</p><button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcViewForm(process.ArrivalSerialNumber,Node.Form.Id)\\\">查看</button> <button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcCheckPass(process.ArrivalSerialNumber,Node.Id)\\\">审核通过</button> <button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcCheckDeny(process.ArrivalSerialNumber,Node.Id)\\\">审核不通过</button></section><section ng-switch-when=\\\"1\\\"><h5>审核通过<span class=\\\"description\\\">审核状态</span></h5><p>检验报告已完成审核，该检验项完成</p><p>检验结论： {{Node.Conclusion}}</p><div style=\\\"line-height: 16px;color: #666;\\\"><div>审核人：{{Node.CheckUserName}} {{Node.CheckTime | date:\\'yyyy年MM月dd日 hh:mm\\'}}</div></div><p></p><button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcViewForm(process.ArrivalSerialNumber,Node.Form.Id)\\\">查看</button> <button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcRedoCheck(process.ArrivalSerialNumber,Node.Id)\\\">撤销审核</button></section><section ng-switch-when=\\\"2\\\"><h5>审核不通过<span class=\\\"description\\\">审核状态</span></h5><p>检验报告已完成审核，该检验项完成</p><p>检验结论： {{Node.Conclusion}}</p><button class=\\\"btn btn-block btn-default\\\">查看</button> <button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcRedoCheck(process.ArrivalSerialNumber,Node.Id)\\\">撤销审核</button></section><section ng-switch-default=\\\"\\\"><h5>未审核 <span class=\\\"description\\\">审核状态</span></h5><p>检验报告已提交，等待审核</p><p>检验结论： {{Node.Conclusion}}</p><button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcViewForm(process.ArrivalSerialNumber,Node.Form.Id)\\\">查看</button> <button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcCheckPass(process.ArrivalSerialNumber,Node.Id)\\\">审核通过</button> <button class=\\\"btn btn-block btn-default\\\" ng-click=\\\"funcCheckDeny(process.ArrivalSerialNumber,Node.Id)\\\">审核不通过</button></section></div></div><div ng-switch-when=\\\"3\\\"><p>检验结论： {{Node.Conclusion}}</p><p class=\\\"message\\\">该项检验已经完成<br>点击上方选项来查看详情<br><br>有问题？<a ng-click=\\\"funcRedoFormAndCheck(process.ArrivalSerialNumber,Node.Id,Node.Form.Id)\\\">重做该检验项</a></p></div></div></div></li></ul></section></cm-side-menu-content></cm-side-menu-box>\");\n$templateCache.put(\"app/interaction/process/detail/reference.html\",\"<div ng-show=\\\"uiIsReferenceShow\\\"><div style=\\\"display:flex;flex-flow: row wrap;align-items: stretch; justify-content: space-between;\\\"><h4>{{currentReference.Name}}</h4><div style=\\\"opacity: 0.6;cursor: pointer;\\\" ng-click=\\\"funcHideReference()\\\">关闭</div></div><br><div ng-repeat=\\\"Component in currentReference.Components\\\" ng-switch=\\\"Component.Type\\\">{{($index+1)+\\'. \\'}}{{Component.Name}}<div ng-switch-when=\\\"table\\\"><table class=\\\"table\\\"><thead><tr><th ng-repeat=\\\"(Id,Name) in Component.Relation\\\">{{Name}}</th></tr></thead><tbody><tr ng-repeat=\\\"row in Component.Data\\\"><td ng-repeat=\\\"(Id,Value) in row\\\">{{Value}}</td></tr></tbody></table></div><div ng-switch-when=\\\"map\\\"><table class=\\\"table\\\"><thead><tr><th ng-repeat=\\\"(Id,Value) in Component.Relation\\\">{{Value}}</th></tr></thead><tbody><tr><td ng-repeat=\\\"(Id,Value) in Component.Data\\\">{{Value}}</td></tr></tbody></table></div><div ng-switch-when=\\\"html\\\" ng-bind-html=\\\"Component.Data\\\"></div></div></div><div ng-hide=\\\"1||uiIsReferenceShow\\\">请选择要查看的参考数据</div>\");\n$templateCache.put(\"app/interaction/process/list/base.html\",\"<cm-side-menu-box><cm-side-menu ng-switch=\\\"stateParams.Class\\\"><div ng-switch-when=\\\"收货\\\"><section class=\\\"category\\\"><ul><li ng-click=\\\"funcCreateForm()\\\" style=\\\"border-bottom: 1px solid #dddddd;\\\"><span class=\\\"ion-plus-round\\\" style=\\\"margin-right: 12px\\\"></span>添加收货报告</li></ul></section><section class=\\\"category\\\"><h4>收货报告类型</h4><ul><li ng-show=\\\"!sideMenuList.length&&!uiIsSideMenuListLoaded\\\">加载中...</li><li ng-show=\\\"!sideMenuList.length&&uiIsSideMenuListLoaded\\\">暂无数据</li><li ng-show=\\\"sideMenuList.length\\\" ui-sref-active=\\\"active\\\" ui-sref=\\\"home.process.formList({Class:\\'收货\\',ProcessTypeId:\\'ARRIVAL\\',Rev:\\'0\\',ProcessNodeTypeId:\\'AR01\\'})\\\" ui-sref-opts=\\\"{inherit:false}\\\" title=\\\"{{\\'收货报告A\\'+\\'&nbsp;Rev.0\\'}}\\\">{{\\'收货报告A\\'}} <span style=\\\"margin-left: 8px;opacity: 0.4; font-size: 10px;\\\">{{\\'Rev.0\\'}}</span></li></ul></section></div><section class=\\\"category\\\" ng-switch-default=\\\"\\\"><h4>材料类型分类</h4><ul><li ng-show=\\\"!sideMenuList.length&&!uiIsSideMenuListLoaded\\\">加载中...</li><li ng-show=\\\"!sideMenuList.length&&uiIsSideMenuListLoaded\\\">暂无数据</li><li ng-show=\\\"sideMenuList.length\\\" ui-sref-active=\\\"active\\\" ng-repeat=\\\"item in sideMenuList\\\" ui-sref=\\\"home.process.processList({Class:item.Class,ProcessTypeId:item.Id,Rev:item.Rev})\\\" ui-sref-opts=\\\"{inherit:false}\\\" title=\\\"{{item.Name+\\'&nbsp;Rev.\\'+item.Rev}}\\\">{{item.Name}} <span style=\\\"margin-left: 8px;opacity: 0.4; font-size: 10px;\\\">{{\\'Rev.\\'+item.Rev}}</span></li></ul></section></cm-side-menu><div ng-switch=\\\"stateParams.Class\\\"><div ng-switch-when=\\\"收货\\\"><div ng-if=\\\"stateParams.ProcessTypeId&&stateParams.Rev&&stateParams.ProcessNodeTypeId\\\"><ng-include src=\\\"\\'app/interaction/process/list/count_form.html\\'\\\" ng-controller=\\\"ProcessListCountCtrl\\\"></ng-include></div><div ng-if=\\\"!(stateParams.ProcessTypeId&&stateParams.Rev&&stateParams.ProcessNodeTypeId)\\\"><ng-include src=\\\"\\'app/interaction/process/list/blank.html\\'\\\" ng-controller=\\\"ProcessListBlankCtrl\\\"></ng-include></div></div><div ng-switch-default=\\\"\\\"><div ng-if=\\\"stateParams.ProcessTypeId&&stateParams.Rev\\\"><ng-include src=\\\"\\'app/interaction/process/list/inspection_process.html\\'\\\" ng-controller=\\\"ProcessListInspectionCtrl\\\"></ng-include></div><div ng-if=\\\"!(stateParams.ProcessTypeId&&stateParams.Rev)\\\"><ng-include src=\\\"\\'app/interaction/process/list/blank.html\\'\\\" ng-controller=\\\"ProcessListBlankCtrl\\\"></ng-include></div></div></div></cm-side-menu-box>\");\n$templateCache.put(\"app/interaction/process/list/blank.html\",\"<cm-side-menu-content><cm-side-menu-content-header><section class=\\\"title\\\"><h2>选择检验物料的类型</h2></section><section class=\\\"toolbar\\\"></section></cm-side-menu-content-header><section class=\\\"rmi-process-list-blank\\\"><section class=\\\"notification\\\" style=\\\"{{(uiIsProcessTypesShow&&sideMenuList.length)?\\'margin-top:20%\\':\\'margin-top:25%\\'}}\\\"><div>请从左边选择检验的物料类型<br>或 <a ng-click=\\\"uiIsProcessTypesShow=!uiIsProcessTypesShow\\\">选择一个默认的类型</a></div></section><section class=\\\"processTypes\\\" ng-show=\\\"uiIsProcessTypesShow&&sideMenuList.length\\\"><div class=\\\"processType\\\" ng-repeat=\\\"item in sideMenuList track by $index\\\" ng-click=\\\"funcSetDefaultProcessType(item.Id,item.Rev)\\\">{{item.Name}}</div></section></section></cm-side-menu-content>\");\n$templateCache.put(\"app/interaction/process/list/count_form.html\",\"<cm-side-menu-content><cm-side-menu-content-header><section class=\\\"title\\\"><h2>收货报告列表</h2></section><section class=\\\"toolbar\\\"><div class=\\\"button\\\">我创建的</div><div class=\\\"button\\\">未提交</div><div class=\\\"button\\\">已提交</div><div class=\\\"button\\\">时间范围 2015.1.1 - 2016.1.1</div></section></cm-side-menu-content-header><section><table ng-table=\\\"tableParams\\\" class=\\\"table table-striped table-hover list\\\"><tbody><tr ng-repeat=\\\"item in $data track by $index\\\"><td data-title=\\\"\\'\\'\\\" style=\\\"padding-left: 24px;vertical-align: middle\\\"><div class=\\\"cm-table-indicator-dot\\\" style=\\\"background-color: {{\\'#\\'+item.Id}}\\\"></div></td><td data-title=\\\"\\'状态\\'\\\"><div title=\\\"{{item.Id}}\\\">{{item.Status | FormStatusFilter}}</div></td><td data-title=\\\"\\'创建\\'\\\"><span class=\\\"cm-table-user\\\" title=\\\"工号：{{item.CreateUserId}}\\\">{{item.CreateUserName}}</span> <span class=\\\"cm-table-time\\\">{{item.CreateTime | date: \\'MM月dd日 HH:mm\\' }}</span></td><td data-title=\\\"\\'最后修改\\'\\\"><span class=\\\"cm-table-user\\\" title=\\\"工号：{{item.LastModifiedUserId}}\\\">{{item.LastModifiedUserName}}</span> <span class=\\\"cm-table-time\\\">{{item.LastModifiedTime | date: \\'MM月dd日 HH:mm\\' }}</span></td><td data-title=\\\"\\'生成的检验任务\\'\\\" style=\\\"padding-left: 24px;vertical-align: middle\\\"><div style=\\\"display: flex\\\"><div ng-repeat=\\\"asn in item.Parameter.processes\\\" ui-sref=\\\"home.process.detailInfo({ArrivalSerialNumber:asn})\\\" style=\\\"margin-right: 8px;cursor: pointer;\\\"><div class=\\\"cm-table-indicator-dot\\\" style=\\\"{{\\'background-color:#\\'+asn}}\\\"></div></div></div></td><td data-title=\\\"\\'操作\\'\\\" style=\\\"text-align: left\\\"><a ng-click=\\\"funcGoDetail(item.ArrivalSerialNumber,item.Id,\\'view\\')\\\">查看</a> &nbsp; <a ng-show=\\\"item.Status!==\\'4\\'\\\" ng-click=\\\"funcGoDetail(item.ArrivalSerialNumber,item.Id,\\'edit\\')\\\">编辑</a></td></tr></tbody></table></section></cm-side-menu-content>\");\n$templateCache.put(\"app/interaction/process/list/inspection_process.html\",\"<cm-side-menu-content class=\\\"rmiFormListInspection\\\"><cm-side-menu-content-header><section class=\\\"title\\\"><h2>{{tableDataOption.IsComplete===\\'true\\'?\\'已完成\\':\\'未完成\\'}}检验任务列表</h2></section><section class=\\\"toolbar\\\"><div class=\\\"button {{tableDataOption.IsComplete===\\'false\\'?\\'active\\':\\'\\'}}\\\" ng-click=\\\"funcChangeOption(\\'IsComplete\\',\\'false\\')\\\">进行中的检验</div><div class=\\\"button {{tableDataOption.IsComplete===\\'waiting\\'?\\'active\\':\\'\\'}}\\\" ng-click=\\\"funcChangeOption(\\'IsComplete\\',\\'waiting\\')\\\">待确认完成</div><div class=\\\"button {{tableDataOption.IsComplete===\\'true\\'?\\'active\\':\\'\\'}}\\\" ng-click=\\\"funcChangeOption(\\'IsComplete\\',\\'true\\')\\\">已完成</div></section></cm-side-menu-content-header><section class=\\\"rmiProcessListProcessView\\\"><table ng-table=\\\"tableParamsInProcessView\\\" class=\\\"table list\\\"><thead><tr><th rowspan=\\\"2\\\">#</th><th rowspan=\\\"2\\\">分类</th><th rowspan=\\\"2\\\" ng-hide=\\\"tableDataOption.IsComplete===\\'true\\'\\\">任务开始时间</th><th rowspan=\\\"2\\\" ng-show=\\\"tableDataOption.IsComplete===\\'true\\'\\\">任务完成时间</th><th colspan=\\\"4\\\">物料信息</th><th rowspan=\\\"2\\\">检验过程</th><th rowspan=\\\"2\\\">操作</th></tr><tr><th>物料名称</th><th>货号</th><th>颜色</th><th>供应商</th></tr></thead><tbody><tr ng-repeat=\\\"Process in $data track by $index\\\" class=\\\"cm-table-vertical-align-middle\\\"><td data-title=\\\"\\'#\\'\\\"><div class=\\\"cm-table-indicator-dot\\\" style=\\\"background-color: {{\\'#\\'+Process.ArrivalSerialNumber}};\\\"></div></td><td><div title=\\\"{{Process.ArrivalSerialNumber}}\\\">{{Process.TypeName}}</div></td><td class=\\\"cm-table-time\\\" ng-hide=\\\"tableDataOption.IsComplete===\\'true\\'\\\">{{Process.StartTime | date:\\'MM月dd日 HH:mm\\'}}</td><td class=\\\"cm-table-time\\\" ng-show=\\\"tableDataOption.IsComplete===\\'true\\'\\\">{{Process.CompleteTime | date:\\'MM月dd日 HH:mm\\'}}</td><td>{{Process.Parameter.wuliaomingcheng}}</td><td>{{Process.Parameter.huohao}}</td><td>{{Process.Parameter.yanse}}</td><td>{{Process.Parameter.gongyingshang}}</td><td class=\\\"processNodeList\\\" style=\\\"{{($index===0)?\\'border-top:0\\':\\'\\'}}\\\"><div ng-repeat=\\\"Node in Process.Nodes\\\" ng-if=\\\"Node.Available\\\" class=\\\"processNode status-{{Node.Form.Status}}\\\" ng-click=\\\"funcGoFormEdit(Process,Node,Node.Form)\\\" title=\\\"{{Node.Form.Status|FormStatusFilter}}\\\"><div class=\\\"status\\\">{{Node.Form.Status|FormStatusFilter}}</div><div class=\\\"name\\\">{{Node.Name}}</div></div></td><td><a ng-click=\\\"funcGoDetailInfo(Process.ArrivalSerialNumber)\\\">查看</a></td></tr><tr ng-if=\\\"!($data.length>0)\\\"><td colspan=\\\"9\\\" ng-switch=\\\"tableDataOption.IsComplete\\\"><div ng-switch-when=\\\"true\\\" style=\\\"height: 64px;width: 100%;line-height: 64px;text-align: center;color: #777\\\">暂无已完成的检验任务</div><div ng-switch-when=\\\"false\\\" style=\\\"height: 64px;width: 100%;line-height: 64px;text-align: center;color: #777\\\">暂无未完成的检验任务</div><div ng-switch-when=\\\"waiting\\\" style=\\\"height: 64px;width: 100%;line-height: 64px;text-align: center;color: #777\\\">暂无未完成的检验任务</div></td></tr></tbody></table></section></cm-side-menu-content>\");\n$templateCache.put(\"app/interaction/control/design/edit/configs.html\",\"<section class=\\\"block\\\"><h4>组件基本信息</h4><section class=\\\"map\\\"><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">模板类型</div><div class=\\\"input\\\"><label title=\\\"映射\\\"><input type=\\\"radio\\\" ng-model=\\\"generalConfig.Type\\\" value=\\\"map\\\" disabled=\\\"\\\">映射</label> <label title=\\\"表格\\\"><input type=\\\"radio\\\" ng-model=\\\"generalConfig.Type\\\" value=\\\"table\\\" disabled=\\\"\\\">表格</label></div></div><div class=\\\"item\\\" ng-if=\\\"uiIsMap\\\"><div class=\\\"name\\\">模板样式</div><div class=\\\"input\\\"><label title=\\\"映射\\\"><input type=\\\"radio\\\" ng-model=\\\"generalConfig.Style\\\" value=\\\"flex\\\">Flex</label> <label title=\\\"表格\\\"><input type=\\\"radio\\\" ng-model=\\\"generalConfig.Style\\\" value=\\\"left\\\">Left</label></div></div><div class=\\\"item\\\"><div class=\\\"name\\\">是否可见</div><div class=\\\"input\\\"><label title=\\\"是\\\"><input type=\\\"radio\\\" ng-model=\\\"generalConfig.Show\\\" value=\\\"true\\\" disabled=\\\"\\\">是</label> <label title=\\\"否\\\"><input type=\\\"radio\\\" ng-model=\\\"generalConfig.Show\\\" value=\\\"false\\\" disabled=\\\"\\\">否</label></div></div><div class=\\\"item\\\"></div></div><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">快捷初始化函数</div><div class=\\\"input\\\" style=\\\"width: 100%;\\\"><label style=\\\"width: 100%;\\\"><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"generalConfig.QuickInitial\\\" style=\\\"width: 100%;\\\"></label></div></div></div></section></section><section class=\\\"block\\\" ng-show=\\\"uiIsAddPanelShow\\\"><h4 ng-show=\\\"uiIsTable\\\">添加表格新的项</h4><h4 ng-show=\\\"uiIsMap\\\">添加映射新的项</h4><form name=\\\"addNewCol\\\" ng-submit=\\\"funcAddUpConfigs()\\\"><section class=\\\"map\\\"><div class=\\\"row\\\"><div class=\\\"item\\\" ng-if=\\\"uiIsTable\\\"><div class=\\\"name\\\">列名</div><div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.Name\\\" placeholder=\\\"表头显示的内容\\\"></div></div><div class=\\\"item\\\" ng-if=\\\"uiIsMap\\\" ng-show=\\\"generalConfig.Style===\\'flex\\'\\\"><div class=\\\"name\\\">名称</div><div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.Name\\\" placeholder=\\\"说明文字\\\"></div></div><div class=\\\"item\\\" ng-if=\\\"uiIsMap\\\" ng-show=\\\"generalConfig.Style===\\'left\\'\\\"><div class=\\\"name\\\">左描述</div><div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.LeftDescription\\\" placeholder=\\\"\\\"></div></div><div class=\\\"item\\\" ng-if=\\\"uiIsMap\\\" ng-show=\\\"generalConfig.Style===\\'left\\'\\\"><div class=\\\"name\\\">右描述</div><div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.RightDescription\\\" placeholder=\\\"\\\"></div></div><div class=\\\"item\\\"><div class=\\\"name\\\">属性名</div><div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.AttributeName\\\" placeholder=\\\"数据表属性名\\\" required=\\\"\\\"></div></div><div class=\\\"item\\\" ng-if=\\\"uiIsMap\\\"><div class=\\\"name\\\">行号</div><div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.Row\\\" placeholder=\\\"所处的行数\\\"></div></div><div class=\\\"item\\\" ng-if=\\\"uiIsTable\\\"><div class=\\\"name\\\">组名</div><div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.Group\\\" placeholder=\\\"表头分组依据\\\"></div></div><div class=\\\"item\\\"><div class=\\\"name\\\">宽度</div><div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.Width\\\" placeholder=\\\"填写区域宽度[WIP]\\\"></div></div><div class=\\\"item\\\"></div></div><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">域类型</div><div class=\\\"input\\\"><label title=\\\"文本\\\"><input type=\\\"radio\\\" ng-model=\\\"itemConfig.Type\\\" value=\\\"text\\\">Text</label> <label title=\\\"数字\\\"><input type=\\\"radio\\\" ng-model=\\\"itemConfig.Type\\\" value=\\\"number\\\">Number</label> <label title=\\\"下拉单选框\\\"><input type=\\\"radio\\\" ng-model=\\\"itemConfig.Type\\\" value=\\\"select\\\">Select</label> <label title=\\\"下拉多选框\\\"><input type=\\\"radio\\\" ng-model=\\\"itemConfig.Type\\\" value=\\\"multiSelect\\\">Multi-Select</label> <label title=\\\"单选按钮\\\"><input type=\\\"radio\\\" ng-model=\\\"itemConfig.Type\\\" value=\\\"radio\\\">Radio</label> <label title=\\\"多选框\\\"><input type=\\\"radio\\\" ng-model=\\\"itemConfig.Type\\\" value=\\\"checkbox\\\">Checkbox</label> <label title=\\\"日期选择器\\\"><input type=\\\"radio\\\" ng-model=\\\"itemConfig.Type\\\" value=\\\"date\\\">Date</label> <label title=\\\"周选择器\\\"><input type=\\\"radio\\\" ng-model=\\\"itemConfig.Type\\\" value=\\\"week\\\">Week</label> <label title=\\\"日期与时间选择器\\\"><input type=\\\"radio\\\" ng-model=\\\"itemConfig.Type\\\" value=\\\"datetime\\\">Datetime</label></div></div></div><div class=\\\"row left\\\" ng-show=\\\"itemConfig.Type===\\'text\\'||itemConfig.Type===\\'number\\'\\\"><div class=\\\"item\\\"><div class=\\\"left-description\\\">正则表达式</div><div class=\\\"input\\\"><label><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.ngPattern\\\"></label></div></div><div class=\\\"item\\\"><div class=\\\"left-description\\\">最小长度</div><div><input type=\\\"number\\\" class=\\\"value\\\" style=\\\"min-width: 50px;width: 50px;\\\" ng-model=\\\"itemConfig.ngMinlength\\\"></div></div><div class=\\\"item\\\"><div class=\\\"left-description\\\">最大长度</div><div class=\\\"input\\\"><label><input type=\\\"number\\\" class=\\\"value\\\" style=\\\"min-width: 50px;width: 50px;\\\" ng-model=\\\"itemConfig.ngMaxlength\\\"></label></div></div><div class=\\\"item\\\"><div class=\\\"input\\\"><label><input type=\\\"checkbox\\\" ng-model=\\\"itemConfig.ngRequired\\\">必填</label> <label><input type=\\\"checkbox\\\" ng-model=\\\"itemConfig.ngDisabled\\\">不可修改</label> <label ng-show=\\\"itemConfig.Type===\\'text\\'\\\"><input type=\\\"checkbox\\\" ng-model=\\\"itemConfig.ngTrim\\\">字符串优化(trim)</label></div></div></div><div class=\\\"row left\\\" ng-show=\\\"itemConfig.Type===\\'number\\'\\\"><div class=\\\"item\\\"><div class=\\\"left-description\\\">范围限定：</div><div class=\\\"left-description\\\">最小值</div><div class=\\\"input\\\"><label><input type=\\\"number\\\" class=\\\"value\\\" style=\\\"width: 100px;\\\" ng-model=\\\"itemConfig.ngMin\\\"></label></div></div><div class=\\\"item\\\"><div class=\\\"left-description\\\">最大值</div><div class=\\\"input\\\"><label><input type=\\\"number\\\" class=\\\"value\\\" style=\\\"width: 100px;\\\" ng-model=\\\"itemConfig.ngMax\\\"></label></div></div></div><div class=\\\"row\\\" ng-show=\\\"itemConfig.Type===\\'select\\'||itemConfig.Type===\\'multiSelect\\'||itemConfig.Type===\\'checkbox\\'||itemConfig.Type===\\'radio\\'\\\"><div class=\\\"item\\\"><div class=\\\"left-description\\\">可选值来源</div><div style=\\\"cursor: pointer;white-space: nowrap\\\" onclick=\\\"alert(\\'DEV\\')\\\">设置&nbsp;&nbsp;</div><div class=\\\"input\\\" style=\\\"width:100%;\\\"><label style=\\\"width: 100%;\\\"><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.Sources\\\" ng-list=\\\"\\\" placeholder=\\\"使用预设的可选值列表\\\" style=\\\"width: 100%\\\"></label></div></div><div class=\\\"item\\\"><div class=\\\"input\\\"><label><input type=\\\"checkbox\\\" ng-model=\\\"itemConfig.ngRequired\\\">必填</label> <label><input type=\\\"checkbox\\\" ng-model=\\\"itemConfig.ngDisabled\\\">不可修改</label></div></div></div><div class=\\\"row\\\" ng-show=\\\"itemConfig.Type===\\'select\\'||itemConfig.Type===\\'multiSelect\\'||itemConfig.Type===\\'checkbox\\'||itemConfig.Type===\\'radio\\'\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">可选值</div><div class=\\\"input\\\" style=\\\"width:100%;\\\"><label style=\\\"width: 100%;\\\"><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.Options\\\" ng-list=\\\"\\\" placeholder=\\\"请使用&quot;,&quot;字符来分隔可选项\\\" style=\\\"width: 100%\\\"></label></div></div></div><div class=\\\"row left\\\" ng-show=\\\"itemConfig.Type===\\'date\\'||itemConfig.Type===\\'week\\'||itemConfig.Type===\\'datetime\\'\\\"><div class=\\\"item\\\"><div class=\\\"left-description\\\">最早时间</div><div class=\\\"input\\\"><label><input type=\\\"number\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.ngMin\\\"></label></div></div><div class=\\\"item\\\"><div class=\\\"left-description\\\">最晚时间</div><div class=\\\"input\\\"><label><input type=\\\"number\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.ngMax\\\"></label></div></div><div class=\\\"item\\\"><div class=\\\"input\\\"><label><input type=\\\"checkbox\\\" ng-model=\\\"itemConfig.ngRequired\\\">必填</label> <label><input type=\\\"checkbox\\\" ng-model=\\\"itemConfig.ngDisabled\\\">不可修改</label></div></div></div></section><input class=\\\"btn btn-default\\\" type=\\\"submit\\\" id=\\\"submit\\\" value=\\\"添加\\\"></form></section><section class=\\\"block\\\"><h4>表格配置信息</h4><table class=\\\"table table-hover table-bordered table-condensed\\\"><thead><tr ng-if=\\\"uiIsTable\\\"><th width=\\\"5%\\\">修改</th><th width=\\\"5%\\\" style=\\\"cursor:pointer;\\\" ng-click=\\\"funcReorderConfigs()\\\">序号</th><th width=\\\"15%\\\">组名</th><th width=\\\"15%\\\">列名</th><th width=\\\"15%\\\">属性名</th><th width=\\\"10%\\\">类型</th><th width=\\\"35%\\\">限定配置</th></tr><tr ng-if=\\\"uiIsMap\\\"><th width=\\\"5%\\\">修改</th><th width=\\\"5%\\\" style=\\\"cursor:pointer;\\\" ng-click=\\\"funcReorderConfigs()\\\">序号</th><th width=\\\"5%\\\">行号</th><th width=\\\"15%\\\">列名</th><th width=\\\"15%\\\">属性名</th><th width=\\\"10%\\\">类型</th><th width=\\\"40%\\\">限定配置</th><th style=\\\"width:5%\\\">修改</th></tr></thead><tbody><tr ng-repeat=\\\"itemConfig in itemConfigs | orderBy:Order\\\" ng-if=\\\"uiIsTable\\\"><td ng-click=\\\"funcDeleteFromConfigs($index)\\\" style=\\\"cursor: pointer;\\\">删除</td><td><div contenteditable=\\\"true\\\" cmcontenteditable=\\\"\\\" ng-model=\\\"itemConfig.Order\\\"></div></td><td>{{itemConfig.Group}}</td><td>{{itemConfig.Name}}</td><td>{{itemConfig.AttributeName}}</td><td>{{itemConfig.Type}}</td><td style=\\\"word-break: break-all;overflow: hidden\\\"><code>{{itemConfig}}</code></td></tr><tr ng-repeat=\\\"itemConfig in itemConfigs | orderBy:Order\\\" ng-if=\\\"uiIsMap\\\"><td ng-click=\\\"funcDeleteFromConfigs($index)\\\" style=\\\"cursor: pointer;\\\">删除</td><td><div contenteditable=\\\"true\\\" cmcontenteditable=\\\"\\\" ng-model=\\\"itemConfig.Order\\\"></div></td><td>{{itemConfig.Row}}</td><td>{{itemConfig.Name}}</td><td>{{itemConfig.AttributeName}}</td><td>{{itemConfig.Type}}</td><td style=\\\"word-break: break-all;overflow: hidden\\\"><code>{{itemConfig}}</code></td><td ng-click=\\\"funcLoadItemConfigToAddPanel(itemConfig,$index)\\\" style=\\\"cursor: pointer;\\\">修改</td></tr><tr ng-show=\\\"!(itemConfigs.length>0)\\\"><td colspan=\\\"8\\\" style=\\\"height: 64px;text-align:center;line-height:64px;background-color: #F4F4F4;font-size: 15px\\\">列表为空，请从上面添加项目</td></tr></tbody></table></section><section class=\\\"block\\\"><h4>配置信息</h4><pre>\\n    {{itemConfigs | json}}\\n  </pre></section>\");\n$templateCache.put(\"app/interaction/control/design/edit/form.html\",\"<cm-side-menu-content class=\\\"form-table control\\\"><cm-side-menu-content-header><section class=\\\"title\\\"><div class=\\\"block\\\" ng-if=\\\"uiIsEditCache\\\">正在编辑缓存 <span ng-click=\\\"funcSaveConfigsCacheAndBack()\\\" class=\\\"cm-button\\\">保存并返回</span></div></section><section class=\\\"toolbar\\\"></section></cm-side-menu-content-header><section style=\\\"display: flex;\\\"><div style=\\\"flex: 7;\\\"><section class=\\\"block\\\"><h4>表单基本信息</h4><section class=\\\"map\\\"><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">可选表单标签</div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"generalConfig.OptionalTags\\\" ng-list=\\\"\\\" placeholder=\\\"使用英文逗号分隔\\\" style=\\\"width: 67%\\\"></div></div></section></section><section class=\\\"block\\\"><h4>添加表单组件</h4><section class=\\\"map\\\"><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">通过JSON加载</div><div style=\\\"cursor: pointer\\\" ng-click=\\\"funcLoadConfig(configString)\\\" class=\\\"cm-button\\\">加载</div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"configString\\\" placeholder=\\\"\\\" style=\\\"width: 67%\\\"></div></div><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">通过本地缓存加载</div><div>加载&nbsp;&nbsp;&nbsp;&nbsp;</div><div ng-click=\\\"funcGoCreateItemConfig(\\'table\\')\\\" class=\\\"cm-button\\\">创建表格组件</div><div ng-click=\\\"funcGoCreateItemConfig(\\'map\\')\\\" class=\\\"cm-button\\\">创建映射组件</div><div ng-click=\\\"funcGoEditItemConfig(itemConfig.Type)\\\" class=\\\"cm-button\\\">编辑当前组件</div></div></div></section><form ng-submit=\\\"funcAddUpConfigs()\\\"><section class=\\\"map\\\"><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">模板类型</div><div class=\\\"input\\\"><label title=\\\"映射\\\"><input type=\\\"radio\\\" ng-model=\\\"itemConfig.Type\\\" value=\\\"map\\\">映射</label> <label title=\\\"表格\\\"><input type=\\\"radio\\\" ng-model=\\\"itemConfig.Type\\\" value=\\\"table\\\">表格</label></div></div><div class=\\\"item\\\" ng-show=\\\"itemConfig.Type===\\'map\\'\\\"><div class=\\\"name\\\">模板样式</div><div class=\\\"input\\\"><label title=\\\"映射\\\"><input type=\\\"radio\\\" ng-model=\\\"itemConfig.Style\\\" value=\\\"flex\\\">Flex</label> <label title=\\\"表格\\\"><input type=\\\"radio\\\" ng-model=\\\"itemConfig.Style\\\" value=\\\"left\\\">Left</label></div></div><div class=\\\"item\\\"><div class=\\\"name\\\">是否可见</div><div class=\\\"input\\\"><label title=\\\"是\\\"><input type=\\\"radio\\\" ng-model=\\\"itemConfig.Show\\\" id=\\\"inlineRadio3\\\" value=\\\"true\\\">是</label> <label title=\\\"否\\\"><input type=\\\"radio\\\" ng-model=\\\"itemConfig.Show\\\" id=\\\"inlineRadio4\\\" value=\\\"false\\\">否</label></div></div></div><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">快捷初始化函数</div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.QuickInitial\\\" style=\\\"width: 67%;\\\"></div></div><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">模板配置</div><div style=\\\"width: 85%;\\\"><pre>{{itemConfig.Config}}</pre></div></div></div></section><input class=\\\"btn btn-default\\\" type=\\\"submit\\\" id=\\\"submit\\\" value=\\\"添加\\\"></form></section><section class=\\\"block\\\"><h4>表单内容配置信息</h4><table class=\\\"table table-hover table-bordered table-condensed\\\"><thead><tr><th style=\\\"width:5%\\\">修改</th><th style=\\\"width:5%;cursor:pointer;\\\" ng-click=\\\"funcReorderConfigs()\\\">序号</th><th style=\\\"width:10%\\\">模板类型</th><th style=\\\"width:5%\\\">是否显示</th><th style=\\\"width:70%;\\\">配置信息</th><th style=\\\"width:5%\\\">修改</th></tr></thead><tbody><tr ng-repeat=\\\"itemConfig in itemConfigs | orderBy:Order\\\"><td ng-click=\\\"funcDeleteFromConfigs($index)\\\" style=\\\"cursor: pointer;\\\">删除</td><td><div contenteditable=\\\"true\\\" cmcontenteditable=\\\"\\\" ng-model=\\\"itemConfig.Order\\\"></div></td><td>{{itemConfig.Type}}</td><td>{{itemConfig.Show}}</td><td><code style=\\\"word-break: break-all;overflow: hidden\\\">{{itemConfig.Config}}</code></td><td ng-click=\\\"funcLoadItemConfigToAddPanel(itemConfig,$index)\\\" style=\\\"cursor: pointer;\\\">修改</td></tr><tr ng-show=\\\"!(itemConfigs.length>0)\\\"><td colspan=\\\"8\\\" style=\\\"height: 64px;text-align:center;line-height:64px;background-color: #F4F4F4;font-size: 15px\\\">列表为空，请从上面添加项目</td></tr></tbody></table></section><section class=\\\"block\\\"><pre>\\n    {{itemConfigs | json}}\\n  </pre></section></div><div style=\\\"flex: 3;margin-left: 12px;\\\" ng-if=\\\"false\\\"><section class=\\\"block\\\"><h4>本地组件列表</h4><ul><li ng-repeat=\\\"localConfig in localConfigs\\\">{{localConfig.description}} <span style=\\\"float: right;\\\">X</span></li></ul></section></div></section></cm-side-menu-content>\");\n$templateCache.put(\"app/interaction/control/design/edit/map.html\",\"<cm-side-menu-content class=\\\"form-table control\\\"><cm-side-menu-content-header><section class=\\\"title\\\"><div class=\\\"block\\\" ng-if=\\\"uiIsEditCache\\\">正在编辑缓存 <span ng-click=\\\"funcSaveConfigsCacheAndBack()\\\" class=\\\"cm-button\\\">保存并返回</span></div></section><section class=\\\"toolbar\\\"><div class=\\\"button {{$parent.uiIsAddPanelShow?\\'active\\':\\'\\'}}\\\" ng-click=\\\"$parent.uiIsAddPanelShow=!$parent.uiIsAddPanelShow\\\">添加新列</div></section></cm-side-menu-content-header><section style=\\\"display: flex;\\\"><div style=\\\"flex: 7;\\\"><ng-include src=\\\"\\'app/control/design/edit/configs.html\\'\\\"></ng-include></div><div style=\\\"flex: 3;margin-left: 12px\\\" ng-if=\\\"false\\\"><section class=\\\"block\\\"><h4>缓存的映射配置</h4><ul><li ng-repeat=\\\"i in [1,2,3,4,5,6,7,8,9]\\\">{{\\\"Condition:\\\"+i}}</li></ul></section></div></section></cm-side-menu-content>\");\n$templateCache.put(\"app/interaction/control/design/edit/process.html\",\"<cm-side-menu-content class=\\\"form-table control\\\"><cm-side-menu-content-header><section class=\\\"title\\\"><div class=\\\"block\\\" ng-if=\\\"uiIsEditCache\\\">正在编辑缓存 <span ng-click=\\\"funcSaveConfigsCacheAndBack()\\\" class=\\\"cm-button\\\">提交流程修改</span></div></section><section class=\\\"toolbar\\\"><div class=\\\"button\\\" ng-click=\\\"funcAddProcessTypeIdToConfigs()\\\">添加ProcessTypeId</div><div class=\\\"button\\\" ng-click=\\\"funcAddDatabaseTableNameToFormConfigs()\\\">添加生成的数据表名称</div><div class=\\\"button\\\" ng-click=\\\"funcCreateProcessTypeAndProcessNodeTypes(processConfig,configs)\\\">提交流程</div></section></cm-side-menu-content-header><section class=\\\"block\\\"><h4>流程基本信息</h4><section class=\\\"map\\\"><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">唯一标识</div><div class=\\\"input\\\"><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"generalConfig.Id\\\" placeholder=\\\"例如：A01\\\" required=\\\"\\\"></div></div><div class=\\\"item\\\"><div class=\\\"name\\\">修订号</div><div class=\\\"input\\\"><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"generalConfig.Rev\\\" placeholder=\\\"例如：勾袢\\\" required=\\\"\\\"></div></div><div class=\\\"item\\\"><div class=\\\"name\\\">分类</div><div class=\\\"input\\\"><label title=\\\"收货\\\"><input type=\\\"radio\\\" ng-model=\\\"generalConfig.Class\\\" value=\\\"收货\\\">收货</label> <label title=\\\"主料\\\"><input type=\\\"radio\\\" ng-model=\\\"generalConfig.Class\\\" value=\\\"主料\\\">主料</label> <label title=\\\"辅料\\\"><input type=\\\"radio\\\" ng-model=\\\"generalConfig.Class\\\" value=\\\"辅料\\\">辅料</label></div></div></div><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">名称</div><div class=\\\"input\\\"><label><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"generalConfig.Name\\\" placeholder=\\\"例如：勾袢\\\" required=\\\"\\\"></label></div></div></div><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">描述</div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"generalConfig.Description\\\" style=\\\"width: 100%;\\\" placeholder=\\\"编辑时的参考文字\\\"></div></div><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">流程完成条件</div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"generalConfig.CompleteCondition\\\" style=\\\"width: 100%;\\\" placeholder=\\\"例：PN01.Status=4&PN01.Tag!=>\\'严重质量问题\\'\\\"></div></div><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">流程参考配置</div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"generalConfig.Reference\\\" style=\\\"width: 100%;\\\" placeholder=\\\"配置收货报告、参考文档、标准值参考、选项框内容等\\\"></div></div></section></section><section class=\\\"block\\\"><h4>添加流程节点</h4><form ng-submit=\\\"funcAddUpConfigs()\\\"><section class=\\\"map\\\"><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">节点标识</div><div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.Id\\\" placeholder=\\\"例如：PN01\\\" required=\\\"\\\"></div></div><div class=\\\"item\\\"><div class=\\\"name\\\">名称</div><div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.Name\\\" placeholder=\\\"例如：颜色检验\\\" required=\\\"\\\"></div></div><div class=\\\"item\\\"></div></div><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">描述</div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.Description\\\" placeholder=\\\"描述信息，可为空\\\" style=\\\"width: 60%\\\"></div></div><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">可用性条件</div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"itemConfig.AvailableCondition\\\" placeholder=\\\"表示该节点可用需具备的条件，开发中\\\" style=\\\"width: 60%\\\"></div></div><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">导入JSON表单配置</div><div class=\\\"cm-button\\\" ng-click=\\\"funcLoadConfig(funcPackFormConfigString(configString))\\\">加载</div><input type=\\\"text\\\" class=\\\"value\\\" ng-model=\\\"configString\\\" placeholder=\\\"\\\" style=\\\"width: 60%\\\"></div></div><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">导入本地表单配置</div><div style=\\\"padding-right: 12px\\\">加载</div><div ng-click=\\\"funcGoCreateItemConfig(\\'form\\')\\\" class=\\\"cm-button\\\">创建表单</div><div ng-click=\\\"funcGoEditItemConfig(\\'form\\')\\\" class=\\\"cm-button\\\">编辑当前表单</div></div></div><div class=\\\"row\\\"><div class=\\\"item\\\"><div class=\\\"name\\\">表单配置</div><div style=\\\"width: 85%\\\"><pre>{{itemConfig.FormConfig}}</pre></div></div></div></section><input class=\\\"btn btn-default\\\" type=\\\"submit\\\" id=\\\"submit\\\" value=\\\"添加\\\"></form></section><section class=\\\"block\\\"><h4>流程节点配置信息</h4><table class=\\\"table table-hover table-bordered table-condensed\\\"><thead><tr><th style=\\\"width:5%\\\">修改</th><th style=\\\"width:5%;cursor:pointer;\\\" ng-click=\\\"funcReorderConfigs()\\\">序号</th><th style=\\\"width:5%\\\">节点标识</th><th style=\\\"width:5%\\\">名称</th><th style=\\\"width:15%;\\\">描述</th><th style=\\\"width:20%\\\">可用性条件</th><th style=\\\"width:40%\\\">表单配置</th><th style=\\\"width:5%\\\">修改</th></tr></thead><tbody><tr ng-repeat=\\\"itemConfig in itemConfigs | orderBy:Order\\\"><td ng-click=\\\"funcDeleteFromConfigs($index)\\\" style=\\\"cursor: pointer;\\\">删除</td><td><div contenteditable=\\\"true\\\" cmcontenteditable=\\\"\\\" ng-model=\\\"itemConfig.Order\\\"></div></td><td>{{itemConfig.Id}}</td><td>{{itemConfig.Name}}</td><td><code style=\\\"word-break: break-all;overflow: hidden\\\">{{itemConfig.Description}}</code></td><td><code style=\\\"word-break: break-all;overflow: hidden\\\">{{itemConfig.AvailableCondition}}</code></td><td><code style=\\\"word-break: break-all;overflow: hidden\\\">{{itemConfig.FormConfig}}</code></td><td ng-click=\\\"funcLoadItemConfigToAddPanel(itemConfig,$index)\\\" style=\\\"cursor: pointer;\\\">修改</td></tr><tr ng-show=\\\"!(itemConfigs.length>0)\\\"><td colspan=\\\"8\\\" style=\\\"height: 64px;text-align:center;line-height:64px;background-color: #F4F4F4;font-size: 15px\\\">列表为空，请从上面添加项目</td></tr></tbody></table></section><section class=\\\"block\\\"><pre>\\n  {{itemConfigs | json}}\\n  </pre></section></cm-side-menu-content>\");\n$templateCache.put(\"app/interaction/control/design/edit/table.html\",\"<cm-side-menu-content class=\\\"form-table control\\\"><cm-side-menu-content-header><section class=\\\"title\\\"><div class=\\\"block\\\" ng-if=\\\"uiIsEditCache\\\">正在编辑缓存 <span ng-click=\\\"funcSaveConfigsCacheAndBack()\\\" class=\\\"cm-button\\\">保存并返回</span></div></section><section class=\\\"toolbar\\\"><div class=\\\"button {{$parent.uiIsAddPanelShow?\\'active\\':\\'\\'}}\\\" ng-click=\\\"$parent.uiIsAddPanelShow=!$parent.uiIsAddPanelShow\\\">添加新列</div></section></cm-side-menu-content-header><section style=\\\"display: flex;\\\"><div style=\\\"flex: 7;\\\"><ng-include src=\\\"\\'app/control/design/edit/configs.html\\'\\\"></ng-include></div><div style=\\\"flex: 3;margin-left: 12px\\\" ng-if=\\\"false\\\"><section class=\\\"block\\\"><h4>缓存的表格配置</h4><ul><li ng-repeat=\\\"i in [1,2,3,4,5,6,7,8,9]\\\">{{\\\"Condition:\\\"+i}}</li></ul></section></div></section></cm-side-menu-content>\");}]);"],"sourceRoot":"/source/"}